(()=>{"use strict";var t,e,s,i={112445:(t,e,s)=>{s.d(e,{default:()=>h});s(682772),s(140561);var i=s(873589),o=s(70162),r=s(152278),a=s(342269);function n(t,e){this._inputEl=t,this.setOptions(e),this._opts.history=!!this._opts.historyItems,this._fetchTO=!1,this._candidateQuery="",this._fetchedQuery="",this._suggestions={},(0,r.addEvent)(this._inputEl,"input keyup keydown change valueChanged refresh",this._onInputValueChanged.bind(this)),(0,r.addEvent)(this._inputEl,"click",this._onInputClick.bind(this));var s=(0,i.geByClass1)("_ui_search_button_search",this._parentEl());s&&(0,r.addEvent)(s,"click",function(){this.value()&&(this._hideSuggestions(!0),this._triggerSearch(this.value(),!0)),this._inputEl.focus()}.bind(this))}n.FETCH_DELAY=250,n.FETCH_TIMEOUT=9500,n.SEARCH_TRIGGER_DELAY=200,n.prototype._onInputClick=function(){var t=this.value();!this._isSuggestionsShown()&&!t&&this._opts.history&&this._opts.historyItems&&this._showSuggestions(this._opts.historyItems,!0),!this._isSuggestionsShown()&&t&&this._suggestions[t]&&this._showSuggestions(this._suggestions[t])},n.prototype._onInputValueChanged=function(t){"valueChanged"==t.type&&(this.value()||(this._hideSuggestions(!0),this._triggerSearch(""))),"refresh"==t.type&&(this.value()||this._hideSuggestions(!0)),t.keyCode===r.KEY.DEL?(this._candidateIsNotAppropriateForUser=!0,this._candidateQuery=""):this._candidateIsNotAppropriateForUser=!1;var e=!1;if("keydown"==t.type){if(this._prevCaretPos=this._prevCaretPos||0,this._candidateQuery&&(t.keyCode==r.KEY.TAB||t.keyCode==r.KEY.RIGHT&&this._inputEl.selectionStart==this._inputEl.value.length&&this._prevCaretPos==this._inputEl.selectionStart)&&(this._opts.onlyShowSuggestions||(this._inputEl.value=this._candidateQuery),this._candidateQuery="",this._renderCandidate(),this._hideSuggestions(),this._fetchSuggestions(),t.keyCode==r.KEY.TAB&&(e=!0)),setTimeout(function(){this._prevCaretPos=this._inputEl.selectionStart}.bind(this)),(t.keyCode==r.KEY.UP||t.keyCode==r.KEY.DOWN)&&this._isSuggestionsShown())return this._selectSuggestion(t.keyCode==r.KEY.DOWN),!1;if(t.keyCode==r.KEY.ENTER){var s=this._onAcceptSuggestion();return this._cancelFetchSuggestion(),this._hideSuggestions(!0),void this._triggerSearch(this.value(),!0,void 0,s&&(0,i.domData)(s,"id"))}}else if("keyup"==t.type)switch(t.keyCode){case r.KEY.ESC:this._isSuggestionsShown()?(this._triggerSearch(this.value(),!this._candidateQuery||this._candidateQuery),this._hideSuggestions(!0)):(this._inputEl.value="",this._triggerSearch(""));break;case r.KEY.ENTER:case r.KEY.RIGHT:case r.KEY.LEFT:case r.KEY.TAB:case r.KEY.SHIFT:case r.KEY.CTRL:case r.KEY.ALT:case 35:case 36:case r.KEY.UP:case r.KEY.DOWN:break;default:var o=this.value();o.length>1?(this._fetchSuggestions(),this._renderCandidate()):this._hideSuggestions(!0),this._candidateIsNotAppropriateForUser?this._triggerSearchDelayed(o):this._triggerSearchDelayed(o,this._getFirstSuggestion(o))}if(setTimeout(function(){this.value()||(this._candidateQuery=""),this._renderCandidate()}.bind(this)),e)return!1},n.prototype._onAcceptSuggestion=function(){var t=(0,i.geByClass1)("ui_search_suggestion_selected",this._parentEl());return t&&(0,a.isFunction)(this._opts.onAcceptSuggestion)&&this._opts.onAcceptSuggestion((0,i.domData)(t,"id"),(0,i.domData)(t,"value"),t),t},n.prototype._cancelFetchSuggestion=function(){clearTimeout(this._fetchTimeout),clearTimeout(this._fetchTO),this._fetchTimeout=this._fetchTO=0},n.prototype._selectSuggestion=function(t){var e="ui_search_suggestion_selected",s=(0,i.geByClass1)(e,this._parentEl());if((0,i.removeClass)(s,e),t)s=(0,i.domNS)(s)||(0,i.geByClass1)("ui_search_sugg_list_item",this._parentEl());else{var o=(0,i.geByClass)("ui_search_sugg_list_item",this._parentEl());s=(0,i.domPS)(s)||o[o.length-1]}(0,i.addClass)(s,e),this._candidateQuery="",s&&(0,a.isFunction)(this._opts.onSelectSuggestion)&&this._opts.onSelectSuggestion((0,i.domData)(s,"id"),(0,i.domData)(s,"value"),s),this._opts.onlyShowSuggestions||(this._inputEl.value=(0,i.domData)(s,"value"),this._triggerSearchDelayed(this.value(),!0,void 0,(0,i.domData)(s,"id")))},n.prototype._parentEl=function(){return(0,i.gpeByClass)("_wrap",this._inputEl)},n.prototype._renderCandidate=function(){var t=(0,i.geByClass1)("_ui_search_suggester_shadow",this._parentEl());if(t){var e=this.value();return this._candidateQuery&&0===this._candidateQuery.indexOf(e.toLowerCase())?(t.innerHTML='<span class="ui_search_suggester_shadow_hidden">'+e+"</span>"+this._candidateQuery.substring(e.length),(0,i.show)(t),!0):(t.innerHTML="",(0,i.hide)(t),!1)}},n.prototype._isSuggestionsShown=function(){return!!this._suggestionsShown},n.prototype._hideSuggestions=function(t){t&&(this._candidateQuery="",this._renderCandidate());var e=(0,i.geByClass1)("_ui_search_sugg_list",this._parentEl());(0,i.hide)(e),(0,i.hide)((0,i.geByClass1)("_ui_search_suggester_shadow",this._parentEl())),this._onWindowMouseDown&&(0,r.removeEvent)(window,"mousedown",this._onWindowMouseDown),this._renderCandidate(),this._suggestionsShown=!1},n.prototype._showSuggestions=function(t,e){this._hideSuggestions(),t=t||[];var s=(0,a.trim)(this.value());if(0!=t.length){var n=(0,i.geByClass1)("_ui_search_sugg_list",this._parentEl()),h="";e&&(h+='<div class="ui_search_sugg_history_header">'+(0,o.getLang)("global_recent_search_history")+"</div>"),h+="<div>";var _=0,u=this;(0,a.each)(t,(function(t,i){if(s!=i[3]||u._opts.onlyShowSuggestions){var r="";e&&(r='<a class="ui_search_sugg_list_item_remove" data-hash="'+i[4]+'" data-id="'+i[0]+'">'+(0,o.getLang)("global_remove_history_search_item")+"</a>"),h+='<div class="ui_search_sugg_list_item '+(e?"ui_search_sugg_list_item_history":"")+'" data-value="'+i[3]+'" data-id="'+i[0]+'">'+i[1]+r+"</div>",_++}})),0!=_&&(h+="</div>",n.innerHTML=h,(0,i.show)(n),(0,r.removeEvent)(n,"click"),(0,r.addEvent)(n,"click",function(t){if((0,i.hasClass)(t.target,"ui_search_sugg_list_item_remove")){var e=(0,i.domData)(t.target,"id"),s=(0,i.domData)(t.target,"hash"),o=(0,i.domChildIndex)((0,i.domPN)(t.target));return(0,i.re)((0,i.domPN)(t.target)),this._opts.historyItems.splice(o,1),0==this._opts.historyItems.length&&this._hideSuggestions(),ajax.post("al_search.php",{act:"remove_history_item",hash:s,item_id:e,type:this._opts.type}),!1}if((0,i.hasClass)(t.target,"ui_search_sugg_list_item")){var r=(0,i.domData)(t.target,"value"),a=this._onAcceptSuggestion();this._hideSuggestions(!0),this._opts.onlyShowSuggestions||(this._inputEl.value=r,this._triggerSearch(r,!0,!0,a&&(0,i.domData)(a,"id"))),(0,i.elfocus)(this._inputEl)}}.bind(this)),(0,r.removeEvent)(n,"mousemove"),(0,r.addEvent)(n,"mousemove",(function(t){(0,i.hasClass)(t.target,"ui_search_sugg_list_item")&&((0,i.removeClass)((0,i.geByClass1)("ui_search_suggestion_selected",n),"ui_search_suggestion_selected"),(0,i.addClass)(t.target,"ui_search_suggestion_selected"))})),(0,r.removeEvent)(n,"mouseleave"),(0,r.addEvent)(n,"mouseleave",(function(t){(0,i.removeClass)((0,i.geByClass1)("ui_search_suggestion_selected",n),"ui_search_suggestion_selected")})),this._candidateIsNotAppropriateForUser||e||(this._candidateQuery=t[0][3],this._renderCandidate()||(this._candidateQuery="")),(0,r.addEvent)(window,"mousedown",this._onWindowMouseDown=function(t){(0,i.domClosest)("_wrap",t.target)&&!(0,i.hasClass)(t.target,"_ui_search_params_button")||this._hideSuggestions(!0)}.bind(this)),this._suggestionsShown=!0)}},n.prototype._triggerSearchDelayed=function(t,e,s,i){clearTimeout(this._triggerSearchTO);var o=this._opts.search_trigger_delay||n.SEARCH_TRIGGER_DELAY;this._triggerSearchTO=setTimeout(function(){this._triggerSearch(t,e,s,i)}.bind(this),o)},n.prototype._triggerSearch=function(t,e,s,i){t||(e=""),t=(0,a.trim)(t),!0===e&&(e=t),e=void 0!==e?(0,a.trim)(e):e,(void 0===this._lastTriggeredSearch||this._lastTriggeredSearch||t)&&(this._lastTriggeredSearch&&this._lastTriggeredSearch==t&&(this._lastTriggeredSuggestedSearch&&void 0===e||this._lastTriggeredSuggestedSearch==e)||(this._lastTriggeredSearch=t,this._lastTriggeredSuggestedSearch=e,this._opts.onSearch&&this._opts.onSearch(t,e,s,this._fetchedQuery,i)))},n.prototype.value=function(){return(0,a.trim)(this._inputEl.value)?this._inputEl.value:""},n.prototype._getFirstSuggestion=function(t){return!(!this._suggestions[t]||!this._suggestions[t][0])&&this._suggestions[t][0][3]},n.prototype._onSuggestionsFetched=function(t,e){var s=(0,a.trim)(this.value());s==t&&(this._fetchedQuery=t,this._suggestions[t]=e,this._showSuggestions(e),e.length?this._candidateIsNotAppropriateForUser?this._triggerSearch(s):this._triggerSearch(s,!this._candidateQuery||this._candidateQuery):this._triggerSearch(s,!0))},n.prototype.saveHistoryItem=function(t,e,s,i,o){if(i&&this._opts.history){for(var r=this._opts.historyItems||[],a=0,n=r.length;a<n;a++)if(r[a][1]==t)return;ajax.post("al_search.php",{act:"save_history_item",type:this._opts.type,q:t,object_owner_id:e,object_id:s,total_count:i,total_count_hash:o,hash:this._opts.saveHash},{onDone:function(t){t&&(this._opts.historyItems=t||[])}.bind(this)})}},n.prototype.setOptions=function(t,e){this._opts=e?(0,a.extend)(this._opts,t):(0,a.extend)(t,{})},n.prototype._fetchSuggestions=function(){clearTimeout(this._fetchTO);var t=(0,a.trim)(this.value());t.length<2||((0,a.isFunction)(this._opts.fetchSuggestionsFn)?this._onSuggestionsFetched(t,this._opts.fetchSuggestionsFn(t)):this._fetchTO=setTimeout(function(){this._fetchTimeout=setTimeout(function(){this._fetchTimeout=0,this._onSuggestionsFetched(t,[])}.bind(this),n.FETCH_TIMEOUT),ajax.post("/hints.php",{act:"a_gsearch_hints",q:t,section:this._opts.type},{onDone:function(e){this._fetchTimeout&&(clearTimeout(this._fetchTimeout),this._onSuggestionsFetched(t,e))}.bind(this),cache:1})}.bind(this),n.FETCH_DELAY))};const h=n},157802:(t,e,s)=>{var i=s(112445);window.Suggester=i.default;try{window.stManager.done(window.jsc("web/suggester.js"))}catch(t){}}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var s=o[t]={exports:{}};return i[t].call(s.exports,s,s.exports,r),s.exports}r.m=i,t=[],r.O=(e,s,i,o)=>{if(!s){var a=1/0;for(u=0;u<t.length;u++){for(var[s,i,o]=t[u],n=!0,h=0;h<s.length;h++)(!1&o||a>=o)&&Object.keys(r.O).every((t=>r.O[t](s[h])))?s.splice(h--,1):(n=!1,o<a&&(a=o));if(n){t.splice(u--,1);var _=i();void 0!==_&&(e=_)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,i,o]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},s=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"==typeof t.then)return t}var o=Object.create(null);r.r(o);var a={};e=e||[null,s({}),s([]),s(s)];for(var n=2&i&&t;"object"==typeof n&&!~e.indexOf(n);n=s(n))Object.getOwnPropertyNames(n).forEach((e=>a[e]=()=>t[e]));return a.default=()=>t,r.d(o,a),o},r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={71669:0};r.O.j=e=>0===t[e];var e=(e,s)=>{var i,o,[a,n,h]=s,_=0;for(i in n)r.o(n,i)&&(r.m[i]=n[i]);if(h)var u=h(r);for(e&&e(s);_<a.length;_++)o=a[_],r.o(t,o)&&t[o]&&t[o][0](),t[a[_]]=0;return r.O(u)},s=self.webpackChunkvk=self.webpackChunkvk||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=r.O(void 0,[76429,68592],(()=>r(157802)));a=r.O(a)})();