(()=>{"use strict";var e,t,n,r={508271:(e,t,n)=>{n.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>r,SHOW_TOOLTIP_TIMEOUT:()=>i,REACTION_ID_DEFAULT:()=>o,REACTION_ID_MAX:()=>u,REACTION_ID_MIN:()=>a,REACTION_ID_UNSET:()=>s,REACTION_SET_ITEMS_MIN_COUNT:()=>c,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>l});var r=600,i=140,o=0,u=7,a=0,s=void 0,c=2,l=o},714396:(e,t,n)=>{n.d(t,{reactionCountsBrandUnwrap:()=>i,reactionCountsBrandWrap:()=>o});var r=n(165594),i=function(e){return(0,r.unwrap)(e)},o=function(e){return(0,r.wrap)(e)}},517760:(e,t,n)=>{n.d(t,{isUnknownObject:()=>s,getReaction:()=>c,getDefaultReaction:()=>l,getDefaultReactionTitle:()=>d,prepareReactionMenuSet:()=>_,isReactionIdSet:()=>f,isReactionIdUnset:()=>p,isValidReactionId:()=>g,parseReactionId:()=>b,parseReactionIdOrUnset:()=>m,validateReactionSetPayloaditems:()=>S,parseReactionMenuConfig:()=>I,calcCounters:()=>y,calcCountersSum:()=>E,calcCountersWeightedSum:()=>w,hasReactionsForCounts:()=>O,counterForReactionId:()=>h,areCountersEqual:()=>R});var r=n(570655),i=n(508271),o=n(714396),u=n(659397),a=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},s=function(e){return null!==e&&"object"==typeof e},c=function(e,t){return e.itemsById[t]},l=function(e){return c(e,i.REACTION_ID_DEFAULT)},d=function(e){var t;return null===(t=l(e))||void 0===t?void 0:t.title},v=function(e,t){return 0===e.length?"":(n=e,r=function(e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)},i=!1,void 0===i&&(i=!0),n.reduce((function(e,t){var n=r(t),o=r(e);return o===n?i?e:t:o<n?e:t}))).url;var n,r,i},_=function(e,t,n){var r=t.map((function(e){var t=e.asset,r=e.color_sets,i=e.id,o=e.score,u=e.title;return{animationURL:t.animation_url||void 0,backgroundColor:null==r?void 0:r.background,id:i,imageMenuURL:v(t.images,n.imageMenuSize),imagePreviewURL:"imagePreviewSize"in n?v(t.images,n.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in n?v(t.images,n.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in n?v(t.images,n.imageStoryPreviewSize):void 0,score:o,title:u,titleColor:null==r?void 0:r.foreground}})),i={};return r.forEach((function(e){i[e.id]=e})),{id:e,items:r,itemsById:i}},f=function(e){return e!==i.REACTION_ID_UNSET},p=function(e){return e===i.REACTION_ID_UNSET},g=function(e){return a(e)&&e>=i.REACTION_ID_MIN&&e<=i.REACTION_ID_MAX},b=function(e){var t=parseInt(e,10);return g(t)?{isValid:!0,value:t}:{isValid:!1}},m=function(e){var t=b(e);return t.isValid?t.value:i.REACTION_ID_UNSET},S=function(e,t){if(e.length<i.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error("Invalid reactions items count in set '"+t+"': "+e.length)}},I=function(e){if(s(e)){var t={},n=e.animationShowStaticAfterEnd,r=e.menuShowDelay,o=e.openedDefaultReactionId,u=e.reportJsErrors;return"number"!=typeof r&&void 0!==r||(t.menuShowDelay=r),"boolean"==typeof n&&(t.animationShowStaticAfterEnd=n),"boolean"==typeof u&&(t.reportJsErrors=u),"number"==typeof o||null===o?null===o?t.openedDefaultReactionId=void 0:g(o)&&(t.openedDefaultReactionId=o):t.openedDefaultReactionId=i.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t}},y=function(e,t){var n=(0,o.reactionCountsBrandWrap)({});return Object.entries((0,o.reactionCountsBrandUnwrap)(e)).forEach((function(e){var i,o,u,a=(0,r.__read)(e,2),s=a[0],c=a[1],l=s,d=null!==(u=null===(o=null===(i=null==t?void 0:t.itemsById)||void 0===i?void 0:i[l])||void 0===o?void 0:o.score)&&void 0!==u?u:1;n[l]=d*(c||0)})),n},E=function(e){return Object.values((0,o.reactionCountsBrandUnwrap)(e)).reduce((function(e,t){return e+(t||0)}),0)},w=function(e){return E((0,o.reactionCountsBrandWrap)(e))},O=function(e){return E(e)>0},h=function(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:void 0},R=function(e,t){return e&&t?(0,u.isEqual)(e,t):e===t}},165594:(e,t,n)=>{n.d(t,{unwrap:()=>r,wrap:()=>i});var r=function(e){return e},i=function(e){return e}},992228:(e,t,n)=>{n.d(t,{PostSubscribeSuggest:()=>p});var r=n(570655),i=n(785893),o=n(667294),u=n(86894),a=n(659397),s=n(70162),c=n(738316),l=n(223365),d=n(44610),v=n(465864),_=n(517760),f=n(453580),p=function(e){var t=e.groupId,n=e.avatarUrl,p=e.objectId,g=e.isLast,b=e.ajaxService,m=(0,r.__read)((0,o.useState)(!1),2),S=m[0],I=m[1],y=(0,r.__read)((0,o.useState)(!1),2),E=y[0],w=y[1],O=(0,r.__read)((0,o.useState)(!1),2),h=O[0],R=O[1],T=(0,o.useRef)(null);(0,o.useEffect)((function(){var e;g&&(e=(0,d.getPostElem)(p))&&(T.current=e.querySelector(".PostActivityBar"))}),[]),(0,o.useEffect)((function(){T.current&&T.current.classList.toggle("PostActivityBar--isLast")}),[S]);return(0,c.useReactionsGlobalUpdateEventsForObject)((0,v.likePostObjectId)(p),(function(e){var t=e.reactionIdState,n=e.suggestSubscribe;(0,_.isReactionIdSet)(t.reactionId)&&n&&I(!0)})),(0,l.useSubscribeGlobalUpdateEventsForObject)(t,(function(e){var t=e.isSubscribed;w(t)})),(0,i.jsxs)("div",(0,r.__assign)({className:(0,a.classNames)("PostSubscribeSuggest",{PostSubscribeSuggest__isLast:g,PostSubscribeSuggest__isVisible:S})},{children:[(0,i.jsx)(u.Avatar,{size:24,src:n},void 0),(0,i.jsx)("span",(0,r.__assign)({className:"PostSubscribeSuggest__message"},{children:(0,s.getLang)("groups_post_subscribe_suggest_message")}),void 0),(0,i.jsx)(u.Button,(0,r.__assign)({onClick:E?function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:R(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,b.groupsLeave({group_id:t})];case 2:return n.sent(),(0,f.emitEvent)(f.WallDataEvents.post_subscribe_update,{groupId:t,isSubscribed:!1}),[3,5];case 3:return e=n.sent(),console.log(e),[3,5];case 4:return R(!1),[7];case 5:return[2]}}))}))}:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:R(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,b.groupsJoin({group_id:t})];case 2:return n.sent(),(0,f.emitEvent)(f.WallDataEvents.post_subscribe_update,{groupId:t,isSubscribed:!0}),[3,5];case 3:return e=n.sent(),console.log(e),[3,5];case 4:return R(!1),[7];case 5:return[2]}}))}))},size:"s",sizeY:u.SizeType.COMPACT,appearance:"accent",mode:E?"secondary":"primary",className:"PostSubscribeSuggest__button",loading:h},{children:E?(0,s.getLang)("groups_post_subscribe_suggest_btn_unsubscribe"):(0,s.getLang)("groups_post_subscribe_suggest_btn_subscribe")}),void 0)]}),void 0)}},752084:(e,t,n)=>{n.d(t,{AjaxServiceInstance:()=>i});var r=n(25662),i={groupsJoin:r.Groups.join,groupsLeave:r.Groups.leave}},25662:(e,t,n)=>{n.d(t,{Groups:()=>u});var r=n(570655),i=n(746283),o=n(189798),u={join:function(e){return(0,r.__awaiter)(void 0,void 0,Promise,(function(){return(0,r.__generator)(this,(function(t){return[2,(0,o.api)("groups.join",(0,r.__assign)({},e),{version:i.API_VERSION})]}))}))},leave:function(e){return(0,r.__awaiter)(void 0,void 0,Promise,(function(){return(0,r.__generator)(this,(function(t){return[2,(0,o.api)("groups.leave",(0,r.__assign)({},e),{version:i.API_VERSION})]}))}))},toggle:function(e){var t=e.apiParams,n=e.isMember;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,n?u.leave(t):u.join(t)]}))}))},getById:function(e){var t=e.group_id,n=e.fields;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,u,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t?[4,(0,o.api)("groups.getById",{group_id:a(t),fields:n},{version:i.API_VERSION}).catch((function(e){return console.error(e)}))]:[2,null];case 1:return e=r.sent(),[2,null!==(s=null===(u=null==e?void 0:e.groups)||void 0===u?void 0:u[0])&&void 0!==s?s:null]}}))}))},edit:function(e){return(0,r.__awaiter)(void 0,void 0,Promise,(function(){return(0,r.__generator)(this,(function(t){return[2,(0,o.api)("groups.edit",(0,r.__assign)({},e),{version:i.API_VERSION})]}))}))}};function a(e){return"string"==typeof e?Math.abs(parseInt(e,10)):Math.abs(e)}},247987:(e,t,n)=>{var r=n(570655),i=n(785893),o=n(973935),u=n(992228),a=n(752084),s=n(182804),c=n(997109),l=function(e,t){o.render((0,i.jsx)(u.PostSubscribeSuggest,(0,r.__assign)({},t,{ajaxService:a.AjaxServiceInstance}),void 0),e),e&&(0,c.pushNavDestroy)((function(){return o.unmountComponentAtNode(e)}))};try{window.stManager.done(window.jsc("web/ecomm_feed_post_subscribe_suggest.js")),(0,s.tq)().setStartupHandler("EcommFeedPostSubscribeSuggest/init",(function(e){var t=e.payload,n=t.target,r=t.data;l(n,r)}))}catch(e){}},465864:(e,t,n)=>{n.d(t,{parseLikeObjectId:()=>i,likePostObjectId:()=>o,likeReplyObjectId:()=>u,getElementLikeButtonCount:()=>a,getElementLikeButtonIcon:()=>s,getElementLikeButtonLabel:()=>c});var r=n(570655);function i(e){var t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;var n=(0,r.__read)(t,3);return{objectType:n[1],objectId:n[2]}}var o=function(e){return"wall"+e},u=function(e){return"wall_reply"+e},a=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_count, ._like_button_count"))&&void 0!==t?t:void 0},s=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_icon, ._like_button_icon"))&&void 0!==t?t:void 0},c=function(e){var t;return null!==(t=e.querySelector(".like_button_label, ._like_button_label"))&&void 0!==t?t:void 0}},1925:(e,t,n)=>{n.d(t,{TitleVariantWithLikedUsers:()=>r,TITLE_VARIANT_DEFAULT:()=>i,ReactionMenuTitleVariants:()=>o});var r="WithLikedUsers",i=r,o=[r,"TitleOnly"]},738316:(e,t,n)=>{n.d(t,{useReactionsGlobalStateForObject:()=>c,useReactionsGlobalUpdateEventsForObject:()=>l});var r=n(570655),i=n(667294),o=n(517760),u=n(453580),a=n(465864),s=n(740672);function c(e,t){var n=(void 0===t?{}:t).payloadIsSuitable,u=(0,r.__read)((0,i.useState)(void 0),2),a=u[0],c=u[1],d=(0,s.usePreviousRef)(a),v=(0,i.useCallback)((function(e){var t;n&&!n(e)||e.counts&&!(0,o.areCountersEqual)(e.counts,null!==(t=d.current)&&void 0!==t?t:void 0)&&c(e.counts)}),[e]);return l(e,v),{counts:a}}function l(e,t){!function(e){var t=e.onAnyPostCountsAnyUpdate;(0,i.useEffect)((function(){return(0,u.registerNonGlobalNonUniqueListener)(u.WallDataEvents.post_reactions_counts_update,t)}),[t])}({onAnyPostCountsAnyUpdate:(0,i.useCallback)((function(n){(0,a.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},54789:(e,t,n)=>{n.d(t,{ButtonStyleVariant:()=>r});var r={Post:"post",Reply:"reply"}},740672:(e,t,n)=>{n.d(t,{isValidEnvironment:()=>u,preloadImage:()=>a,usePrevious:()=>s,usePreviousRef:()=>c,isValidButtonTitleVariant:()=>d,isValidButtonStyleVariant:()=>v});var r=n(667294),i=n(1925),o=n(54789),u=function(){var e,t,n;return"function"==typeof(null===(e=window.cur)||void 0===e?void 0:e.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null===(n=null===(t=window.Widgets)||void 0===t?void 0:t.oauth)||void 0===n||n.call(t),!1)},a=function(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.onload=function(){return t()},r.onerror=function(){return n()}}))},s=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e})),t.current},c=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e})),t},l=Object.values(o.ButtonStyleVariant),d=function(e){return i.ReactionMenuTitleVariants.includes(e)},v=function(e){return l.includes(e)}},453580:(e,t,n)=>{n.d(t,{WallDataEvents:()=>u,registerUniqueListener:()=>c,registerNonGlobalNonUniqueListener:()=>l,emitEvent:()=>d});var r=n(570655),i=n(480816),o=n(419223),u={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},a=(0,o.makeSharedState)("wall-data",(function(){return{emitter:new i.default,keyedListeners:Object.create(null)}}),{version:0}),s=function(e,t,n){var i,o,u=a(),s=null===(o=null===(i=u.keyedListeners)||void 0===i?void 0:i[e])||void 0===o?void 0:o[t];return s&&u.emitter.removeListener(e,s),function(e,t,n){var i,o=a();return o.emitter.addListener(e,n),o.keyedListeners[e]=(0,r.__assign)((0,r.__assign)({},o.keyedListeners[e]),((i={})[t]=n,i)),function(){var r,i;o.emitter.removeListener(e,n),(null===(r=o.keyedListeners[e])||void 0===r?void 0:r[t])===n&&(null===(i=o.keyedListeners[e])||void 0===i||delete i[t])}}(e,t,n)},c=function(e,t,n){return s(t,e,n)},l=function(e,t){return function(e,t){var n=a();return n.emitter.addListener(e,t),function(){n.emitter.removeListener(e,t)}}(e,t)},d=function(e,t){a().emitter.emit(e,t)}},223365:(e,t,n)=>{n.d(t,{useSubscribeGlobalUpdateEventsForObject:()=>o});var r=n(667294),i=n(453580),o=function(e,t){var n=(0,r.useCallback)((function(n){n.groupId===e&&t(n)}),[e]);(0,r.useEffect)((function(){return(0,i.registerNonGlobalNonUniqueListener)(i.WallDataEvents.post_subscribe_update,n)}),[n])}},44610:(e,t,n)=>{n.d(t,{getPostElem:()=>r,replyUserImageLinkClosest:()=>i,replyUserImageImg:()=>o});var r=function(e,t){var n,r;return null!==(r=null!==(n=function(e){var t;if("string"==typeof e)return null!==(t=document.querySelector("#post"+e))&&void 0!==t?t:void 0}(e))&&void 0!==n?n:null==t?void 0:t.closest("._post, .wl_post"))&&void 0!==r?r:void 0},i=function(e){var t;return null!==(t=e.closest(".reply_image, ._reply_image"))&&void 0!==t?t:void 0},o=function(e){var t;return null!==(t=e.querySelector("img.reply_img"))&&void 0!==t?t:void 0}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e].call(n.exports,n,n.exports,o),n.exports}o.m=r,e=[],o.O=(t,n,r,i)=>{if(!n){var u=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],a=!0,s=0;s<n.length;s++)(!1&i||u>=i)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(a=!1,i<u&&(u=i));if(a){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);o.r(i);var u={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>u[t]=()=>e[t]));return u.default=()=>e,o.d(i,u),i},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.e=()=>Promise.resolve(),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={67147:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[u,a,s]=n,c=0;for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(s)var l=s(o);for(t&&t(n);c<u.length;c++)i=u[c],o.o(e,i)&&e[i]&&e[i][0](),e[u[c]]=0;return o.O(l)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var u=o.O(void 0,[76429,75514,56990,68592],(()=>o(247987)));u=o.O(u)})();