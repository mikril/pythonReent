(()=>{"use strict";var __webpack_modules__={304319:(e,t,o)=>{o.d(t,{default:()=>i});const i=(0,o(28178).makeIcon)("Icon16Verified","verified_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="verified_16"><path fill="currentColor" d="M4.5 9.586 2.957 8.043a1 1 0 0 0-1.414 1.414l2.25 2.25a1 1 0 0 0 1.414 0l5.25-5.25a1 1 0 0 0-1.414-1.414L4.5 9.586Z" /></symbol>',16,16,!1,void 0)},352422:(e,t,o)=>{o.d(t,{memoizeFirstTruthy:()=>i});o(66992),o(333948);var i=e=>((e,t)=>{var o,i=!1;return function(){return!0===i||(o=e(...arguments),i=t(o)),o}})(e,(e=>!!e))},214168:(e,t,o)=>{o.d(t,{Feed:()=>te});o(892222),o(226699),o(682772),o(66992),o(747042),o(702707),o(140561),o(319601),o(241539),o(788674),o(132023),o(804723),o(115306),o(864765),o(323123),o(454747),o(333948),o(560285);var i=o(555030),n=o(506770),r=o(819086),s=o(840060),a=o(23778),c=o(489017),l=o(343474),d=o(70162),u=o(769488),_=o(549357),h=o(101178),p=o(274642),f=o(501389),g=o(828430),v=o(152278),m=o(927766),w=o(660080),y=o(873589),k=o(461905),b=o(822560),C=o(897449),E=o(146143),S=o(290846),T=o(315882),L=o(342269),P=o(16850),I=o(42479),B=o(173801),A=o(507794),R=o(709987),O=o(124041),x=o(368752),N=o(733164),D=o(712739),M=o(329979),H=o(175382),F=o(905998),j=o(41189),U=o(326325),V=o(761635),q=o(283536),G=o(652745),W=o(749140),z=o(377782),Y=o(909456),Q=o(348230),K=o(287503),Z=o(936115),$=o(725161),X=o(596195),J=o(844142);function ee(){return ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},ee.apply(this,arguments)}var te={sectionUpdateExceptions:["search","notifications","photos_search","mentions","articles","articles_search","likes","recommended","live","topics"],blockHideReason:function e(t,o){if(e.progress)return!1;e.progress=!0;var i="block_"+t,n=(0,y.ge)(i);delete cur.feedEntriesHTML[i],ajax.post("al_feed.php",{act:"a_block_hide_reason",block_id:t,reason:0|o,hash:(0,y.attr)(n,"data-hash"),ref:te.getModuleRef(),pos:(0,y.attr)(n,"data-pos")},{onDone:function(t){e.progress=!1,t?(0,y.val)(n,t):(0,y.hide)(n)},hideProgress:function(){e.progress=!1}})},blockRestore:function(e){var t="block_"+e,o=(0,y.ge)(t);cur.feedEntriesHTML[t]&&(0,y.val)(t,cur.feedEntriesHTML[t]),ajax.post("al_feed.php",{act:"a_block_restore",block_id:e,hash:(0,y.attr)(o,"data-hash"),ref:te.getModuleRef(),pos:(0,y.attr)(o,"data-pos")})},blockHide:function(e,t){if(!(0,C.actionsMenuItemLocked)(t)){(0,C.lockActionsMenuItem)(t);var o="block_"+e,i=(0,y.ge)(o),n=(0,y.geByClass1)("ui_actions_menu_wrap",i);ajax.post("al_feed.php",{act:"a_block_hide",block_id:e,hash:(0,y.attr)(i,"data-hash"),ref:te.getModuleRef(),pos:(0,y.attr)(i,"data-pos")},{onDone:function(e){uiActionsMenu.toggle(n,!1),cur.feedEntriesHTML[o]=(0,y.val)(i),(0,y.val)(i,e)},hideProgress:C.unlockActionsMenuItem.pbind(t)})}},videoRecomsBlockHideCancel:function(){ajax.post("/al_feed.php",{act:"a_video_recom_hide_cancel"}),te.restorePost("video_recoms")},videoRecomsBlockHideReason:function(e,t){(0,y.re)((0,y.geByClass1)("feed_rb_video_reason_wrap")),(0,y.show)((0,y.geByClass1)("feed_rb_video_reason_thankyou")),ajax.post("/al_feed.php",{act:"a_video_recom_hide_reason",reason:t,reason_hash:e})},expandVideosPost:function(e,t){var o=(0,y.geByClass1)("page_post_sized_thumbs",(0,y.domPN)(t)),i=0;(0,L.each)(o.children,(function(){if(!(0,y.isVisible)(this)&&((0,y.show)(this),++i>5))return!1})),(0,y.toggle)(t,!(0,y.isVisible)(o.children[o.children.length-1]))},update:function(e){if(!cur.feedUpdateLoading&&!(window.Notifier&&cur.add_queues&&cur.add_queues.length&&(cur.add_queues.forEach((function(e){Notifier.addKey(e,te.updated)})),"news"!=cur.section)||"feed"!==cur.module||"top"==cur.subsection||(0,L.inArray)(cur.section,te.sectionUpdateExceptions)||cur.isDisabledFeedAutoupdate)){var t=Math.random();if(!("news"!=cur.section&&"comments"!=cur.section&&t>.3||"news"==cur.section&&(e||t>.05))){cur.feedUpdateLoading=!0;var o=te.getSectionParams(cur.section);(0,L.extend)(o,cur.navParams),ajax.post("al_feed.php?au_"+cur.section,(0,L.extend)(o,{timestamp:cur.timestamp,posted:e?1:"",queue:cur.add_feed_queue?1:0}),{onDone:function(t,o,i){if(cur.feedUpdateLoading=!1,1!=e||o&&-1!=o.indexOf(vk.id+"")){if(!("feed"!==cur.module||t.section!=cur.section||t.timestamp<cur.timestamp||i<cur.timestamp)){(0,T.statlogsValueEvent)("feed_check_update",!!o),t.count+=cur.count;var n,r,s,a,c=cur.rowsCont,l=(0,y.ce)("div"),u=0;if("news"==cur.section){if(a=(0,m.scrollGetY)(),o){for(l.innerHTML=o;l.lastChild;)n=l.lastChild,c.insertBefore(n,c.firstChild),te.onPostLoaded(n,!0);(0,L.each)((0,y.geByClass)("ts"+i,c),(function(e,t){u+=this.offsetHeight;var o=null==t||null==t.querySelector?void 0:t.querySelector(".post");o&&(0,M.highlightUpdatedPost)(o),cur.feedUnreadCount++}))}u&&a>100&&(0,m.scrollToY)(a+u,0,!1,!0)}else if(o)for(l.innerHTML=o;n=l.lastChild;)if("DIV"==n.tagName)if("podcasts_recommended_block"!==n.id)if((s=n.firstChild.id.substr(4))&&cur.wallLayer==s)l.removeChild(n);else if(r=(0,y.ge)("post"+s)){var _=function(){if(!(0,y.hasClass)(r.parentNode,"feed_row"))return{v:void 0};var e=(0,y.ge)("replies"+s),t=e.nextSibling,o=0;if((0,L.each)([].slice.call((0,y.geByClass)("reply",n,"div")),(function(){(0,y.ge)(this.id)||((0,y.addClass)(this,"new_reply"),e.appendChild(this),o++)})),o){var i=r.parentNode.offsetHeight,a=(0,y.geByClass)("new_reply",e,"div").length;t&&"replies_open"==t.className||(t=(0,y.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(s),role:"button",tabIndex:0}),e.parentNode.insertBefore(t,e.nextSibling)),t.innerHTML=(0,d.getLang)("wall_x_new_replies_more",Math.min(100,a)),t.newCnt=a;var u=(0,m.scrollGetY)(),_=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,h=(0,y.getXY)(t)[1],p=r.parentNode.offsetHeight;i=p-i,(0,L.inArray)(s,cur.feedUnread)||cur.feedUnread.unshift(s),!cur.idleManager.isIdle&&h>u+100&&h<u+_+100?(c.insertBefore((0,y.ge)("post_ph"+s)||(0,y.ce)("div",{id:"post_ph"+s}),c.firstChild),(0,L.inArray)(s,cur.feedToSort)||cur.feedToSort.push(s)):((0,y.re)(r.parentNode),c.insertBefore(r.parentNode,c.firstChild),h>u+_+100&&(i=p),i&&(0,m.scrollToY)((0,m.scrollGetY)()+i,0,!1,!0)),cur.feedUnreadCount+=o}l.removeChild(n)}();if("object"==typeof _)return _.v}else a=(0,m.scrollGetY)(),c.insertBefore(n,c.firstChild),te.onPostLoaded(n,!0),u=n.offsetHeight,a>100&&(0,m.scrollToY)(a+u,0,!1,!0);else l.removeChild(n);else l.removeChild(n);te.applyOptions(t),te.updateTitle()}}else setTimeout(te.update.pbind(2),2e3)},onFail:function(){return cur.feedUpdateLoading=!1,!1},showProgress:function(){cur.feedUpdateLoading=!0},hideProgress:function(){cur.feedUpdateLoading=!1}})}}},getNewQKey:function(e){var t={act:"a_get_key",only_update:cur.add_feed_queue?1:0,need_ignore:(0,N.isArray)(cur.ignore_owners)?0:1},o={onDone:function(o,n,r){if(cur.section!=i)return;if(cur.add_feed_queue=r,o)cur.add_queues=o,setTimeout(te.update.pbind(0),0);else if(!t.only_update){var s=n;return void(cur.timestamp=(s||(0,N.vkNow)()/1e3)-e)}(0,N.isArray)(n)&&(cur.ignore_owners=n)},local:1},i=cur.section;ajax.post("al_feed.php",ee({},te.getSectionParams(cur.section),{},t,{queue:1}),o)},updated:function(e,t){cur.queueTO=cur.queueTO||(0,N.irand)(0,5e3),setTimeout(te.handleQueueEvent.pbind(e,t),cur.queueTO)},handleQueueEvent:function(e,t){if(("search"==cur.section||"news"==cur.section||!cur.section)&&(0,N.isArray)(cur.add_queues)){var o=cur.add_queues.find((t=>(0,P.subscriptionObjectStableId)(t)===e));if(o){if(t.failed){cur.add_queues=!1,cur.add_feed_queue=null;var i=curNotifier.error_timeout||1;return clearTimeout(cur.lp_error_to),void(cur.lp_error_to=setTimeout(te.getNewQKey.bind(te).pbind(i),1e3*i))}if((0,N.isArray)(t.events)&&t.events.length){o.ts=t.ts,t.key&&(o.key=t.key);var n=(0,m.scrollGetY)(),r=0;(0,L.each)(t.events,(function(){if((0,N.isObject)(this))return Wall.processQueueEvent(this);r+=te.pushEvent(this.split("<!>"),n+(0,y.getSize)("page_header_cont")[1])}));var s=(0,m.scrollGetY)();r&&Math.abs(n-s)<100&&(cur.leftMenuDelta=r,(0,m.scrollToY)(s+r,0,!1,!0)),te.updateTitle(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()}}}},needScrollPost:function(e,t){return e+80>(0,y.getXY)(t)[1]||cur.storyLayer||window.mvcur&&mvcur.mvShown||window.pvcur&&cur.pvShown},pushEvent:function(e,t){var o=e[0],i=e[1],n=e[2],s=(0,y.ge)("post"+n),a=cur.section,c="search"!=a?(0,L.intval)(e.pop()):0,u=0,_=function(e){return(0,L.intval)((0,y.getStyle)((0,y.domByClass)(e,"page_block"),"marginTop"))||(0,L.intval)((0,y.getStyle)((0,y.domByClass)((0,y.domNS)(e),"page_block"),"marginTop"))||15};if(!cur.options||o!=cur.options.qversion)return 0;switch((Wall.isArchiveWall()?"archive_post"===i:"reveal_post"===i)&&(i="res_post"),(Wall.isArchiveWall()?"reveal_post"===i:"archive_post"===i)&&(i="del_post"),i){case"new_post":if(s)break;var h=K.GroupAdminLevel.USER;if((0,L.intval)(e[11])&&(0,L.intval)(e[11])!=vk.id)return ajax.post("al_feed.php",{act:"a_need_own_reply",oid:(0,L.intval)(e[11])},{onDone:function(o){o&&(e[11]=0,te.pushEvent(e,t))}}),0;if("search"!=a){var p=n.split("_")[0];e[8]=(0,L.intval)(e[8])>0&&4==(4&c)?"1":"0",J.Ranges.isGroupId(p)&&(h=8&c?K.GroupAdminLevel.EDITOR:2&c?K.GroupAdminLevel.MODERATOR:K.GroupAdminLevel.USER)}"search"==a&&(0,T.statlogsValueEvent)("feed_switch",0,"search_update",cur.options.q&&"#"==cur.options.q.charAt(0)?"hashtag":"");var f=cur.rowsCont,g=f.childNodes,v=Wall.getNewPostHTML(e,h,te.feedPostRepl);if(!v)break;var m,w,k,b,C,E,S=e[12],P="search"!=a&&(window._wf<=0||(0,y.hasClass)(cur.feedEls.wrap,"feed_has_new")||te.needScrollPost(t,f)),I=cur.storyLayer;I&&(P=!0);var B=!1,R=v;if(P&&(v=Wall.updatePostImages(v)),S){if(cur.ignore_owners.length&&(0,L.inArray)((0,L.intval)(S),cur.ignore_owners))break;if(w=(0,y.geByClass1)("feed_reposts_wrap"+S,f,"div"))k=(0,y.geByClass1)("feed_reposts_first",w,"div").firstChild,b=(0,y.geByClass1)("feed_reposts_group",w,"div"),C=(0,y.geByClass1)("feed_reposts_more_link",w),te.needScrollPost(t,k)&&(u-=k.offsetHeight+_(k)),k.parentNode.replaceChild(m=(0,y.se)(R),k),b.insertBefore(k,b.firstChild),(0,y.isVisible)(b)||O.FlatButton.setLabel(C,(0,d.getLang)("news_show_X_reposts",b.childNodes.length)),w=w.parentNode,f.firstChild!=w&&f.insertBefore(w,f.firstChild),te.needScrollPost(t,w)&&(u+=w.offsetHeight+_(w)),w.bits=0;else if((E=(0,y.geByClass)("feed_repost"+S,f,"div"))&&E.length){v=(0,y.rs)(cur.wallTpl.grouped_posts,{place:S,random:(0,N.irand)(1e8,2e8),first:v,other:"",label:(0,d.getLang)("news_show_X_reposts",E.length)});var x=(0,y.se)('<div class="feed_row'+(P?"_unshown":"")+'">'+v+"</div>");f.insertBefore(x,f.firstChild),!P&&te.needScrollPost(t,x)&&(u+=x.offsetHeight+_(x)),B=!0,w=x.firstChild,m=(0,y.geByClass1)("feed_reposts_first",w,"div"),b=(0,y.geByClass1)("feed_reposts_group",w,"div"),(0,L.each)((0,L.clone)(E),(function(){te.needScrollPost(t,this)&&(u-=this.offsetHeight+_(this)),(0,y.re)(this.parentNode),b.appendChild(this.firstChild)}))}else m=(0,y.se)('<div class="feed_row'+(P?"_unshown":"")+'"><div class="feed_repost'+S+'">'+v+"</div></div>"),f.insertBefore(m,f.firstChild),B=!0,!P&&te.needScrollPost(t,m)&&(u+=m.offsetHeight+_(m))}else m=(0,y.se)('<div class="feed_row'+(P?"_unshown":"")+'">'+v+"</div>"),f.insertBefore(m,f.firstChild),B=!0,!P&&te.needScrollPost(t,m)&&(u+=m.offsetHeight+_(m));var D=(0,y.geByClass1)("post",m);0==e[8]&&(0,y.addClass)(D,"closed_comments"),cur.deepRepliesActive&&(0,y.addClass)(D,"deep_active"),P&&B&&(cur.newPostsCount=cur.newPostsCount?cur.newPostsCount+1:1,cur.feedEls.newPosts.innerHTML=(0,d.getLang)("news_new_posts",cur.newPostsCount),(0,y.addClass)(cur.feedEls.wrap,"feed_has_new"),1==cur.newPostsCount&&te.needScrollPost(t,cur.feedEls.newPosts)&&!I&&(u+=(0,y.getSize)(cur.feedEls.newPosts)[1])),r.AudioUtils.updateQueueReceivedPost(m),(0,G.updateNarrativeSnippetsFromQueueByPost)(m),(0,W.updateArticleSnippetsFromQueueByPost)(m),cur.feedUnreadCount++,"search"!=a&&D&&(0,M.highlightUpdatedPost)(D),g.length>300?f.removeChild(g[300]):g.length<=1&&(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty"),Wall.updateMentionsIndex();break;case"new_post_reply":if(s)break;var F=cur.rowsCont,j=F.childNodes,U=Wall.getNewPostHTML(e,!1,te.feedPostRepl);if(!U)break;var V=(0,y.se)('<div class="feed_row">'+U+"</div>");F.insertBefore(V,F.firstChild),te.needScrollPost(t,V)&&(u+=V.offsetHeight+_(V)),(0,G.updateNarrativeSnippetsFromQueueByPost)(V),(0,W.updateArticleSnippetsFromQueueByPost)(V),(0,Q.updateStickersFromQueue)(V),cur.feedUnreadCount++,j.length>300?F.removeChild(j[300]):j.length<=1&&(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty");break;case"edit_post":var q,z=(0,y.ge)("wpt"+n);if(!(0,y.isVisible)(s)||!z)break;var Y=(0,y.geByClass1)("wall_post_more",z);Y&&(Y=(0,y.isVisible)((0,y.domNS)(Y))),(q=te.needScrollPost(t,z))&&(u-=z.offsetHeight);var Z=(0,y.rs)(e[3],{poll_hash:cur.wallTpl.poll_hash}),$=(0,y.ge)("post"+n);$&&!(0,y.isVisible)($.parentNode)&&(Z=Wall.updatePostImages(Z)),(0,y.val)(z,Z),Y&&(Y=(0,y.geByClass1)("wall_post_more",z))&&Y.onclick(),q&&(u+=z.offsetHeight),(0,G.updateNarrativeSnippetsFromQueueByPost)(z),(0,W.updateArticleSnippetsFromQueueByPost)(z),(0,M.highlightUpdatedPostContent)(z),window.Wall&&Wall.updatePostAuthorData(n);break;case"edit_reply":var X=e[3],oe=(0,y.ge)("wpt"+X);if(!(0,y.isVisible)("post"+X)||!oe)break;var ie=(0,y.geByClass1)("wall_reply_more",oe);ie&&(ie=(0,y.isVisible)((0,y.domNS)(ie)));var ne=e[4];(0,y.val)(oe,ne),ie&&(ie=(0,y.geByClass1)("wall_reply_more",oe))&&ie.onclick(),(0,G.updateNarrativeSnippetsFromQueueByPost)(oe),(0,W.updateArticleSnippetsFromQueueByPost)(oe),(0,Q.updateStickersFromQueue)(oe),(0,H.highlightUpdatedReplyContent)(oe);break;case"post_parsed_link":if(!s)break;var re=(0,y.geByClass1)("wall_postlink_preview_btn_disabled",s);if(!re)break;var se=e[3];if("1"===se)(0,y.removeClass)(re,"wall_postlink_preview_btn_disabled");else if("0"===se)(0,y.re)(re);else if(se){(0,y.removeClass)(re,"wall_postlink_preview_btn_disabled");var ae=(0,y.geByClass1)("flat_button",re);ae&&(ae.setAttribute("href",e[3]),ae.removeAttribute("onclick"))}break;case"del_post":if(s){var ce=(0,y.domClosest)("feed_row",s)||(0,y.domClosest)("feed_row_unshown",s)||s;cur.wallMyDeleted[n]||(te.needScrollPost(t,s)&&(u-=s.offsetHeight+_(s)),(0,l.revertLastInlineVideo)(s),(0,y.re)(ce)),cur.options.offset--,(0,y.hasClass)(cur.feedEls.wrap,"feed_has_new")&&!(0,y.isVisible)(ce)&&(cur.newPostsCount--,cur.newPostsCount?cur.feedEls.newPosts.innerHTML=(0,d.getLang)("news_new_posts",cur.newPostsCount):(0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"))}break;case"res_post":s&&cur.options.offset++;break;case"new_reply":if(!s||cur.wallMyReplied[n]||(0,y.ge)("post"+e[3]))break;if((0,y.hasClass)((0,y.ge)("post"+n),"deep_active")){var le=Wall.addNewReply(e);u+=le[0];break}var de=(0,y.ge)("replies"+n),ue=(0,y.ge)("replies_wrap"+n),_e=s.offsetHeight,he=n.split("_")[0],pe=J.Ranges.isGroupId(he)?8&c?K.GroupAdminLevel.EDITOR:2&c?K.GroupAdminLevel.MODERATOR:K.GroupAdminLevel.USER:K.GroupAdminLevel.USER,fe=Wall.getNewReplyHTML(e,pe);if(!fe)break;var ge,ve=!1,me=!1;if((0,y.isVisible)(de)&&(0,y.isVisible)(ue)&&!(0,y.isVisible)("reply_link"+n)){ge=de.nextSibling;var we=(0,y.geByClass)("new_reply",de,"div").length+1;if(cur.wallMyOpened[n]){ge&&"replies_open"==ge.className&&(0,y.re)(ge),me=!0;var ye=(0,y.geByClass1)("wr_header",de,"a"),ke=(0,y.geByClass)("reply",de,"div").length+1,be=ke;ye&&(be=(0,L.intval)(ye.getAttribute("offs").split("/")[1])+1),(be>5||ke<be)&&(ye||de.insertBefore(ye=(0,y.ce)("a",{className:"wr_header"}),de.firstChild),Wall.updateRepliesHeader(n,ye,ke,be))}else fe=Wall.updatePostImages(fe),ve=(0,y.se)(fe),(0,y.addClass)(ve,"new_reply"),ge&&"replies_open"==ge.className||(ge=(0,y.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(n),role:"button",tabIndex:0}),de.parentNode.insertBefore(ge,de.nextSibling)),ge.innerHTML=(0,d.getLang)("wall_x_new_replies_more",Math.min(100,we)),ge.newCnt=we}else(0,y.re)("reply_link"+n),(0,y.show)(ue,de),me=!0;n.split("_")[0]==vk.id&&cur.feedUnreadCount++,ve||(ve=(0,y.se)(fe)),de.appendChild(ve),te.needScrollPost(t,me?ve:ge)&&(u+=s.offsetHeight-_e),ve instanceof HTMLElement&&((0,G.updateNarrativeSnippetsFromQueueByPost)(ve),(0,W.updateArticleSnippetsFromQueueByPost)(ve),(0,Q.updateStickersFromQueue)(ve)),me&&(0,H.highlightUpdatedReply)(ve),Wall.repliesSideSetup(n),Wall.updateMentionsIndex(),Likes.update("wall"+n,{comment_num:e[13]});break;case"del_reply":if(!cur.wallMyDeleted[n]&&s){if((0,y.hasClass)((0,y.gpeByClass)("post",s),"deep_active")){var Ce=Wall.removeDeepReply(e);u+=Ce[0];break}te.needScrollPost(t,s)&&(u-=s.offsetHeight);var Ee=s.parentNode.id.match(/replies(-?\d+_\d+)/);(0,l.revertLastInlineVideo)(s),(0,y.re)(s),Ee&&Wall.repliesSideSetup(Ee[1])}break;case"view_post":Likes.update("wall"+n,{views_num:Wall.formatCount((0,L.intval)(e[3]))});break;case"like_post":case"like_reply":if(!s)break;var Se="like_reply"==i?"wall_reply"+n:n,Te=s&&(0,y.domByClass)(s,"_like_wrap"),Le=s&&(0,y.domByClass)(s,"_share_wrap"),Pe=(0,A.likeDataReactionsFields)(e);Wall.likeFullUpdate(Te,Se,ee({isQueueUpdate:!0,like_my:Te&&(0,y.hasClass)(Te,"my_like"),like_num:e[3],like_title:!1,share_my:Le&&(0,y.hasClass)(Le,"my_share"),share_num:e[4],share_title:!1},Pe))}return u},feedPostRepl:function(e,t){e.replies=cur.wallTpl.post_replies;var o={full_id:t[2],item_id:"wall_"+t[2],sec_name:(0,N.stripHTML)(t[3]),date:Wall.getNowRelTime(),del:cur.wallTpl.spam};if("search"==cur.section&&cur.q){var i,n,r,s=e.text||"",a=cur.q.toLowerCase().split(/[\s.,:;!?()]/),c=[],l=(s=s.replace(/<(.|\n)+?>/g,(function(e){return c.push(e),""}))).toLowerCase();for(i=a.length-1;i>=0;i--)if(r=a[i],(0,L.trim)(r))for(n=0;-1!=(n=l.indexOf(r,n));)s.charAt(n-1)!=String.fromCharCode(2)?(s=s.substr(0,n)+""+i+""+s.substr(n+r.length),l=l.substr(0,n)+""+i+""+l.substr(n+r.length)):n+=2;s=s.replace(/\x02(\d+)\x02/g,(function(e,t){return'<span class="highlight">'+a[t]+"</span>"})),s=s.replace(/\x01/g,(function(){return c.shift()||""})),o.text=s,"new_post_reply"==t[1]&&(o.date_postfix=t[7])}return o},reSortItems:function(){cur.feedToSort&&cur.feedToSort.length&&((0,L.each)(cur.feedToSort,(function(e,t){var o=(0,y.ge)("post_ph"+t),i=(0,y.ge)("post"+t).parentNode;o&&i&&(o.parentNode.insertBefore(i,o),(0,y.re)(o))})),cur.feedToSort=[],(0,m.scrollToY)(0,0))},showNewPosts:function(){(0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0;var e=(0,y.ge)("feed_rows");Wall.loadPostImages(e),(0,L.each)((0,y.geByClass)("feed_row_unshown",e,"div"),(function(){(0,y.replaceClass)(this,"feed_row_unshown","feed_row")}))},updateTitle:function(){cur.idleManager&&(cur.idleManager.isIdle||(cur.feedUnreadCount=0),(0,y.setDocumentTitle)((cur.feedUnreadCount?"("+cur.feedUnreadCount+") ":"")+cur.feedInitialTitle))},toggleTabsMenuTab:function(e,t){var o=(0,y.geByClass1)("feed_section_"+e,cur.feedEls.rmenu);o&&(0,y.toggleClass)(o,"ui_rmenu_item_hidden",!t)},toggleTabsMenu:function(e,t){var o=(0,y.ge)("feed_add_list_icon");return void 0===t&&(t=!(0,y.hasClass)(o,"shown")),s.browser.mozilla&&(0,y.setStyle)("page_body",{overflow:t?"visible":""}),uiActionsMenu.toggle(o,t),t&&(0,v.addEvent)(document,"mousedown",(function e(t){te.toggleTabsMenu(!1,0),(0,v.removeEvent)(document,"mousedown",e)})),e&&(0,v.cancelEvent)(e)},checkTabsFilter:function(e,t){var o,i,n,r=t==cur.section,s=cur.my_feed_types.tabs;switch(t){case"news":return!1;case"newlist":return te.addList();default:if(n=t.match(/list(\d+)/))return te.editList(n[1])}o=-1!=(i=(0,L.indexOf)(s,t)),(0,y.toggleClass)(e,"checked",!o),o?(s.splice(i,1),r&&(cur.onSaveTabs=function(e,t){te.toggleTabsMenu(null,!1),te.switchSection("news")}.pbind(t,o))):s.push(t),cur.my_feed_types.tabs=s,te.toggleTabsMenuTab(t,!o||r),clearTimeout(cur.saveTabsTO),cur.saveTabsTO=setTimeout(te.saveTabs,500)},hasSearchParams:function(e){var t=!1;return(0,L.each)(e,(function(e,o){if((!e.indexOf("c[")&&"c[section]"!==e||"q"==e)&&o)return t=!0,!1})),t},getSectionParams:function(e){var t={section:e};switch(e){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"podcasts":case"articles":void 0===(t.subsection=cur.subsections[e])&&delete t.subsection;break;case"owner":(t.owner=cur.owner)||delete t.section;break;case"source":case"notifications":(t.source=cur.source)||delete t.source;break;case"list":void 0===(t.subsection=cur.subsections["list"+cur.list])&&delete t.subsection,(t.list=cur.list)||delete t.list;break;case"search":var o=(0,y.ge)("search_filters_form");if(o){var i=(0,L.serializeForm)(o)||{};for(var n in i)i[n]&&"0"!=i[n]||delete i[n];(0,L.extend)(t,i)}t["c[q]"]=(0,L.trim)((0,y.val)(cur.feedEls.search));break;case"photos_search":(t.q=(0,L.trim)((0,y.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,L.intval)(cur.search_sort_value))||delete t.sort;break;case"trends_search":window.nav.objLoc.trend_id&&(t.trend_id=window.nav.objLoc.trend_id),(t.q=(0,L.trim)((0,y.val)(cur.feedEls.search)))||delete t.section,(t.sort=(0,L.intval)(cur.search_sort_value))||delete t.sort;break;case"articles_search":(t.q=(0,L.trim)((0,y.val)(cur.feedEls.search)))||(t.section="articles");break;case"comments":cur.reposts&&(t.reposts=cur.reposts);break;case"mentions":var r=new URLSearchParams(location.search);r.delete("ref"),history.replaceState(null,"","?"+r+location.hash),cur.mentionObj&&cur.mentionObj!=vk.id&&(t.obj=cur.mentionObj)}return t},switchNotifyList:function(e,t){uiRightMenu.go((0,y.geByClass1)("feed_section_"+e),!1,!1),te.go(t)},switchSubSection:function(e,t,o){if(t&&(0,v.checkEvent)(t))return!0;var i=cur.section;"list"===cur.section&&(i="list"+cur.list),cur.subsection=cur.subsections[i]=e;var n=te.getSectionParams(cur.section);n.hash=o,delete cur.feedUpdateLoading,delete cur.isFeedLoading,nav.go((0,L.extend)(n||{},{0:"feed"})),uiRightMenu.showProgress(cur.feedEls.rmenu)},switchSection:function(e,t,o){if(t&&(0,v.checkEvent)(t))return!0;if((0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,"photos_search"==e&&!(0,L.trim)((0,y.val)(cur.feedEls.search))){if("photos_search"!=cur.section)return!1;e="photos"}"comments"==e&&(cur.reposts=cur.options.reposts=""),(0,T.statlogsValueEvent)("feed_switch",0,e),te.setSection(e,1);var i=te.getSectionParams(e||"news");delete cur.feedUpdateLoading,delete cur.isFeedLoading;var n=!o&&(0,L.extend)(i||{},{0:"feed"});return uiRightMenu.go((0,y.geByClass1)("feed_section_"+e),!1,n),!1},setSection:function(e,t,o){if(t=t||0,cur.prevSection=cur.section,!(e==cur.section&&t<2)&&e){if(uiRightMenu.hideProgress(cur.feedEls.rmenu),cur.feedEls.search&&uiSearch.hideProgress(cur.feedEls.search),t>1){Page.playVkFestBanner&&Page.playVkFestBanner(),(0,y.toggleClass)(cur.feedEls.wrap,"feed_submit_shown",(0,L.inArray)(e,cur.options.feed_types.tabs.concat(["list","likes"]))),(0,y.toggleClass)(cur.feedEls.wrap,"feed_submit_only_shown",~["recommended","search","updates","comments"].indexOf(e));var i=(0,L.inArray)(e,["articles_search","articles","search","photos_search","photos","trends","trends_search"]);(0,y.toggleClass)(cur.feedEls.wrap,"feed_search_shown",i),i&&(0,y.elfocus)(cur.feedEls.search),"search"===e&&o.stories_block_show?(0,y.addClass)(cur.feedEls.wrap,"feed_submit_shown_stories"):(0,y.removeClass)(cur.feedEls.wrap,"feed_submit_shown_stories"),cur.section&&(0,y.val)(cur.feedEls.search,"")}2==t&&window.Stories&&Stories.updateFeedStories(e,o),cur.my_feed_types&&(~(0,L.indexOf)(cur.my_feed_types.optional_tabs,cur.section)&&!~(0,L.indexOf)(cur.my_feed_types.tabs,cur.section)&&te.toggleTabsMenuTab(cur.section,!1),~(0,L.indexOf)(cur.my_feed_types.optional_tabs,e)&&!~(0,L.indexOf)(cur.my_feed_types.tabs,e)&&te.toggleTabsMenuTab(e,!0)),cur.section=e,4!=t?(cur.editingHide=("notifications"==e||"replies"==e)&&te.notifyCheckHideReply,cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler()):te.searchUpdate()}},applyOptions:function(e,t){t=t||0,e.no_left_ads&&(cur.no_left_ads=!0),e.owner&&(cur.owner=e.owner),cur.subsection=e.subsection||"",te.setSection(e.section,t,e),cur.options||(cur.options={reply_names:{}}),(0,L.extend)(cur.options.reply_names,e.reply_names),delete e.reply_names,(0,L.extend)(cur,e);var o=cur.section;if("list"===cur.section&&(o="list"+e.list),cur.subsections[o]=cur.subsection,e.loc&&2==t&&nav.setLoc(e.loc),e.section&&"news"==e.section&&e.subsection&&"top"==e.subsection&&(0,T.statlogsValueEvent)("feed_switch",0,"top_news",t),void 0!==e.filters){var i=(0,y.ge)("search_filters_minimized"),n=i&&(0,y.hasClass)(i,"ui_rmenu_item_expanded"),r=!!i;(0,y.val)("feed_filters",e.filters),window.searcher&&r&&R.searcher.toggleMinimizedFilters((0,y.ge)("search_filters_minimized"),n,!0)}if(e.script&&(0,k.evalWithLogging)(e.script),e.htitle&&(cur.feedInitialTitle=document.title=(0,N.replaceEntities)((0,N.stripHTML)(e.htitle))),void 0!==e.add_feed_queue&&null!==e.add_feed_queue?(cur.add_feed_queue=!1,e.add_feed_queue=!1,te.getNewQKey(0),!0!==e.add_queue&&(cur.add_queue=e.add_queue)&&setTimeout(te.update.pbind(0),0)):t&&"search"!=cur.section&&"news"!=cur.section&&cur.section&&(cur.add_feed_queue=!1,e.add_feed_queue=!1),e.add_queues&&(cur.add_queues=e.add_queues,setTimeout(te.update.pbind(0),0)),e.q){(0,y.val)(cur.feedEls.search,(0,N.replaceEntities)(e.q));var a=e.q;a.length>30&&(a=(0,L.trim)(a.substr(0,30))+"...")}e.last_view&&(cur.options.last_view=e.last_view),void 0!==e.feedback_list&&(cur.options.feedback_list=e.feedback_list),te.searchUpdate(),"comments"!=cur.section||cur.reposts||(0,y.toggle)("comments_filters",!cur.reposts),(0,N.isString)(cur.all_shown_text)&&(0,y.val)("all_shown",cur.all_shown_text),(0,N.isString)(cur.show_more_text)&&(0,y.val)("show_more_link",cur.show_more_text),cur.empty_text&&(0,y.val)("feed_empty",cur.empty_text),cur.count>=0&&(0,y.re)("feed_error_wrap");var c=!((0,y.geByClass1)("feed_row",cur.rowsCont,"div")||!1),l=(0,y.ge)("feed_rows_next");if(c?((0,y.toggleClass)(cur.feedEls.wrap,"feed_is_empty",!(0,y.isVisible)("feed_error_wrap")),(0,y.hide)("all_shown"),(0,y.toggle)("show_more_link",cur.count>0&&!cur.all_shown)):!cur.all_shown||l&&l.firstChild?((0,y.hide)("all_shown"),(0,y.show)("show_more_link"),(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty")):((0,y.hide)("show_more_link"),(0,y.show)("all_shown"),(0,y.removeClass)(cur.feedEls.wrap,"feed_is_empty"),(0,y.re)(l)),e.playlistsData&&(e.playlistsData=JSON.parse(e.playlistsData),cur.pageVideosList=(0,L.extend)(cur.pageVideosList||{},e.playlistsData)),("notifications"==cur.section||"replies"==cur.section)&&cur.notify){var d=(0,y.ge)("feedback_row"+cur.notify);d&&d.onclick&&(setTimeout((function(){d.onclick(),(0,m.scrollToY)((0,y.getXY)(d)[1],0)}),s.browser.msie?100:0),delete cur.notify)}cur.feedSection&&cur.feedSection(e.section,e.subsection)},showMore:function(){if(!cur.isFeedLoading){cur.disableAutoMore=!1;var e,t=(0,y.ge)("feed_rows_next");if(t){if(t.firstChild)for(;t.firstChild;)e=t.firstChild,cur.rowsCont.insertBefore(e,t),te.onPostLoaded(e,!0);(0,y.re)(t)}"live"==cur.section&&(cur.all_shown=!0);var o=(0,y.ge)("show_more_link");if(cur.all_shown&&((0,y.hide)(o),(0,y.show)("all_shown")),"live"!=cur.section){var i=!1,r=function(e){e.keyCode==v.KEY.ESC&&(i=!0)};(0,v.addEvent)(document,"keyup",r);var s=te.getSectionParams(cur.section||"news");(0,L.extend)(s,{offset:cur.offset,from:cur.from,part:1,more:1,last_view:cur.options.last_view,games_news_items_allowed:cur.isGamesInRightBlock?0:1}),(0,L.extend)(s,cur.navParams),cur.options.feedback_list&&(s.list=cur.options.feedback_list),nav.objLoc.situational_suggest_id&&(s.situational_suggest_id=nav.objLoc.situational_suggest_id);var a=cur.section;ajax.post("al_feed.php?sm_"+cur.section,s,{onDone:function(e,t){if((0,v.removeEvent)(document,"keyup",r),a==cur.section)if(i)cur.disableAutoMore=!0;else{if(t){var o,s=(0,y.ce)("div");for(s.innerHTML=t;o=s.firstElementChild;){var l,d=(0,Y.shouldFilterPaginatedRow)({row:o});if(d.shouldFilter)console.info("Feed: skipping loaded row",o),s.removeChild(o),(0,n.randEnabled)(null!=(l=window.cur.feed_pagination_filtering_log_prob)?l:.01)&&(0,z.feedLogFilteredRow)({filterReason:d.filterReason,ref:te.getModuleRef(),row:o,rowsContainer:cur.rowsCont,section:cur.section});else cur.rowsCont.appendChild(o),te.onPostLoaded(o,!0)}}(0,c.shortCurrency)(),te.applyOptions(e),setTimeout(te.scrollCheck,200)}},showProgress:function(){(0,C.lockButton)(o),cur.isFeedLoading=!0},hideProgress:function(){if((0,C.unlockButton)(o),cur.isFeedLoading=!1,o.seen){var e=Math.ceil((Date.now()-o.seen)/1e3),t=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,T.statlogsValueEvent)("feed_load_more_seen_time",e,t),o.seen=!1}},cache:1})}}},getTypesSection:function(){return"owner"===cur.section?J.Ranges.isUserId(cur.owner)?"person":"group":cur.section},checkFilter:function(e,t){var o,i=te.getTypesSection(),n=cur.my_feed_types[i],r=cur.feed_types[i];"notifications"!=i?(!0===n&&(n=(0,L.clone)(r)),-1!=(o=(0,L.indexOf)(n,t))?n.splice(o,1):(n.push(t),n.length==r.length&&(n=!0)),(0,C.checkbox)(e),cur.my_feed_types[i]=n,te.updateTypesCookie(),te.setFiltersUpdatePage(),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)):te.setNotifyFilter(e,t)},setFilter:function(e,t){var o=te.getTypesSection(),i=(0,y.ge)(o+"_type_filter"),n=!0;"notifications"!=o&&((0,L.each)((0,y.geByClass)("_feed_filter_row",i,"div"),(function(){if((0,C.isChecked)(this)&&this!=e)return n=!1})),n?(cur.my_feed_types[o]=!0,(0,L.each)((0,y.geByClass)("_feed_filter_row",i,"div"),(function(){(0,C.checkbox)(this,!0)}))):((0,L.each)((0,y.geByClass)("_feed_filter_row",i,"div"),(function(){(0,C.checkbox)(this,!1)})),cur.my_feed_types[o]=[t],(0,C.checkbox)(e,!0)),te.updateTypesCookie(),te.setFiltersUpdatePage({force_expand_filters:1}),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu))},setFiltersUpdatePage:function(e){e=e||{};var t=nav.strLoc;if("updates"===cur.section){t.match(/\&filters\_expanded\=1/)||(0,y.ge)("updates_show_all_filters")&&!e.force_expand_filters||(t+="&filters_expanded=1"),t=t.replace(/\&filters\_shown\=([a-z\,]+)/,"");for(var o=(0,y.geByClass)("_feed_filter_row","feed_filters"),i=[],n=0;n<o.length;n++)(0,y.hasClass)(o[n],"hide")||i.push(o[n].id.replace("filter_updates",""));t+="&filters_shown="+i.join(",")}nav.go(t)},setNotifyFilter:function(e,t){(0,C.checkbox)(e),cur.notifyPrefs||(cur.notifyPrefs={}),cur.notifyPrefs[t]=(0,C.isChecked)(e),clearTimeout(cur.saveNotifyPrefsTO),cur.saveNotifyPrefsTO=setTimeout((function(){var e=[];(0,L.each)(cur.notifyPrefs,(function(t,o){e.push((o?"":"-")+t)})),e=e.join(","),ajax.post("/al_feed.php",{act:"a_set_notify_prefs",prefs:e,feed:1,hash:cur.topNotifyHash},{onDone:function(e){(0,L.addTemplates)({top_notify_prefs:e}),(0,y.toggleClass)("top_notify_pref_"+t,"checked",cur.notifyPrefs[t]),cur.notifyPrefs={},window.TopNotifier&&TopNotifier.invalidate(),nav.go(nav.strLoc),cur.feedEls.rmenu&&uiRightMenu.showProgress(cur.feedEls.rmenu)}})}),500)},updateTypesCookie:function(){var e=[];(0,L.each)(cur.my_feed_types,(function(t,o){"tabs"!=t&&e.push(!0===o?"*":o.join(","))})),(0,g.setCookie)("remixfeed",e.join("."),365)},toggleFeedTop:function(e,t,o){var i=(0,y.geByClass1)("_ui_toggler",e),n="top";switch((0,y.toggleClass)(i,"on"),cur.section){case"news":case"recommended":case"groups":case"friends":case"videos":case"photos":case"list":n=(0,y.hasClass)(i,"on")?"top":"recent";break;case"articles":n=(0,y.hasClass)(i,"on")?"suggested":"top";break;case"podcasts":n=(0,y.hasClass)(i,"on")?"recent":"top"}te.switchSubSection(n,t,o)},switchList:function(e){cur.prevList=cur.list,cur.list=e,te.setSection("list",1),uiRightMenu.go((0,y.geByClass1)("feed_section_list"+e),!1,!1),te.go(te.getSectionParams(cur.section))},setSearchSort:function(e){cur.search_sort_value=e,te.submitSearch()},_activateReplyBox:function(e,t,o){(t||{}).cancelBubble=!0;var i=(0,y.ge)("reply_box"+e);if(cur.editing&&cur.editing!=e&&cur.notifyReplyData&&cur.notifyReplyData[cur.editing].disabled&&te.notifyCheckHideReply(cur.editing,(window.event||{}).target),i&&(0,y.isVisible)(i))te.notifyCheckHideReply(e,!1);else if(void 0===cur.notifyReplyData&&(cur.notifyReplyData={}),cur.notifyReplyData[e]=o,o.disabled){i?(0,y.show)(i):(0,y.ge)("feedback_row"+e).appendChild((0,y.se)((0,y.rs)(cur.options.feedback_dis,{item:e,text:o.disabled}))),setTimeout((function(){cur.editing=e}),0)}else{(0,y.show)(i),Wall.showEditReply(e,t);var n=(0,y.ge)("reply_field"+e);n.setAttribute("placeholder",o.ph),window.Emoji&&Emoji.val(n,o.greet.replace(/ $/,"&nbsp;")),(0,y.data)(n,"send",te.notifySendReply),(0,y.removeClass)("reply_box"+e,"clear_fix")}},notifyClick:function(e,t,o){var i=(0,y.ge)("feedback_row"+e);Wall.checkPostClick(i,t)&&te._activateReplyBox(e,t,o)},blindNotifyReply:function(e,t,o){te._activateReplyBox(e,t,o)},notifySendReply:function(e,t,o){var i=cur.notifyReplyData[e];if(i&&!i.sending){var n,r=(0,y.ge)("reply_field"+e),s=(0,y.ge)("reply_button"+e),a=(0,y.ge)("feedback_row"+e),c=r&&(0,y.data)(r,"composer");if(o.stickerId)n={message:"",attach1_type:"sticker",attach1:o.stickerId};else{if((n=c?Composer.getSendParams(c,te.notifySendReply.pbind(e)):{message:(0,L.trim)(Emoji.editableVal(r))}).delayed)return;if(!n.attach1_type&&(!n.message||i.greet&&!i.greet.indexOf(n.message)))return void Emoji.editableFocus(r,!1,!0)}(0,L.extend)(n,{act:"post",from:"feedback",item:e},i.params||{});var l=(0,y.ge)("reply_as_group"+e);l&&(0,y.isVisible)((0,y.domPN)(l))&&(n.from_oid=(0,y.domData)((0,y.domClosest)("_submit_post_box",l),"from-oid")),i.sending=1,ajax.post("al_wall.php",Wall.fixPostParams(n),{onDone:function(t,o){if(delete i.sending,c?Composer.reset(c):window.Emoji&&Emoji.val(r,""),r.autosize&&r.autosize.update(),te.notifyHideReply(e),o){var n=(0,y.geByClass1)("_answer_wrap",a);(0,y.val)(n,o),(0,y.show)(n)}else t&&(0,f.showDoneBox)(t)},onFail:function(){delete i.sending},showProgress:()=>(0,C.lockButton)(s),hideProgress:()=>(0,C.unlockButton)(s)})}},notifyCheckHideReply:function(e,t){var o=cur.notifyReplyData&&cur.notifyReplyData[e];if(o&&!o.sending&&(0,y.isVisible)("reply_box"+e)){if(cur.editing=!1,!o.disabled){var i=(0,y.ge)("reply_field"+e),n=(0,L.trim)(window.Emoji?Emoji.editableVal(i):""),r=Wall.hasComposerMedia(i);if(!i||r||n&&!o.greet||o.greet.indexOf(n))return}te.notifyHideReply(e)}},notifyHideReply:function(e){cur.editing==e&&(cur.editing=!1);var t=(0,y.ge)("feedback_row"+e);(0,y.removeClass)(t,"reply_box_open"),(0,y.hide)("reply_box"+e);var o=cur.replySubmitSettings;o&&o.tt&&o.tt.el&&o.tt.destroy()},notifyPostTooltip:function(e,t,o,i){var n=(o||{}).reply,r="al_wall.php";t.indexOf("topic_comment")?t=t.replace("wall_reply","").replace("wall",""):(r="al_board.php",t=t.replace("topic_comment","")),i=i||{},(0,S.showTooltip)(e,(0,L.extend)({url:r,params:(0,L.extend)({act:"post_tt",post:t,self:1,from:"feedback"},o||{}),slide:15,shift:[!n||n%2?27:329,6],ajaxdt:100,showdt:400,hidedt:800,dir:"auto",className:"rich wall_tt wall_module _feed_notification feed_notification",appendParentCls:"scroll_fix_wrap"},i))},getModuleRef:function(){var e=cur.module||"feed_other";return"feed"==cur.module&&(e="news"==cur.section?cur.subsection?"feed_news_"+cur.subsection:"feed_news":"podcasts"===cur.section?e+"_"+cur.section+("recent"===cur.subsection?"_my":""):cur.section?e+"_"+cur.section:"feed_other"),e},ignoreItem:function(e,t,o,i,n,r,s,a){var c;switch(void 0===r&&(r=0),void 0===s&&(s=""),void 0===a&&(a=!0),e){case j.BlockTypeIds.UXPollBlock:case j.BlockTypeIds.VideosForYou:case j.BlockTypeIds.VideoPostcard:case j.BlockTypeIds.PhotoRecognize:case j.BlockTypeIds.RecommendedNarratives:case j.BlockTypeIds.BookmarkGame:case j.BlockTypeIds.AchievementGame:case j.BlockTypeIds.YoulaRecommendationsCarousel:case j.BlockTypeIds.AliExpressRecommendationsCarousel:c=(0,y.ge)(e);break;default:c=(0,y.ge)("post"+e)}if(c){var d=c.getAttribute("data-ad"),u=(0,y.geByClass1)("ui_actions_menu_wrap",c),_=te.getModuleRef();return u&&uiActionsMenu.toggle(u,!1),(0,l.revertLastInlineVideo)(c),a&&(t.includes("caption")?cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)(c):cur.feedEntriesHTML[e]=(0,y.val)(c)),new Promise(((l,u)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:e,feed_raw:t,caption_type:i,uids:n,hash:o,ad_data:d,ref:_,session_id:cur.feed_session_id,module:te.getModuleRef(),position:(0,L.indexOf)((0,y.domPN)((0,y.domPN)(c)).children,(0,y.domPN)(c)),reason_id:r,track_code:s},{onDone:function(e,t){te.destroyPhotoCarouselByPost(c),a&&((0,y.val)(c,e),(0,k.evalWithLogging)(t)),l()},onFail:()=>(u(),!0),stat:[window.jsc("web/privacy.js"),"privacy.css"]})}))}},unignoreItem:function(e,t,o,i){var n=te.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_item",post_raw:e,feed_raw:t,hash:o,ref:n},{onDone:function(){t.includes("caption")?(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):te.restorePost(e)},showProgress:i&&C.lockButton.pbind(i),hideProgress:i&&C.unlockButton.pbind(i)})},reportIgnoredItem:function(e,t){ajax.post("al_wall.php",{act:"spam",post:e,hash:t},{onDone:function(t){var o=(0,y.ge)("post"+e),i=o&&(0,y.geByClass1)("feed_post_report",o,"div");(0,y.val)(i,t)}})},ignoreOwner:function(e,t,o,i,n){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)("post"+e));var r="list"==cur.section&&cur.list||0,s=te.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,type:o,hash:i,list:r,ref:s},{onDone:function(o){(0,y.val)("post"+e,o),(0,L.each)((0,y.geByClass)("post",cur.rowsCont),(function(o,i){var n=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);n&&n[1]!=e&&(!n[4]&&n[2]==t||n[4]&&n[3]==t)&&((0,l.revertLastInlineVideo)(this),(0,y.hide)(this.parentNode))}))},showProgress:()=>O.FlatButton.lock(n),hideProgress:()=>O.FlatButton.unlock(n)})},unignoreOwner:function(e,t,o,i){var n="list"==cur.section&&cur.list||0,r=te.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,hash:o,list:n,ref:r},{onDone:function(o){e?(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,y.val)("ignore_row"+t,o),(0,L.each)((0,y.geByClass)("post",cur.rowsCont),(function(e,o){var i=this.id.match(/post((-?\d+)_(-?\d+)(_\d+)?)/);i&&(!i[4]&&i[2]==t||i[4]&&i[3]==t)&&(0,y.show)(this.parentNode)}))},showProgress:()=>O.FlatButton.lock(i),hideProgress:()=>O.FlatButton.unlock(i)})},ignoreGroupWall:function(e,t,o,i){e&&(cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)("post"+e));var n=te.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,ignore_type:"group_wall",hash:o,ref:n},{onDone:function(t){(0,y.val)("post"+e,t)},showProgress:()=>O.FlatButton.lock(i),hideProgress:()=>O.FlatButton.unlock(i)})},unignoreGroupWall:function(e,t,o,i){var n=te.getModuleRef();ajax.post("/al_feed.php?misc",{act:"a_unignore_owner",post_raw:e||"",owner_id:t,ignore_type:"group_wall",hash:o,ref:n},{onDone:function(o){e?(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"]):(0,y.val)("ignore_row"+t,o)},showProgress:()=>O.FlatButton.lock(i),hideProgress:()=>O.FlatButton.unlock(i)})},ignoreLiveOwner:function(e,t,o,i){var n=(0,y.ge)("post"+e),r=(0,y.geByClass1)("ui_actions_menu_wrap",n);r&&uiActionsMenu.toggle(r,!1),(0,l.revertLastInlineVideo)(n),cur.feedEntriesHTML[e+"_ignored"]=(0,y.val)("post"+e),ajax.post("al_feed.php?act=a_ignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,y.val)("post"+e,t)},showProgress:i&&C.lockButton.pbind(i),hideProgress:i&&C.unlockButton.pbind(i)})},unignoreLiveOwner:function(e,t,o,i){ajax.post("al_feed.php?act=a_unignore_live_owner",{post_raw:e,owner_id:t,hash:o},{onDone:function(t){(0,y.val)("post"+e,cur.feedEntriesHTML[e+"_ignored"])},showProgress:i&&C.lockButton.pbind(i),hideProgress:i&&C.unlockButton.pbind(i)})},unsubscribe:function(e,t,o){(0,v.triggerEvent)((0,y.ge)("post_delete"+e),"mouseout"),cur.feedEntriesHTML[e]=(0,y.ge)("post"+e).innerHTML;var i=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);i&&ajax.post("al_feed.php",{act:"unsubscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[i[2]],owner_id:i[1],place_id:i[3],hash:t,feed:1},{onDone:function(t){(0,y.ge)("post"+e).innerHTML=t.replace("%post_raw%",e)},showProgress:o&&C.lockButton.pbind(o),hideProgress:o&&C.unlockButton.pbind(o)})},subscribe:function(e,t,o){var i=e.match(/(\-?\d+)_(photo|video|shortVideo|topic|note|market|)(\d+)/);i&&ajax.post("al_feed.php",{act:"subscribe",type:{"":24,photo:21,video:22,shortVideo:26,topic:20,note:23,market:25}[i[2]],owner_id:i[1],place_id:i[3],hash:t,feed:1},{onDone:te.restorePost.pbind(e),showProgress:o&&C.lockButton.pbind(o),hideProgress:o&&C.unlockButton.pbind(o)})},restorePost:function(e){var t;if(e===j.BlockTypeIds.PhotoRecognize)t=(0,y.ge)(e);else t=(0,y.ge)("post"+e);if(t){t.innerHTML=cur.feedEntriesHTML[e],te.initPhotoCarouselInPost(t);var o=(0,y.geByClass1)("input_back",t,"div"),i=(0,y.geByTag1)("textarea",t);i&&(i.placeholder=o.innerHTML,o.parentNode.removeChild(o),(0,b.placeholderSetup)(i))}},toggleReposts:function(e,t,o,i){if((0,v.checkEvent)(i))return!0;var n=(0,y.ge)("feed_reposts_more"+t+"_"+o),r=(0,y.ge)("feed_reposts"+t+"_"+o),s=0,a=(0,m.scrollGetY)(),c=(0,y.isVisible)(r);if(r)return c?s-=r.offsetHeight+(0,L.intval)((0,y.getStyle)(e,"marginTop")):((0,y.domPN)((0,y.domPN)(r))||{}).bits=0,(0,y.toggle)(r,!c),O.FlatButton.setLabel(n,c?(0,d.getLang)("news_show_X_reposts",r.childNodes.length):(0,d.getLang)("news_hide_reposts")),s&&(0,m.scrollToY)(a+s+(0,y.getSize)("page_header")[1],0),!1;n&&(0,y.re)(n.parentNode.parentNode)},editHidden:function(){return(0,E.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")]}),cur.onOListSave=te.onHiddenSave,!1},onHiddenSave:function(e,t,o,i){var n=(0,f.curBox)(),r={act:"a_ignore_olist",no_reposts:(0,y.ge)("feed_list_reposts")&&!(0,C.isChecked)("feed_list_reposts")?1:0,hash:i.hash};return e.length<t.length?r.White=e.join(","):r.Black=t.join(","),ajax.post("al_feed.php",r,{onDone:function(e,t){n.hide(),te.switchSection("photos"==cur.section?"photos":"news")},showProgress:C.lockButton.pbind(n.btns.ok[0]),hideProgress:C.unlockButton.pbind(n.btns.ok[0])}),!1},addList:function(){return te.editList(-1)},editList:function(e){return te.toggleTabsMenu(!1,0),(0,E.showTabbedBox)("al_settings.php",{act:"a_edit_owners_list",list:"feed",list_id:e,height:lastWindowHeight},{stat:["ui_controls.js","ui_controls.css",window.jsc("web/indexer.js")],onFail:function(e){return setTimeout((0,E.showFastBox)({title:(0,d.getLang)("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},e,(0,d.getLang)("global_close")).hide,4500),!0}}),cur.onOListSave=te.onListSave.pbind(e),!1},onListSave:function(e,t,o,i,n){var r=(0,y.val)("feed_list_name");if(!(0,L.trim)(r))return(0,C.notaBene)("feed_list_name"),!1;if(!t.length)return!1;var s=(0,f.curBox)();return ajax.post("al_feed.php",{act:"a_save_list",hash:cur.tabs_hash,White:t.join(","),title:r,list_id:e,no_reposts:(0,y.ge)("feed_list_reposts")&&!(0,C.isChecked)("feed_list_reposts")?1:0},{onDone:function(t){var o=(0,y.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu),i=(0,y.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu),n=uiRightMenu.selectLabelNode(o);(0,y.val)(n,(0,L.clean)(r)),(0,y.val)((0,y.geByClass1)("ui_actions_menu_item_label",i),(0,L.clean)(r)),s.hide(),e>0?te.switchList(e):nav.go({0:"feed",section:"list",list:t},null,{nocur:!0})},onFail:function(e){return(0,y.val)("feed_list_error",e),(0,y.show)("feed_list_error_wrap"),!0},showProgress:C.lockButton.pbind(s.btns.ok[0]),hideProgress:C.unlockButton.pbind(s.btns.ok[0])}),!1},deleteList:function(e,t,o,i){if(i&&(0,v.cancelEvent)(i),e<=0)return!1;if(o){var n=(0,f.curBox)();ajax.post("al_feed.php",(0,L.extend)({act:"a_delete_list",list_id:e,hash:cur.tabs_hash}),{onDone:function(){(0,y.re)((0,y.geByClass1)("feed_section_list"+e,cur.feedEls.rmenu)),(0,y.re)((0,y.geByClass1)("feed_filter_list"+e,cur.feedEls.rmenu)),boxQueue.hideAll(),"list"==cur.section&&cur.list==e&&te.switchSection("news")},showProgress:C.lockButton.pbind(n.btns.ok[0]),hideProgress:C.unlockButton.pbind(n.btns.ok[0])})}else{te.toggleTabsMenu(!1,0);var r=(0,E.showFastBox)({title:(0,d.getLang)("news_delete_list_sure_title"),bodyStyle:"padding: 20px; line-height: 160%;"},(0,d.getLang)("news_delete_list_sure").replace("{list}",t),(0,d.getLang)("global_delete"),(function(){te.deleteList(e,t,!0)}),(0,d.getLang)("global_cancel"),(function(){r.hide()}))}},saveTabs:function(){ajax.post("al_feed.php",{act:"a_save_tabs",hash:cur.tabs_hash,tabs:cur.my_feed_types.tabs.join(",")},{hideProgress:function(){(0,N.isFunction)(cur.onSaveTabs)&&cur.onSaveTabs(),cur.onSaveTabs=null}})},statsShow:function(e,t){return(0,p.showWiki)({w:"stats"+(cur.source||"")},!1,e)},editLiveBlacklist:function(e){(0,v.cancelEvent)(e),(0,E.showBox)("al_video.php?act=live_blacklist_box",{},{onDone:function(e,t){D.default.init(e,t)},stat:["videoview.js","videoview.css",window.jsc("web/indexer.js")]})},scrollCheck:(0,x.debounce)((function(e){if("scroll"==(e=e||{}).type||cur.idleManager&&!cur.idleManager.isIdle){var t,o,i,n,r,s,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=(0,m.scrollGetY)(),l=0,d=[];if(!cur.isFeedLoading&&!cur.disableAutoMore){var u=(0,y.ge)("show_more_link");(0,y.isVisible)(u)&&c+a+1e3>u.offsetTop&&te.showMore()}if((0,y.domPN)(cur.topRow)==cur.rowsCont&&"feed_rows_next"!=(cur.topRow||{}).id||(cur.topRow=(0,y.domFC)(cur.rowsCont)),vk.id&&cur.topRow&&"feed_rows_next"!=cur.topRow.id&&(!((window.curNotifier||{}).idle_manager||{}).is_idle||"init"==e.type)){var _=[];for(n=(0,y.domPS)(cur.topRow);n;n=(0,y.domPS)(n))cur.topRow.offsetTop>c&&(cur.topRow=n),n.unseen||(n.unseen=!0,_.push((0,F.postsGetRaws)(n)),(0,F.isAdWithShowOff)(n)&&Wall.triggerAdStat((0,y.domFC)(n),"show_off"));for(Page.postsUnseen(_),n=cur.topRow;n&&!((t=l||n.offsetTop)>=c+a);n=r)if("feed_rows_next"==((r=(0,y.domNS)(n))||{}).id&&(r=null),(l=r?r.offsetTop:t+n.offsetHeight)<c&&r&&(cur.topRow=r),LongView&&LongView.register(n,"feed"),U.longView.registerElement(n),!((s=n.bits||0)>=3)){var h;if(cur.feedSeenPostHeight>0)cur.feedPostHeaderHeight=cur.feedPostHeaderHeight||(0,y.getH)(null==(h=n)||null==h.querySelector?void 0:h.querySelector(".post_header, .js-PostHeader")),i=(o=t+cur.feedPostHeaderHeight)+cur.feedSeenPostHeight,n.postBottom||(n.postBottom=o+(0,y.getH)((0,y.geByClass1)("wall_text",n))),s|=(o>=c&&o<c+a?1:0)|((i=Math.min(i,n.postBottom))>=c&&i<c+a?2:0);else s|=(t>=c&&t<c+a?1:0)|(l>=c&&l<c+a?2:0);if(s&&(n.bits=s,3==s)){var p,f=(0,F.postsGetRaws)(n);if((0,F.isAdWithLongImpressionOnly)(n)||(0,F.isAutoplayAd)(n)?Wall.triggerAdStat((0,y.domFC)(n),"impression"):d.push(f),(0,y.geByClass1)("VideosForYouGallery",n))null==(p=window.FeedVideosForYou)||p.viewBlock();else if((0,y.geByClass1)("FeedVideoPostcard",n)){var g;null==(g=window.FeedVideoPostcard)||g.viewBlock()}else if(n.querySelector(".UxpollsBlock")){var v=n.querySelector(".UxpollsBlock").dataset.trackCode;(0,$.viewUXPollsBlock)(v)}else(0,y.geByClass1)("feed_friends_recomm",n)?function(){var e=(0,y.geByClass1)(w.UI_GALLERY_CLASSNAME,n),t=(0,y.domData)(e,"from"),o=(0,y.domData)(e,"code")||"";(0,I.friendsRecommLogSave)(["view_block",t,f.index,(0,N.vkNow)(),f.module,o],!0);var i=(0,w.uiGetGallery)(e);i&&i.getVisibleItems().forEach((function(e){(0,I.onViewFriendRecomm)(e[0],e[1],t)})),e.visible=!0}():(0,y.geByClass1)("js-feed_groups_recomm",n)?(0,B.feedInitialViewRecommendedGroupsTrigger)(n):n.querySelector("#feed_mini_apps_recomm")&&window.RecommendedMiniApps.viewBlock()}}d=d.concat(U.longView.process(c,a)),LongView&&LongView.onScroll(c,a),Page.postsSeen(d);var k=(0,y.ge)("show_more_link"),b=k.offsetTop;if(!k.seen&&b>=c&&b<c+a){k.seen=Date.now();var E=cur.section+(cur.subsection?"_"+cur.subsection:"");(0,T.statlogsValueEvent)("feed_load_more_seen",(0,C.isButtonLocked)(k),E)}}}}),20),searchUpdate:function(){var e;cur.feedEls.search&&(0,d.getLang)("news_search")&&(e=cur.section.indexOf("photos")?cur.section.indexOf("articles")?(0,d.getLang)("news_search"):(0,d.getLang)("news_articles_search"):(0,d.getLang)("news_photo_search"),cur.feedEls.search.setAttribute("placeholder",(0,L.clean)((0,N.unclean)(e))),(0,b.placeholderInit)(cur.feedEls.search,{reload:!0}))},go:function(e,t,o){if(e=e||{},cur._back_local){var n=cur._back_local;n.back?(0,h.showBackLink)(n.back[0],n.back[1],n.back[2]):(0,h.showBackLink)(!1),cur._back_local=!1}if(cur.feedReq)try{cur.feedReq.abort()}catch(C){(0,u.debugLog)(C)}cur.feedReqObj=null;var r=1,a=function(){cur.isFeedLoading=!1};(s.browser.msie||o)&&(r=!1,a=cur.onFrameBlocksDone),cur.wasScroll=!!o&&(0,m.scrollGetY)();var d=window.event&&window.event.target;if(d&&"search"===e.section&&!e._post){var p=nav.getPostParams(d);if(p.post_id&&p.post_click_type){function E(t,o){t&&!e[o]&&(e[o]=t)}E(p.post_id,"_post"),E(p.post_click_type,"_post_click_type"),E(p.post_click_url,"_post_click_url"),E(p.post_click_mention_id,"_post_click_mention_id"),E(p.post_click_cc_key,"_post_click_cc_key"),E(p.ad_data,"_post_ad_data"),E(p.ad_block_unique_id,"_post_ad_block_unique_id")}}var f=cur.feedReqObj={},g={},v=0,w=()=>{if(cur.feedReqObj&&cur.feedReqObj===f&&!(++v>500)){var e=!0,t={};(0,L.each)(g,(function(o){var i=(0,y.ge)(o);if(i&&(0,y.hasClass)(i,"feed_row"))return i.firstChild?void te.onPostLoaded(i,!0):(t[o]=!0,void(e=!1))})),e||(g=t,setTimeout(w,100))}},b=+new Date;cur.feedReq=ajax.post("al_feed.php",(0,L.extend)(e,{part:1}),{onDone:function(o,n,s,a,d){if(cur.feedEls){if((0,l.revertLastInlineVideo)(),(0,y.removeClass)(cur.feedEls.wrap,"feed_has_new"),cur.newPostsCount=0,window.tooltips&&tooltips.destroyAll((0,y.ge)("feed_rows")),boxQueue.hideAll(),layers.fullhide&&!cur.storyLayer&&layers.fullhide(!0),r&&ajax._framenext(),window.wall&&Wall.cancelEdit(),boxQueue.hideAll(),t?t(n||""):(0,y.val)(cur.rowsCont,n||""),te.applyOptions(o,2),!e.norecom&&"notifications"!==e.section){(0,y.val)("feed_recommends",o.recommends||""),(0,y.toggle)("feed_recommends",!!o.recommends);var u="/al_feed.php#"+(0,i.toQueryString)({act:"recom"});ajaxCache[u]&&delete ajaxCache[u],(0,y.toggleClass)(cur.feedEls.wrap,"feed_asc_shown",(0,y.geByClass1)("feed_asc_block","feed_recommends"))}var h;if(s&&(0,k.evalWithLogging)(s),(0,_.checkPageBlocks)(),(0,m.scrollToTop)(0),(0,c.shortCurrency)(),cur.feedEls.wall)switch(h="clear_fix",cur.section){case"updates":h+=" page_block feed_updates";break;case"photos_search":h+=" page_block feed_found_photos";break;case"notifications":h+=" page_block feed_notifications";break;case"coronavirus":case"stayhome":h+=" feed_wall--with-header"}if((0,y.ge)("feed_wall").className=h,(0,y.toggle)("feed_recommends",(0,L.inArray)(cur.section,["news","recommended","videos"])),(0,y.val)("feed_app_widget",a||""),(0,y.toggle)("feed_app_widget",a),a&&d&&(0,k.evalWithLogging)(d),cur.rowsCont&&cur.rowsCont.children&&((0,L.each)(cur.rowsCont.children,(function(){var e=this;(0,y.hasClass)(e,"feed_row")&&(!e.id||e.firstChild?te.onPostLoaded(e,!0):g[e.id]=!0)})),(0,N.isEmpty)(g)||setTimeout(w,10)),cur.q){var p="photos_search"===cur.section?T.servicePhotos:T.serviceNews,f=+new Date-b;(0,T.saveSearchAttemptStats)(p,0,cur.count,(0,y.val)(cur.feedEls.search),0,0,f,"",T.blockNameEmpty,"",!1,0,null,cur.sort),(0,q.updateCounters)(location.href,document.referrer)}setTimeout(te.scrollCheck,200)}},onFail:function(){return!1},showProgress:function(){cur.isFeedLoading=!0},frame:r,ads:1,hideProgress:a})},onFeedSearch:function(e,t,o,i){t||(0,T.removeSearchPositionTracker)("photos");var n,r,s=i||cur.section;if(s.indexOf("photos")?s.indexOf("trends")?s.indexOf("articles")?(n="search",r="news"):(n="articles_search",r="articles"):(n="trends_search",r="trends"):(n="photos_search",r="photos"),"search"==n||te.hasSearchParams(te.getSectionParams(n))){n!=cur.section&&te.setSection(n,1);var a=te.getSectionParams(n);cur.disableSort&&(a.disable_sort=1),te.go(a),window.searcher&&R.searcher.highlightHotHashtag(t||(0,y.val)(e))}else te.go(te.getSectionParams(r));uiSearch.onChanged(e),uiSearch.showProgress(e)},onSearchChange:function(){return setTimeout(te.onFeedSearch.pbind(cur.feedEls.search),0),!1},init:function(e){var t,o,i,n;(0,a.feedLoadingStats)(e),setTimeout((function(){(0,L.each)((0,y.geByTag)("textarea",cur.rowsCont),(function(){(0,b.placeholderSetup)(this)})),cur.q&&(0,T.saveSearchAttemptStats)("photos_search"===cur.section?T.servicePhotos:T.serviceNews,0,cur.count,(0,y.val)(cur.feedEls.search),"0",0,"0","",T.blockNameEmpty,"",!1,0,null,cur.sort)}),200),(0,L.extend)(cur,{oid:e.user_id,postTo:e.user_id,phCache:{},phShown:{},subsections:{},feed_session_id:e.feed_session_id||"na",module:"feed",isFeedLoading:!1,customSearchChange:te.onSearchChange,navParams:e.nav_params||{},isGamesInRightBlock:e.is_games_in_right_block,wallPostCb:function(){"news"==cur.section?setTimeout(te.update.pbind(1),1e3):setTimeout(te.switchSection.pbind("news"),1e3)},idleManager:(n={isIdle:!1,onIdle:null,onUnIdle:null,stop:function(){(0,v.removeEvent)(document,"mousemove keydown",t),(0,v.removeEvent)(window,"focus blur",i)},start:function(){s.browser.mobile||(t=function(){cur.idleManager&&n.isIdle&&(n.isIdle=!1,n.onUnIdle&&n.onUnIdle())},o=function(){cur.idleManager&&(n.isIdle=!0,n.onIdle&&n.onIdle())},i=function(e){"focus"==e.type?t():o()},(0,v.addEvent)(window,"focus blur",i))}},n),currentModule:function(){return"videos"==cur.section?"feed_videos":cur.module},onFrameBlocksDone:function(){cur.isFeedLoading=!1,(0===cur.wasScroll||cur.wasScroll>0||!1===cur.wasScroll&&"search"==cur.section&&cur.q&&"#"==cur.q.substr(0,1))&&(cur.wasScroll=!1)},feedEntriesHTML:{},feedUnreadCount:0,feedInitialTitle:"",feedUnread:[],feedToSort:[],feedEls:{wrap:(0,y.ge)("main_feed"),wall:(0,y.ge)("feed_wall"),search:(0,y.ge)("search_query"),rmenu:(0,y.ge)("feed_rmenu"),newPosts:(0,y.ge)("feed_new_posts")}}),cur.nav.push((function(e,t,o,i){if(void 0===e[0]){var n=(0,L.clone)(o);if(delete n[0],void 0===e.section||(0,L.inArray)(cur.section,["notifications","replies"])==(0,L.inArray)(e.section,["notifications","replies"])){if("notifications"==cur.section)return te.switchNotifyList(o.list||"all",(0,L.extend)(n,i.params||{})),!1;if(e.list)return te.switchList(e.list),!1;if(void 0!==e.section&&te.switchSection(e.section||"news",!1,!0),e.notify)return!1;if(e.q)return(0,y.val)(cur.feedEls.search,e.q),te.onFeedSearch(cur.feedEls.search),!1;if(delete e.subsection,(0,N.isEmpty)(e)){var r=(0,y.geByClass1)("feed_section_"+(t.section||"news")+(t.list||""));r&&uiRightMenu.go(r,!1,!1)}return cur.likesTabTT&&cur.likesTabTT.destroy(),te.go((0,L.extend)(n,i.params||{})),!1}}})),cur.idleManager.onUnIdle=te.updateTitle,cur.idleManager.onIdle=te.reSortItems,cur.options=cur.options||{},(0,L.extend)(cur.options,e),te.applyOptions(e,3),cur.rowsCont=e.wallCont=(0,y.ge)("feed_rows"),Wall.init(e),cur.rowsCont&&cur.rowsCont.children&&(0,L.each)(cur.rowsCont.children,(function(){var e=this;(0,y.hasClass)(e,"feed_row")&&e.firstChild&&te.onPostLoaded(e,!0)})),cur._back={text:(0,d.getLang)("news_return_to_news"),show:[te.startEvents],hide:[function(){clearInterval(cur.updateInt),(0,v.removeEvent)(window,"scroll",te.scrollCheck),(0,v.removeEvent)(window,"resize",te.scrollCheck),cur.idleManager.stop(),clearTimeout(cur.lp_error_to)}],loc:!1},te.startEvents(),(0,X.initCheckValidationPhone)(),(0,I.friendsRecommLogSend)(!0),setTimeout((function(){te.scrollCheck({type:"init"})}),200);try{var r=nav.objLoc.storybox;if(r){var c=JSON.parse(atob(r));c&&window.StoryPublisher.init(ee({photoUrl:c.url?c.url:c.blob,stickers:c.stickers,attachment:c.attachment,serviceInfo:c.service_info},c))}}catch(e){console.log(e)}},startEvents:function(){cur.idleManager.start(),cur.updateInt=setInterval((function(){te.update(0)}),2e4),(0,v.addEvent)(window,"scroll",te.scrollCheck),(0,v.addEvent)(window,"resize",te.scrollCheck)},mentionClick:function(e,t){var o=e,i=((e.getAttribute("mention")||"").match(/^bp(-?\d+_\d+)$/)||{})[1];if(!i)return nav.go(e,t);for(i=i.split("_");e;e=e.parentNode){var n=(e.id||"").match(/^replies(-?\d+_topic\d+)$/);if(n){if(n[1].split("_")[0]==i[0])return Wall.showReply(o,n[1],i[0]+"topic_"+i[1],t);break}}return nav.go(e,t)},toggleCustomFeedTab:function(e,t){return(0,y.hasClass)(e,"feed_tab_link_hidden")?((0,y.removeClass)(e,"feed_tab_link_hidden"),(0,g.setCookie)("remixcustom_feed_added",t)):(0,C.lockButton)(e),te.checkTabsFilter((0,y.geByClass1)("_feed_custom_"+t),t)},recomSubscribe:function(e,t,o){var i,n,r=o?t:(0,y.domPS)(t),s=o?(0,y.domNS)(t):t;o?(i="/al_feed.php",n={act:"subscr",oid:e,from:nav.objLoc.section,hash:(0,y.val)("feed_recom_hash")}):(i="/al_fans.php",n={act:"unsub",oid:e,hash:(0,y.val)("feed_recom_hash"),no_response:1}),ajax.post(i,n,{onDone:function(){(0,y.toggle)(r,!o),(0,y.toggle)(s,!!o),"recommended"!=nav.objLoc.section&&nav.go(nav.objLoc,!1,{params:{norecom:1}})},showProgress:()=>(0,C.lockButton)(t),hideProgress:()=>(0,C.unlockButton)(t)})},clickBlogReminder:function(e,t,o,i,n,r){if(ajax.post("blog.php",{act:"click_reminder",hash:i,nid:t,accept:1,target:r},{onDone:function(){}}),"_blank"!==(0,y.attr)(e,"target"))return(0,v.cancelEvent)(n),nav.go(o)},hideBlogReminder:function(e,t,o,i){o&&(0,v.cancelEvent)(o),(0,y.re)("feed_blog_reminder"),ajax.post("blog.php",{act:"hide_reminder",hash:e,nid:t,accept:0,target:i},{onDone:function(){}})},preloadVideos:function(e){function t(e){var t=new XMLHttpRequest;t.open("GET",e),t.send()}e&&cur.videoAutoplayScrollHandler&&(cur.videoAutoplayPreloaded=cur.videoAutoplayPreloaded||{},(0,L.each)(e,(function(e,o){t(o.index_url),t(o.index_url.replace(/index-(.+).m3u8/,"seg-1-$1.ts")),cur.videoAutoplayPreloaded[o.video]=o.quality})))},expandJoinedGroups:function(e,t){return(0,v.cancelEvent)(t),(0,y.show)((0,y.geByClass1)("feed_groups_hidden_list",e.parentNode)),(0,y.re)(e),!1},showAllFilters:function(e){(0,y.re)(e);for(var t=(0,y.geByClass)("hide",e.parentNode),o=0;o<t.length;o++)(0,y.removeClass)(t[o],"hide")},toggleSubscription:function(e,t,o,i,n){var r=(0,y.domClosest)("_ui_menu_wrap",e);r&&uiActionsMenu.toggle(r,!(0,y.hasClass)(r,"shown")),Page.toggleSubscription(e,t,o,i,n,(function(e,t){(0,y.geByClass)("post",cur.rowsCont).forEach((function(o){var n=o.id.split("_"),r=+n[n.length-2].replace("post","");if(i===r){var s=(0,y.geByClass1)("page_action_subscribe",o);(0,y.val)(s,e),(0,y.domData)(s,"act",t)}}))}))},onPostLoaded:function(e,t){Wall.onPostLoaded(e,t),this.initPrettyCardGallery(e),t&&!(0,y.hasClass)(e,"_post")&&te.initPhotoCarouselInPost((0,y.geByClass1)("_post",e))},openPostSuggest:function(e,t,o){if(t&&null!=t.type)switch(t.type){case 1:var i=t.postData,n=t.notHideByClick,r=(0,y.ge)("post_field");return void((r?(0,L.trim)(r.innerHTML).replace("<br>",""):"")||cur.wallAddMedia&&cur.wallAddMedia.attachCount()?(0,E.showFastBox)({title:(0,d.getLang)("news_suggest_alert_title")},(0,d.getLang)("news_suggest_alert_text"),(0,d.getLang)("global_yes"),(function(){(0,f.curBox)().hide(),s(i,n)}),(0,d.getLang)("global_cancel")):s(i,n));case 4:return window.open(t.link),void te.suggestionEvent(e,"open",o,t.notHideByClick)}function s(t,i){void 0===i&&(i=!1),cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),cur.options&&(cur.options.situational_suggest_id=e),t[0]=t[0].replace(/<br>/g,"\n");var n=cur.editing;delete cur.editing,Wall.setDraft(t),te.suggestionEvent(e,"open",o,i),cur.editing=n}},suggestionEvent:(e,t,o,i)=>(ajax.post("al_feed.php",{act:"suggestion_event",suggest_id:e,event_type:t,not_hide_by_click:(0,L.intval)(i)}),i||(0,y.re)((0,y.geByClass1)("_post_suggest")),(0,v.cancelEvent)(o)),closePostSuggest(e,t,o){te.suggestionEvent(e,t,o,!1)},hideRightBlock:function(e,t,o){var i=(0,y.domCA)(e,".page_block");return(0,y.re)(i),cur.isGamesInRightBlock=!1,ajax.post("al_feed.php",{act:"a_hide_right_block",block_type:t,app_id:e.dataset.app_id||0,hash:o}),!1},initPrettyCardGallery:function(e){if(!(0,y.geByClass1)("pretty-cards",e))return!1;window.PrettyCardGallery&&new window.PrettyCardGallery(e)},initPhotoCarouselInPost(e){if(e){var t=(0,V.initPhotoBlockInPost)(e,te.sendPhotoCarouselEvent.bind(te));(0,y.data)(e,"photo_carousel",t),window.cur.destroy.push((()=>{(0,y.removeData)(e,"photo_carousel")}))}},destroyPhotoCarouselByPost(e){var t=(0,y.data)(e,"photo_carousel");t&&t.destroy()},sendPhotoCarouselEvent(e,t,o){if(void 0===o&&(o=null),t){var i=t.querySelector(".post_img"),n=i&&i.getAttribute("data-post-id");if(n){var r,s,a=n.match(/(-?\d+)_p(\d+)/);if(a&&a[1]&&a[2]){r=a[1],s=a[2];var c=t.getAttribute("data-photo-raw-id"),l=t.getAttribute("data-pseudopost-type"),d=t.getAttribute("data-post-creation-timestamp");if(!c&&"photo_group"===l&&o){var u=o.target;if(u&&u.href){var _=u.href.match(/\/photo(-?\d+_\d+)/);c=_&&_[1]}}var h={event_type:e,content_type:l,post_owner_id:r,post_id:s,photo_raw_id:c,timestamp:d,ref:te.getModuleRef()};(0,T.statlogsValueEvent)("feed_new_carousel_stat",h)}}}},disablePhotoRecognizeBlock(e){var t=document.getElementById(`${j.BlockTypeIds.PhotoRecognize}`);t&&(cur.feedEntriesHTML[`${j.BlockTypeIds.PhotoRecognize}_ignored`]=(0,y.val)(t),ajax.post("al_feed.php",{act:"disable_recognize_block",hash:e},{onDone:e=>{(0,y.val)(t,e)}}))},enablePhotoRecognizeBlock(e){var t=document.getElementById(`${j.BlockTypeIds.PhotoRecognize}`);t&&ajax.post("al_feed.php",{act:"enable_recognize_block",hash:e},{onDone:()=>{(0,y.val)(t,cur.feedEntriesHTML[`${j.BlockTypeIds.PhotoRecognize}_ignored`])}})},initRightBlocks:e=>{(0,Z.initFeedRightBlocks)(e)}}},326325:(e,t,o)=>{o.d(t,{longView:()=>a});var i=o(905998),n=o(873589),r=o(342269),s={tracking:[],viewed:{}},a={process:(e,t)=>{var o=s.tracking,a=s.viewed;if(0===o.length)return[];var c=[];return(0,r.each)(o,(function(o,s){var l=(0,n.domFC)(s),d=l.id;if(l&&d){var u=(0,n.domData)(l,"ad-block-uid"),_=""+d;if(u&&(_+="_"+u),!a[_]&&document.body.contains(s))if((0,i.isElemViewable)(s,.5,e,t)){var h=Date.now();s.longViewStartedAt?h-s.longViewStartedAt>=1e3&&(a[_]=!0,c.push((0,r.extend)({},(0,i.postsGetRaws)(s),{long:1}))):s.longViewStartedAt=Date.now()}else s.longViewStartedAt=null}})),c},registerElement:e=>!!e&&(!!e.longViewTracking||!e.longViewRegistered&&(e.longViewRegistered=!0,e.longViewTracking=(0,i.isAutoplayAd)(e)||(0,i.isAdWithLongImpression)(e)||(0,i.isAdWithLongImpressionOnly)(e),!!e.longViewTracking&&(s.tracking.push(e),!0)))}},743469:(e,t,o)=>{o.d(t,{ON_BOARDING_BG_RECT_ID:()=>c,default:()=>u});var i=o(873589),n=o(152278),r=o(927766),s=o(499206),a=o(517920),c="onboarding_bg_rect",l="page_header_cont",d="onboarding";class u{constructor(e,t,o){var i;void 0===o&&(o={}),this.el=e,this.text=t,this.hideDarkness=!0,this.oldColor=!1;var n,r,s={autoShow:!1,noAutoHideOnWindowClick:null==(i=o.noAutoHideOnWindowClick)||i,content:t instanceof HTMLElement?t:`${t}`,cls:`feature_intro_tt tutorial_tip_tt ${r=null!=(n=o.class)?n:"",o.tooltipWhite?r:r+" feature_intro_blue_tt"}`,appendToParent:!0,onHide:this.ttOnHide.bind(this),scrollOffset:o.scrollOffset||0,align:o.align||a.ElementTooltip.ALIGN_CENTER};o.side&&(s.forceSide=o.side),o.offset&&(s.offset=o.offset),o.width&&(s.width=o.width),o.shift&&(s.centerShift=o.shift),o.border?this.border=o.border:this.border=[10,10,10,10],o.ttOnHide&&(s.onHide=o.ttOnHide),o.withCloseButton&&(s.withCloseButton=o.withCloseButton,s.onCloseButtonClick=o.onCloseButtonClick),o.align&&(s.align=o.align),this.ttParams=s,this.opts=o,this.initOnboardingBG()}initOnboardingBG(){if(!window.onboardingBG){var e=(0,i.se)('\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="49px">\n    <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" class="GroupOnboardingBgClip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ');(0,i.domInsertBefore)(e,window.layerBG),window.onboardingBGHeader=(0,i.ge)("onboarding_bg_header"),window.onboardingBG=(0,i.ge)("onboarding_bg"),window.onboardingBGRect=(0,i.ge)(c),window.onboardingBGClip=(0,i.ge)("onboarding_bg_clip"),window.cur.destroy.push((()=>{(0,i.hide)(window.onboardingBG),(0,i.hide)(window.onboardingBGHeader),(0,i.removeClass)((0,i.ge)(l),d),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&(0,n.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick)}))}this.opts.onBGClick&&(0,n.addEvent)(window.onboardingBG,"click",this.opts.onBGClick)}showTT(){var e=(0,i.getXY)(this.el)[1];this.tt=new a.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();var t=this.tt.getContent();(0,s.isElementInViewport)(this.el)&&(0,s.isElementInViewport)(t)||(0,r.scrollToY)(e-42-this.ttParams.scrollOffset)}hideTT(){this.tt&&(this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&((0,n.removeEvent)(window,"scroll"),(0,n.removeEvent)(window,"resize")),this.opts.onBGClick&&window.onboardingBG&&(0,n.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick),this.opts.onHide&&this.opts.onHide())}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),(0,n.addEvent)(window,"scroll",this.onScrollTT.bind(this)),(0,n.addEvent)(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){var e=this.el.offsetWidth,t=this.el.offsetHeight,o=(0,i.getXY)(this.el);(0,i.attr)(window.onboardingBGClip,"width",e+this.border[1]+this.border[3]),(0,i.attr)(window.onboardingBGClip,"height",t+this.border[0]+this.border[2]),(0,i.attr)(window.onboardingBGClip,"x",o[0]-this.border[1]),(0,i.attr)(window.onboardingBGClip,"y",o[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){var e=this.getPageHeight();window.onboardingBG.height!=e&&this.setDartToFullHeight()}setDartToFullHeight(){(0,i.attr)(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){(0,i.attr)(window.onboardingBG,"width",this.getPageWidth()),(0,i.attr)(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){(0,i.isVisible)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),(0,i.show)(window.onboardingBG),(0,i.isVisible)(window.onboardingBGHeader)||((0,i.show)(window.onboardingBGHeader),(0,i.addClass)((0,i.ge)(l),d)))}removeDarkens(){this.hideDarkness&&((0,i.hide)(window.onboardingBG),(0,i.hide)(window.onboardingBGHeader),(0,i.removeClass)((0,i.ge)(l),d))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){var e=document.documentElement,t=document.body;return Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,t.clientWidth,e.clientWidth)}getPageHeight(){var e=document.documentElement,t=document.body;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)}}},499206:(e,t,o)=>{function i(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}o.d(t,{isElementInViewport:()=>i})},461905:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{evalWithLogging:()=>evalWithLogging});var _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(769488),evalWithLogging=evalString=>{try{return eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__.logEvalError)(e,evalString)}}},700069:(e,t,o)=>{o.d(t,{Likes:()=>y});o(682772),o(319601),o(426833),o(804723),o(115306);var i=o(873589),n=o(152278),r=o(290846),s=o(342269),a=o(631351),c=o(274642),l=o(733164),d=o(146143),u=o(70162),_=o(465864),h=o(325698),p=o(95146),f=o(908706),g=o(107337),v=o(576772),m=o(210277);function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},w.apply(this,arguments)}var y={toggle(e,t,o,r){if((0,n.cancelEvent)(t),(0,l.isObject)(window.cur)&&(0,l.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();var s=(0,i.hasClass)(e,"active");(0,i.addClass)(e,"animate"),this.clientUpdate(o,h.LikeButtonTypes.like,s?-1:1,!s);var a={act:s?"a_do_unlike":"a_do_like",object:o,hash:r,list:cur.pvListId,wall:2,from:this._getReference(o),from_widget:vk.widget?1:0},c=()=>((0,i.toggleClass)(e,"active",s),this.clientUpdate(o,h.LikeButtonTypes.like,s?1:-1,s),!1);window.ajax.post("like.php",a,{onDone:t=>{if(t.unauth_action_box)return c(),void v.UnauthActionBox.show(t.unauth_action_box);this.update(o,t);var i=o.match(/^(wall|market)(.*)/);i&&cur.onLike&&cur.onLike(e,i[1],i[2],s)},onFail:c}),(0,l.intval)((0,i.domData)(e,"count"))>0?y.showLikes(e,o,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&window.mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?`feed_${cur.subsection?cur.subsection:cur.section}`:"recommended"===cur.section?"feed_recommended"+("recent"!==cur.subsection?"_"+cur.subsection:""):(0,s.inArray)(cur.section,["friends","groups","videos","photos"])?"feed_"+(cur.subsection?"_"+cur.subsection:""):`feed_${cur.section}`:"top"===cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,share(e,t){if(void 0===t&&(t={}),vk.widget&&!vk.id)return window.Widgets.oauth();if((0,l.isObject)(window.cur)&&(0,l.isFunction)(cur.viewAsBox))return cur.viewAsBox();var o=(0,_.parseLikeObjectId)(e),i=o.objectType,n=o.objectId;(vk.widget?window.showBox:d.showBox)("like.php",w({act:"publish_box",object:e,from_widget:vk.widget?1:0},t),{onDone:(e,t)=>{t.unauth_action_box&&(e.hide(),v.UnauthActionBox.show(t.unauth_action_box))},stat:["page.js","page.css","wide_dd.js","wide_dd.css",window.jsc("web/sharebox.js")]}),"wall"===i&&window.Wall&&window.Wall.triggerAdPostStat(n,"share_post"),cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>y.update(e,window.cleanObj(t)))},clientUpdate(e,t,o,n){var r=this._getButtonsByType(e,t);if(r.length){var s=(0,l.intval)((0,i.domData)(r[0],"count"))+o;this._updateDom(e,t,s,n),this.updateExternalIndex(e,{type:t,count:s,isActive:n})}},update(e,t){if(!isNaN(parseInt(t.like_num))){var o=(0,l.isUndefined)(t.like_my)?void 0:!!(0,l.intval)(t.like_my);this._updateDom(e,h.LikeButtonTypes.like,t.like_num,o,t.like_title),this.updateExternalIndex(e,{type:h.LikeButtonTypes.like,count:t.like_num,isActive:o})}if(!isNaN(parseInt(t.share_num))){var i=(0,l.isUndefined)(t.share_my)?void 0:!!(0,l.intval)(t.share_my);this._updateDom(e,h.LikeButtonTypes.share,t.share_num,i,t.share_title),this.updateExternalIndex(e,{type:h.LikeButtonTypes.share,count:t.share_num})}if((0,s.isNumeric)(t.views_num)&&this._updateDom(e,h.LikeButtonTypes.views,t.views_num,void 0,t.views_title),(0,s.isNumeric)(t.comment_num)&&this._updateDom(e,h.LikeButtonTypes.comment,t.comment_num),t[p.REACTIONS_COUNTS_RESPONSE_FIELD]){var n=!!t.isQueueUpdate;(0,g.triggerReactionsUpdate)(e,t[p.REACTIONS_COUNTS_RESPONSE_FIELD],void 0,{isQueueUpdate:n,isUserAction:!1,previewVisibility:f.previewVisibilityUseCurrent})}},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,o,n,r){var c=this._getButtonsByType(e,t),d=t===h.LikeButtonTypes.views;if(null==c?void 0:c.length){var p="";d?p=o:o>0&&(p=vk.widget?(0,s.formatCount)(o):(0,u.langNumeric)(o,"%s",!0)),d||(o=(0,l.intval)(o));for(var f=0;f<c.length;f++){var g=c[f];if(!(0,i.hasClass)(g,"no_counter")){var v,w=d?c[f]:(0,_.getElementLikeButtonCount)(c[f]);if((0,a.animateCount)(w,p,{str:"auto",noWrapWidth:!d,noSpaceIfEmpty:!0}),(0,i.toggleClass)(g,"empty",o<=0),"boolean"==typeof n&&(0,i.toggleClass)(g,"active",n),(0,i.attr)(c[f],"data-count",o),(0,m.updateAriaLabelCounter)(g,o,t),d)null==g||null==g.closest||null==(v=g.closest(".like_views"))||v.setAttribute("title",r||"");var y=c[f].tt;if(y){var k=(0,i.domByClass)(y.container,"_content"),b=(0,i.domByClass)(y.container,"_value"),C=(0,i.domByClass)(y.container,"_title"),E=(0,l.intval)((0,i.val)(b));(0,i.val)(b,o),r&&(0,i.val)(C,r),(0,l.isObject)(y)&&(y.likeInvalidated=!0),(E!==o&&E<7||!1===r)&&(t===h.LikeButtonTypes.like?g.needReinitLikesTT=!0:t===h.LikeButtonTypes.share&&(g.needReinitShareTT=!0)),t===h.LikeButtonTypes.like&&(0,i.toggleClass)(k,"me_hidden",!n),!1===r&&y.destroy&&y.destroy()}}}}},_getButtonsByType:(e,t)=>(0,i.domQuery)(`._like_${e} ._${t}, ._like_${e} [data-like-button-type="${t}"]`),showLikes(e,t,o){var n;if(void 0===o&&(o={}),e&&e instanceof HTMLElement&&!e.postDontShowLikes&&(!vk.widget||!vk.show_external_auth_box)){var a=o.views?{views:1}:o.share?{published:1}:{};o.listId&&(a.list=o.listId),o.like_hash&&(a.like_hash=o.like_hash),o.like_stats_params&&Object.assign(a,o.like_stats_params);var c=!!(0,i.geByClass1)("share",(0,i.gpeByClass)("like_wrap",e)),d=document.body,u=!1,h=getComputedStyle(e),p=(0,l.intval)(h.getPropertyValue("padding-left").replace("px","")),f=(0,l.intval)(h.getPropertyValue("padding-top").replace("px","")),g=(0,_.getElementLikeButtonIcon)(e),v=40;"wpost"===o.from&&(v=24);var m,w,k=[v-(0,i.getSize)(g)[0]/2-p,10-f],b=o.cl||"";if(o.share)b+="likes_tt_share";else if(b+="likes_tt_like","widget_community"===o.from)k[0]=6;else if("wcomments"===o.from||"widget_comments"===cur.wallType){k[0]=(0,i.getSize)(e)[0]+16-(0,i.getSize)(g)[0]/2-10}else"photo_carousel"===o.from&&(k[1]=10);if(!!(null==(n=o)?void 0:n.isFromReactionsPreview)){var C=e.querySelector("._ReactionsPreview__itemsContainer");if(C){var E=C.querySelector(".ReactionsPreviewItem"),S=(0,i.getXYRect)(E,!1),T=(S.width||0)/2,L=T;d=C,S.left+S.width/2>window.innerWidth/2&&(u=!0,L=C.offsetWidth-T),k[0]=-L+v}}o.share?(m="needReinitLikesTT",w="resetLikesTTTimer"):(m="needReinitShareTT",w="resetShareTTTimer"),clearTimeout(e[w]),(0,r.showTooltip)(e,{url:"/like.php",params:(0,s.extend)({act:"a_get_stats",object:t,has_share:c?1:""},a),appendEl:d,slide:15,shift:k,ajaxdt:o.fast?0:100,showdt:o.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,needLeft:u,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{y.showLikes(e,t,o)}},typeClass:"like_tt",className:b,onHide:()=>{clearTimeout(e[w]),e[m]&&(e[w]=setTimeout((()=>{delete e[m],e.tt&&e.tt.destroy&&e.tt.destroy()}),200))}})}},showShare:function(e,t,o){y.showLikes(e,t,(0,s.extend)(o,{share:1}))},updateViews:(e,t)=>{vk.widget&&vk.show_external_auth_box||window.ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,o){var n=(0,i.ce)("div",{innerHTML:o});y._updateDom(e,h.LikeButtonTypes.views,t,void 0,n.innerText||n.textContent)}})},makeTemplate(e,t){if(!e)return"";(t=(0,s.extend)({buttons_prepend:"",object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:"",like_class_name:"",[p.REACTIONS_COUNTS_RESPONSE_FIELD]:"",reactions_class_name:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?(0,u.langNumeric)(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?(0,u.langNumeric)(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name+=t.likes_count>0?"":" empty",t.share_class_name=t.share_count>0?"":"empty";var o=t[p.REACTIONS_COUNTS_RESPONSE_FIELD],n=!!o&&Object.values(o).some((e=>!!e));return t.reactions_class_name+=n?"":" PostBottomAction--empty",(0,i.rs)(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e,t){void 0===t&&(t={});var o=(0,_.parseLikeObjectId)(e),i=o.objectType,n=o.objectId;switch(i){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==n)return;var r=cur.pvListId,s=cur.pvIndex,a=cur.pvData[r][s];t.type===h.LikeButtonTypes.like?(a.likes=t.count,a.liked=t.isActive,cur.pvCommsLikes[a.id][1]=t.count):t.type===h.LikeButtonTypes.share&&(a.shares=t.count);break;case"video":if(window.mvcur&&window.mvcur.mvShown&&window.mvcur.videoRaw===n&&t.type===h.LikeButtonTypes.like){var c=window.Videoview.getMvData();c.likes=t.count,void 0!==t.isActive&&(c.liked=t.isActive,window.Videoview.playerOnLiked(t.isActive),window.Videoview.recache())}break;case"clip":t.type===h.LikeButtonTypes.like&&window.Videoview.playerOnLiked(t.isActive)}},showLikesList(e,t){cur.viewAsBox||(0,i.hasClass)((0,i.gpeByClass)("like_btn",e),"no_counter")||(0,c.showWiki)({w:"likes/"+(0,s.clean)(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||(0,i.hasClass)((0,i.gpeByClass)("like_btn",e),"no_counter")||(0,c.showWiki)({w:"shares/"+(0,s.clean)(t)},!1,!1,{queue:1})}}},712739:(e,t,o)=>{o.d(t,{default:()=>u});o(324603),o(339714),o(115306),o(864765);var i=o(897449),n=o(608021),r=o(501389),s=o(342269),a=o(152278),c=o(873589),l=o(961540),d=o(315720);const u={init(e,t){var o,u,_,h=(0,c.ge)("video_live_blacklist_search"),p=(0,c.ge)("video_live_blacklist_wrap"),f=(0,c.domByClass)(p,"olist"),g={};function v(e){var i=e;if((e=(0,s.trim)(e).replace(/\s+/g," ").toLowerCase())!==u){u=e;var r=e?o.search(e):t.list,a="";if(r.length)for(var l,d=new RegExp(e,"i"),_=0;_<r.length;_++)l=r[_],a+=(0,s.getTemplate)("video_live_blacklist_item",{id:l.id,href:l.href,photo:l.photo,name:e?l.name.replace(d,"<em>$&</em>"):l.name,class:g[l.id]?" olist_item_wrap_on":""});else a=(0,s.getTemplate)("video_live_blacklist_empty",{text:(0,n.langStr)((0,n.getLang)("global_search_not_found"),"search","<b>"+(0,s.clean)(i)+"</b>")});(0,c.val)(f,a)}}e.setOptions({bodyStyle:"padding:0;",onDestroy:function(){uiSearch.destroy(h),_&&_.destroy(),e=o=_=p=h=null}}),t.list.length&&(e.removeButtons().addButton((0,n.getLang)("global_save"),(function(o){ajax.post("al_video.php?act=save_live_blacklist",{exclude:Object.keys(g).join(","),hash:t.save_hash},{onDone:function(t){e.hide(),t&&(0,r.showDoneBox)(t)},showProgress:()=>(0,i.lockButton)(o),hideProgress:()=>(0,i.unlockButton)(o)})})).addButton((0,n.getLang)("global_cancel"),null,"no"),_=new uiScroll(p),v(""),p.onclick=function(e){var t=(0,c.domClosest)("olist_item_wrap",e.target);if(!t)return;(0,a.cancelEvent)(e);var o=(0,c.domData)(t,"id");(0,c.toggleClass)(t,"olist_item_wrap_on")?g[o]=1:delete g[o]},h&&(o=new d.vkIndexer(t.list,(function(e){return e.name+" https://"+(0,l.getHostName)()+e.href})),uiSearch.init(h,{onChange:v}),uiSearch.focus(h)))}}},653070:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"Popup-module__container--N2tdU",inner:"Popup-module__inner--Ln2nF",innerIn:"Popup-module__innerIn--eh2c4"}},928273:(e,t,o)=>{o.d(t,{default:()=>i});const i={iframeContainer:"CheckValidationPhone-module__iframeContainer--QDOEz"}},61836:(e,t,o)=>{o.d(t,{default:()=>i});const i={content:"PageBlock-module__content--LU3jx"}},287503:(e,t,o)=>{o.d(t,{GroupAdminLevel:()=>i,ANALYTICS_SCREEN_SETTINGS:()=>n,ANALYTICS_SCREEN_OTHER:()=>r});var i={USER:0,MODERATOR:1,EDITOR:2,ADMINISTRATOR:3,HOST:4,EVENT_CREATOR:5,CREATOR:6,PSEUDO_LEVEL_ADVERTISER:100},n="settings",r="other"},341319:(e,t,o)=>{var i,n,r,s,a;o.d(t,{StoryType:()=>i,StoryEntryPoint:()=>n,StorySource:()=>r,StoryBlockType:()=>s,StoryListName:()=>a}),function(e){e.PHOTO="photo",e.VIDEO="video",e.LIVE="live"}(i||(i={})),function(e){e.SWIPE="swipe",e.NAVIGATION_BUTTON="navigation_button",e.SIT_POSTING="sit_posting",e.LINK="link",e.STORY_REPLY="story_reply",e.STORY_REPOST="story_repost",e.CATALOG_ADD="catalog_add",e.DIALOG="dialog",e.STORY_LIVE_FINISHED="story_live_finished",e.DIALOG_VKME="dialog_vkme",e.STORY_VIEWER_FINISHED="story_viewer_finished",e.PUSH_TRY_MASK="push_try_mask",e.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",e.LINK_MASK="link_mask",e.POSTING="posting",e.NEW_STORY_AVATAR="new_story_avatar",e.STORY_REPLIES_LIST="story_replies_list",e.STORIES_FEED="stories_feed",e.STORIES_SEARCH_NEWS="stories_search_news",e.QUESTION_STICKER="question_sticker",e.LIST_MIDDLE="list_middle",e.ARCHIVE_EMPTY_BUTTON="archive_empty_button",e.ARCHIVE_MENU_BUTTON="archive_menu_button",e.IM="im",e.PROFILE_BUTTON="profile_button",e.SHARE="share",e.MINI_APP="mini_app",e.SYSTEM_SHARING="system_sharing",e.SHORTCUT="shortcut",e.ARCHIVE_SHARING="archive_sharing",e.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",e.STORY_VIEWER_MUSIC="story_viewer_music",e.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",e.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",e.CHANGE_AVATAR="change_avatar"}(n||(n={})),function(e){e.FEED="feed",e.FEED_MIDDLE="feed_middle",e.LINK="link",e.PROFILE="profile",e.IM_DIALOGS="im_dialogs",e.IM_DIALOG_HEADER="im_dialog_header",e.SNIPPET="snippet",e.REPLY="reply",e.REPLIES_LIST="replies_list",e.REPLY_STORY="reply_story",e.DISCOVER="discover",e.STORIES_MANAGE="stories_manage",e.USER_PERSONAL_CARD="user_personal_card",e.GROUP_PERSONAL_CARD="group_personal_card",e.NARRATIVE_SNIPPET="narrative_snippet",e.NARRATIVE_STORY="narrative_story",e.NARRATIVE_LINK="narrative_link",e.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",e.NARRATIVE_SECTION="narrative_section",e.FAVE="fave",e.SPAMFEED="sf",e.ADS_PREVIEW="ads_preview",e.LIST_MIDDLE="list_middle",e.PLACE_STORY_LIST="place_story_list",e.SEARCH_STORY_LIST="search_story_list",e.STORY_ARCHIVE="story_archive",e.IM_MSG_LIST="im_msg_list",e.NOSPAM="nospam",e.PROFILE_SNACKBAR="profile_snackbar",e.MY_QUESTIONS="questions"}(r||(r={})),function(e){e.stories="stories",e.communityGroupedStories="community_grouped_stories",e.appGroupedStories="app_grouped_stories",e.discover="discover"}(s||(s={})),function(e){e.feed="feed",e.groups="groups",e.apps="apps",e.discover="discover"}(a||(a={}))},732377:(e,t,o)=>{o.d(t,{getPerformanceStatsEventMomentData:()=>n});var i=o(714831),n=function(){var e,t=null===(e=performance.now)||void 0===e?void 0:e.call(performance);if(void 0!==t)return{eventTime:t,network:i.default.getConnectionEffectiveType()}}},469129:(e,t,o)=>{o.d(t,{getPerformanceStatsTools:()=>s});var i=o(570655),n=o(732377),r=o(649846);function s(e){var t=void 0===e?{}:e,s=t.module,a=void 0===s?r.navigationStat.getModule():s,c=t.page,l=t.entity,d=t.cooldownRecord;return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(t){return window.performance&&"visible"===window.document.visibilityState&&(e=(0,n.getPerformanceStatsEventMomentData)())?[2,Promise.all([o.e(68592),o.e(59240)]).then(o.bind(o,585102)).then((function(t){var o=t.navigationStat,n=t.PerformanceStatsEvent,r=t.AuxiliaryPerformanceStatsEvent,s=t.configurePerformanceStatsUtils;if(o.getModule){var u=s((0,i.__assign)((0,i.__assign)({},e),{module:a,page:c,entity:l,cooldownRecord:d}));return{storePerformanceStats:u.storePerformanceStats,sendStoredPerformanceStats:u.sendStoredPerformanceStats,PerformanceStatsEvent:n,AuxiliaryPerformanceStatsEvent:r}}}))]:[2]}))}))}},508271:(e,t,o)=>{o.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>i,SHOW_TOOLTIP_TIMEOUT:()=>n,REACTION_ID_DEFAULT:()=>r,REACTION_ID_MAX:()=>s,REACTION_ID_MIN:()=>a,REACTION_ID_UNSET:()=>c,REACTION_SET_ITEMS_MIN_COUNT:()=>l,OPENED_REACTED_USERS_DEFAULT_REACTION_ID:()=>d});var i=600,n=140,r=0,s=7,a=0,c=void 0,l=2,d=r},464746:(e,t,o)=>{o.d(t,{isDebugEnabled:()=>r});var i=o(15305),n=void 0,r=function(){return void 0!==n?n:n=!!i.ls.get("reactions.debug_enabled")}},714396:(e,t,o)=>{o.d(t,{reactionCountsBrandUnwrap:()=>n,reactionCountsBrandWrap:()=>r});var i=o(165594),n=function(e){return(0,i.unwrap)(e)},r=function(e){return(0,i.wrap)(e)}},82701:(e,t,o)=>{o.d(t,{reactionLogError:()=>n});var i=o(66433);function n(e){var t=e.error,o=e.reportError;void 0!==o&&o&&(0,i.logError)(t,{environment:"reactions"}),console.error(t)}},517760:(e,t,o)=>{o.d(t,{isUnknownObject:()=>c,getReaction:()=>l,getDefaultReaction:()=>d,getDefaultReactionTitle:()=>u,prepareReactionMenuSet:()=>h,isReactionIdSet:()=>p,isReactionIdUnset:()=>f,isValidReactionId:()=>g,parseReactionId:()=>v,parseReactionIdOrUnset:()=>m,validateReactionSetPayloaditems:()=>w,parseReactionMenuConfig:()=>y,calcCounters:()=>k,calcCountersSum:()=>b,calcCountersWeightedSum:()=>C,hasReactionsForCounts:()=>E,counterForReactionId:()=>S,areCountersEqual:()=>T});var i=o(570655),n=o(508271),r=o(714396),s=o(659397),a=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},c=function(e){return null!==e&&"object"==typeof e},l=function(e,t){return e.itemsById[t]},d=function(e){return l(e,n.REACTION_ID_DEFAULT)},u=function(e){var t;return null===(t=d(e))||void 0===t?void 0:t.title},_=function(e,t){return 0===e.length?"":(o=e,i=function(e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)},n=!1,void 0===n&&(n=!0),o.reduce((function(e,t){var o=i(t),r=i(e);return r===o?n?e:t:r<o?e:t}))).url;var o,i,n},h=function(e,t,o){var i=t.map((function(e){var t=e.asset,i=e.color_sets,n=e.id,r=e.score,s=e.title;return{animationURL:t.animation_url||void 0,backgroundColor:null==i?void 0:i.background,id:n,imageMenuURL:_(t.images,o.imageMenuSize),imagePreviewURL:"imagePreviewSize"in o?_(t.images,o.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in o?_(t.images,o.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in o?_(t.images,o.imageStoryPreviewSize):void 0,score:r,title:s,titleColor:null==i?void 0:i.foreground}})),n={};return i.forEach((function(e){n[e.id]=e})),{id:e,items:i,itemsById:n}},p=function(e){return e!==n.REACTION_ID_UNSET},f=function(e){return e===n.REACTION_ID_UNSET},g=function(e){return a(e)&&e>=n.REACTION_ID_MIN&&e<=n.REACTION_ID_MAX},v=function(e){var t=parseInt(e,10);return g(t)?{isValid:!0,value:t}:{isValid:!1}},m=function(e){var t=v(e);return t.isValid?t.value:n.REACTION_ID_UNSET},w=function(e,t){if(e.length<n.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error("Invalid reactions items count in set '"+t+"': "+e.length)}},y=function(e){if(c(e)){var t={},o=e.animationShowStaticAfterEnd,i=e.menuShowDelay,r=e.openedDefaultReactionId,s=e.reportJsErrors;return"number"!=typeof i&&void 0!==i||(t.menuShowDelay=i),"boolean"==typeof o&&(t.animationShowStaticAfterEnd=o),"boolean"==typeof s&&(t.reportJsErrors=s),"number"==typeof r||null===r?null===r?t.openedDefaultReactionId=void 0:g(r)&&(t.openedDefaultReactionId=r):t.openedDefaultReactionId=n.OPENED_REACTED_USERS_DEFAULT_REACTION_ID,t}},k=function(e,t){var o=(0,r.reactionCountsBrandWrap)({});return Object.entries((0,r.reactionCountsBrandUnwrap)(e)).forEach((function(e){var n,r,s,a=(0,i.__read)(e,2),c=a[0],l=a[1],d=c,u=null!==(s=null===(r=null===(n=null==t?void 0:t.itemsById)||void 0===n?void 0:n[d])||void 0===r?void 0:r.score)&&void 0!==s?s:1;o[d]=u*(l||0)})),o},b=function(e){return Object.values((0,r.reactionCountsBrandUnwrap)(e)).reduce((function(e,t){return e+(t||0)}),0)},C=function(e){return b((0,r.reactionCountsBrandWrap)(e))},E=function(e){return b(e)>0},S=function(e,t){var o;return null!==(o=e[t])&&void 0!==o?o:void 0},T=function(e,t){return e&&t?(0,s.isEqual)(e,t):e===t}},165594:(e,t,o)=>{o.d(t,{unwrap:()=>i,wrap:()=>n});var i=function(e){return e},n=function(e){return e}},749091:(e,t,o)=>{var i;o.d(t,{Theme:()=>i,imageSizesIndex:()=>r,imageSizeCache:()=>s,createProductsMap:()=>a,UserProductStateKey:()=>n,isBasePack:()=>l,isStyleProduct:()=>d,isPackProduct:()=>u,ProductsByType:()=>_}),function(e){e.LIGHT="light",e.DARK="dark",e.DEFAULT="light"}(i||(i={}));var n,r=Symbol(),s=Symbol(),a=function(e){return new Map(e)};!function(e){e.IsNew="is_new"}(n||(n={}));var c,l=function(e){return void 0!==e.sticker_ids},d=function(e){return void 0!==e.base_id},u=function(e){return l(e)&&!d(e)};!function(e){e.Pack="pack",e.Style="style"}(c||(c={}));var _=function(){function e(e){var t=this;void 0===e&&(e=[]),this.pack=new Set,this.style=new Set,e.forEach((function(e){return t.add(e)}))}return e.prototype.add=function(e){e&&(u(e)?this.pack.add(e):d(e)&&this.style.add(e))},e.prototype.getPack=function(){return this.pack.values().next().value},e.prototype.getStyles=function(){return Array.from(this.style.values())},e.prototype.getCount=function(){return this.pack.size+this.style.size},e}();!function(){function e(e){var t=this;this.pack=[],this.style=[],e.forEach((function(e){return t.add(e)}))}e.prototype.add=function(e){var t=e.product;t&&(u(t)?this.pack.push(e):d(t)&&this.style.push(e))}}()},812317:(e,t,o)=>{o.d(t,{initReactApp:()=>n});var i=o(973935);function n(e,t,o){var n;e&&(i.render(t,e),o||null===(n=window.cur.destroy)||void 0===n||n.push((function(){e&&i.unmountComponentAtNode(e)})))}},508801:(e,t,o)=>{o.d(t,{CheckValidationPhone:()=>f});var i=o(570655),n=o(785893),r=o(667294),s=o(988882),a=o(99656),c=o(915986),l=o(463150),d=o(235339),u=o(303016),_=o(772221),h=o(117621),p=o(928273),f=function(e){var t=e.app_id,o=e.preventCheck,f=void 0===o?function(){return!1}:o,g=(0,i.__read)((0,r.useState)(null),2),v=g[0],m=g[1],w=(0,i.__read)((0,r.useState)(!1),2),y=w[0],k=w[1],b=(0,i.__read)((0,r.useState)(!1),2),C=b[0],E=b[1],S=(0,i.__read)((0,r.useState)(!0),2),T=S[0],L=S[1],P=(0,i.__read)((0,r.useState)(null),2),I=P[0],B=P[1],A=(0,r.useRef)(null),R=function(){(0,u.validatePhoneCheck)().then((function(e){var t=e.status,o=e.sid;if(t===c.ValidationStatus.NEED_VALIDATE||t===c.ValidationStatus.LAST_CHANCE_VALIDATE){var i=t!==c.ValidationStatus.LAST_CHANCE_VALIDATE,n={name:"auth_validation_phone",params:{status:i?"1":"0"}};o&&(n.params.sid=o),m({url:window.location.origin,scheme:(0,h.getCurrentScheme)(),action:n}),L(i),E(!0)}})).catch((function(){}))},O=(0,r.useCallback)((function(){I&&I.sendMessage({handler:s.UserEvents.VALIDATION_PHONE_CLOSE,params:{},type:"vk-sak-sdk"})}),[I]);return(0,r.useEffect)((function(){f()||R()}),[]),(0,r.useEffect)((function(){var e=function(){document.hidden||C||y||f()||R()};return document.addEventListener("visibilitychange",e),function(){return document.removeEventListener("visibilitychange",e)}}),[C,f,y]),(0,r.useEffect)((function(){var e=A.current;if(C&&e&&v){(0,_.setConfig)({appId:t});var o=new s.User({container:e});o.on(s.UserEvents.VALIDATION_PHONE_CLOSE,(function(e){e.status===l.ValidationProceedStatus.IS_VALIDATED&&k(!0),E(!1),e.redirectUrl&&""!==e.redirectUrl&&(window.location.href=e.redirectUrl)})),o.on(s.UserEvents.CONTENT_IN_HEIGHT,(function(t){e.style.height=t.height+"px"})),o.open(v).then((function(){return B(o)})).catch((function(){}))}}),[C,v]),(0,n.jsx)(a.AppRootProvider,{children:(0,n.jsx)(d.Popup,(0,i.__assign)({isOpen:C,canClose:T,handleClose:O},{children:(0,n.jsx)("div",{ref:A,className:p.default.iframeContainer},void 0)}),void 0)},void 0)}},568806:(e,t,o)=>{o.d(t,{CheckValidationPhoneFallback:()=>f});var i=o(570655),n=o(785893),r=o(667294),s=o(988882),a=o(99656),c=o(915986),l=o(463150),d=o(235339),u=o(303016),_=o(772221),h=o(117621),p=o(928273),f=function(e){var t=e.app_id,o=e.isValidModule,f=void 0!==o&&o,g=e.onInit,v=(0,i.__read)((0,r.useState)(null),2),m=v[0],w=v[1],y=(0,i.__read)((0,r.useState)(f),2),k=y[0],b=y[1],C=(0,i.__read)((0,r.useState)(!1),2),E=C[0],S=C[1],T=(0,i.__read)((0,r.useState)(!1),2),L=T[0],P=T[1],I=(0,i.__read)((0,r.useState)(!0),2),B=I[0],A=I[1],R=(0,i.__read)((0,r.useState)(null),2),O=R[0],x=R[1],N=(0,r.useRef)(null),D=function(){(0,u.validatePhoneCheck)().then((function(e){var t=e.status,o=e.sid;if(t===c.ValidationStatus.NEED_VALIDATE||t===c.ValidationStatus.LAST_CHANCE_VALIDATE){var i=t!==c.ValidationStatus.LAST_CHANCE_VALIDATE,n={name:"auth_validation_phone",params:{status:i?"1":"0"}};o&&(n.params.sid=o),w({url:window.location.origin,scheme:(0,h.getCurrentScheme)(),action:n}),A(i),P(!0)}})).catch((function(){}))},M=(0,r.useCallback)((function(){O&&O.sendMessage({handler:s.UserEvents.VALIDATION_PHONE_CLOSE,params:{},type:"vk-sak-sdk"})}),[O]);return(0,r.useEffect)((function(){g&&g(b)}),[g]),(0,r.useEffect)((function(){k&&D()}),[k]),(0,r.useEffect)((function(){var e=function(){document.hidden||L||E||!k||D()};return document.addEventListener("visibilitychange",e),function(){return document.removeEventListener("visibilitychange",e)}}),[L,k,E]),(0,r.useEffect)((function(){var e=N.current;if(L&&e&&m){(0,_.setConfig)({appId:t});var o=new s.User({container:e});o.on(s.UserEvents.VALIDATION_PHONE_CLOSE,(function(e){e.status===l.ValidationProceedStatus.IS_VALIDATED&&S(!0),P(!1),e.redirectUrl&&""!==e.redirectUrl&&(window.location.href=e.redirectUrl)})),o.on(s.UserEvents.CONTENT_IN_HEIGHT,(function(t){e.style.height=t.height+"px"})),o.preload(m).then((function(){return x(o)})).catch((function(){}))}}),[L,m]),(0,n.jsx)(a.AppRootProvider,{children:(0,n.jsx)(d.Popup,(0,i.__assign)({isOpen:L,canClose:B,handleClose:M},{children:(0,n.jsx)("div",{ref:N,className:p.default.iframeContainer},void 0)}),void 0)},void 0)}},235339:(e,t,o)=>{o.d(t,{Popup:()=>c});var i=o(570655),n=o(785893),r=o(667294),s=o(86894),a=o(653070),c=function(e){var t=e.children,o=e.handleClose,c=e.isOpen,l=void 0!==c&&c,d=e.canClose,u=void 0===d||d;return(0,s.useScrollLock)(l),(0,r.useEffect)((function(){var e=function(e){return"Escape"===e.key?o():null};if(l)return u&&document.body.addEventListener("keydown",e),function(){document.body.removeEventListener("keydown",e)}}),[o,u,l]),l?(0,n.jsx)(s.PopoutWrapper,(0,i.__assign)({className:a.default.container,onClick:function(){return u&&o()}},{children:(0,n.jsxs)("div",(0,i.__assign)({className:a.default.inner},{children:[(0,n.jsx)("div",(0,i.__assign)({className:a.default.innerIn},{children:t}),void 0),u&&(0,n.jsx)(s.ModalDismissButton,{onClick:o},void 0)]}),void 0)}),void 0):null}},463150:(e,t,o)=>{var i;o.d(t,{ValidationProceedStatus:()=>i}),function(e){e[e.IS_VALIDATED=1]="IS_VALIDATED"}(i||(i={}))},915986:(e,t,o)=>{var i;o.d(t,{ValidationStatus:()=>i}),function(e){e[e.NEED_VALIDATE=3]="NEED_VALIDATE",e[e.LAST_CHANCE_VALIDATE=5]="LAST_CHANCE_VALIDATE"}(i||(i={}))},303016:(e,t,o)=>{o.d(t,{validatePhoneCheck:()=>r});var i=o(570655),n=o(189798),r=function(e){var t=window.vk.apiConfigDomains.apiDomain;return(0,n.api)("auth.validatePhoneCheck",{is_auth:0,mode:1},(0,i.__assign)({domain:t},e))}},117621:(e,t,o)=>{o.d(t,{getCurrentScheme:()=>r});var i=o(511417),n=o(246805),r=function(){var e=i.colorScheme.getScheme();return(0,n.normalizeScheme)(e)}},246805:(e,t,o)=>{o.d(t,{normalizeScheme:()=>r});var i=o(86894),n=o(511417),r=function(e){switch(e){case n.ColorSchemeName.WebDark:case n.ColorSchemeName.Dark:return i.Scheme.SPACE_GRAY;case n.ColorSchemeName.WebLight:case n.ColorSchemeName.Light:default:return i.Scheme.BRIGHT_LIGHT}}},772221:(e,t,o)=>{o.d(t,{setConfig:()=>s});var i=o(570655),n=o(988882),r=o(593227),s=function(e){void 0===e&&(e={});var t=window.vk.apiConfigDomains,o=t.loginDomain,s=t.connectDomain;n.Config.init((0,i.__assign)({appId:r.AuthAppId.VK,loginDomain:o,connectDomain:s},e))}},515469:(e,t,o)=>{o.d(t,{OwnersListPageBlock:()=>u});var i=o(570655),n=o(785893),r=o(86894),s=o(304319),a=o(327730),c=o(464284),l=o(831333),d=o(917258),u=function(e){var t=e.title,o=e.href,u=e.items,_=e.button,h=(0,i.__rest)(e,["title","href","items","button"]);return u.length?(0,n.jsxs)(a.PageBlock,(0,i.__assign)({},h,{header:(0,n.jsx)(c.PageBlockHeader,(0,i.__assign)({href:o},{children:t}),void 0),separator:"hide"},{children:[(0,n.jsx)(r.Spacing,{size:4},void 0),(0,n.jsx)(l.SpacedList,(0,i.__assign)({spacing:2},{children:u.map((function(e){return(0,n.jsx)(r.SimpleCell,(0,i.__assign)({href:e.href,before:(0,n.jsx)(d.AvatarRich,{size:48,src:e.photo,isNFT:e.is_nft,imgAlt:e.title},void 0),badgeAfterTitle:e.is_verified&&(0,n.jsx)(s.default,{},void 0),subtitle:e.subtitle},{children:e.title}),e.id)}))}),void 0),_?(0,n.jsx)(r.Div,{children:(0,n.jsx)(r.Button,(0,i.__assign)({mode:"secondary",size:"s",stretched:!0,href:o},{children:_}),void 0)},void 0):(0,n.jsx)(r.Spacing,{size:8},void 0)]}),void 0):null}},327730:(e,t,o)=>{o.d(t,{PageBlock:()=>a});var i=o(570655),n=o(785893),r=o(86894),s=o(61836),a=function(e){var t=e.children,o=(0,i.__rest)(e,["children"]);return(0,n.jsx)(r.Group,(0,i.__assign)({},o,{padding:"m",mode:"card"},{children:(0,n.jsx)("div",(0,i.__assign)({className:s.default.content},{children:t}),void 0)}),void 0)}},464284:(e,t,o)=>{o.d(t,{PageBlockHeader:()=>s});var i=o(570655),n=o(785893),r=o(86894),s=function(e){var t=e.href,o=e.onClick,s=e.children,a=(0,i.__rest)(e,["href","onClick","children"]);return(0,n.jsx)(n.Fragment,{children:t||o?(0,n.jsx)(r.Tappable,(0,i.__assign)({href:t,onClick:o,hasActive:!0,hasHover:!1},{children:(0,n.jsx)(r.Header,(0,i.__assign)({},a,{children:s}),void 0)}),void 0):(0,n.jsx)(r.Header,(0,i.__assign)({},a,{children:s}),void 0)},void 0)}},272972:(e,t,o)=>{var i=o(214168);window.feed=i.Feed,window.Feed=i.Feed;try{window.stManager.done(window.jsc("web/feed.js"))}catch(e){}},312422:(e,t,o)=>{o.d(t,{PhotoCarousel:()=>a});var i=o(570655),n=o(873589),r=o(275512),s="PhotoCarousel__arrowWrapper--hidden",a=function(){function e(e,t,o){var r=this;this.activeItemIdx=0,this.onLeftArrowClick=function(e){var t;r.isLeftBtnDisabled?e.stopPropagation():((null===(t=r.options)||void 0===t?void 0:t.onPrevClick)&&r.options.onPrevClick(e),r.prev())},this.onRightArrowClick=function(e){var t,o;r.isRightBtnDisabled?e.stopPropagation():((null===(t=r.options)||void 0===t?void 0:t.onNextClick)&&(null===(o=r.options)||void 0===o||o.onNextClick(e)),r.next())},this.post=e,this.options=o,this.items=t;var a=e.querySelector(".PhotoCarousel"),c=e.querySelector(".PhotoCarousel__arrowWrapper--left"),l=e.querySelector(".PhotoCarousel__arrowWrapper--right"),d=e.querySelector(".PhotoCarousel__items");if(!a||!d)throw new Error("PhotoCarousel: incorrect arguments");var u=(0,i.__read)((0,n.getSize)(d),1)[0],_=(0,i.__read)((0,n.getSize)(a),1)[0];this.carousel=a,this.leftArrowBtn=c,this.rightArrowBtn=l,this.isLeftBtnDisabled=!c||c.classList.contains(s),this.isRightBtnDisabled=!l||l.classList.contains(s),this.photoList=d,this.photoListWidth=u,this.carouselWidth=_,this.activeItemIdx=this.getActiveItemIdxFromDOM(),this.initListeners()}return e.prototype.destroy=function(){this.deInitListeners()},e.prototype.initListeners=function(){this.leftArrowBtn&&this.leftArrowBtn.addEventListener("click",this.onLeftArrowClick),this.rightArrowBtn&&this.rightArrowBtn.addEventListener("click",this.onRightArrowClick)},e.prototype.deInitListeners=function(){this.leftArrowBtn&&this.leftArrowBtn.removeEventListener("click",this.onLeftArrowClick),this.rightArrowBtn&&this.rightArrowBtn.removeEventListener("click",this.onRightArrowClick)},e.prototype.next=function(){this.move(this.getActiveIdx()+1)},e.prototype.prev=function(){this.move(this.getActiveIdx()-1)},e.prototype.getActive=function(){return this.items[this.activeItemIdx]},e.prototype.getActiveIdx=function(){return this.activeItemIdx},e.prototype.getActiveItemIdxFromDOM=function(){return Number(this.carousel.dataset.idx)},e.prototype.move=function(e){var t,o=this.getActiveIdx(),s=this.getActive(),a=this.items[e];if(a){var c=a.getEl();if(this.rightArrowBtn&&this.leftArrowBtn){var l=a.getPhotoRawId(),d=(0,i.__read)((0,n.getSize)(c),1)[0],u=c.offsetLeft,_=Math.round(this.photoListWidth-this.carouselWidth),h=u+d/2-this.carouselWidth/2;if(e>o)h=Math.min(h,_);else{if(!(e<o))return;h=Math.max(h,0)}h=Math.round(h),this.photoList.style.transform="translateX(-"+h+"px)";var p=(this.carouselWidth-d-12)/2,f=this.carouselWidth-d-20-6;h?(this.toggleLeftBtnDisabled(!1),this.leftArrowBtn.style.width=h===_?f+"px":p+"px"):this.toggleLeftBtnDisabled(!0),h===_?this.toggleRightBtnDisabled(!0):(this.toggleRightBtnDisabled(!1),this.rightArrowBtn.style.width=h?p+"px":f+"px"),s.setActive(!1),a.setActive(),this.activeItemIdx=e,this.items.slice(e,e+r.NUMBER_INITIALIZED_PHOTO).forEach((function(e){return e.init()})),this.carousel.setAttribute("data-idx",String(e)),this.post.setAttribute("data-photo-raw-id",String(l)),(null===(t=this.options)||void 0===t?void 0:t.onChange)&&this.options.onChange()}}},e.prototype.toggleLeftBtnDisabled=function(e){void 0===e&&(e=!0),this.leftArrowBtn&&(e?(this.leftArrowBtn.classList.add(s),this.isLeftBtnDisabled=!0):(this.leftArrowBtn.classList.remove(s),this.isLeftBtnDisabled=!1))},e.prototype.toggleRightBtnDisabled=function(e){void 0===e&&(e=!0),this.rightArrowBtn&&(e?(this.rightArrowBtn.classList.add(s),this.isRightBtnDisabled=!0):(this.rightArrowBtn.classList.remove(s),this.isRightBtnDisabled=!1))},e}()},923374:(e,t,o)=>{o.d(t,{PhotoCarouselBlock:()=>s});var i=o(312422),n=o(917325),r=o(275512),s=function(){function e(e,t){var o,n=this;this.isDestroyed=!1,this.destroy=function(){n.isDestroyed||(n.deInitListener(),n.carousel.destroy(),n.items.forEach((function(e){return e.destroy()})),n.isDestroyed=!0)},this.onPostClick=function(e){var t,o=e.target;(null===(t=n.blockOptions)||void 0===t?void 0:t.sendAnalytic)&&(o.classList.contains("post_img")||o.classList.contains("author")||o.classList.contains("mem_link")||o.classList.contains(r.PHOTO_CAROUSEL_AVATAR_CLASS)?n.blockOptions.sendAnalytic("open_user",n.post,e):o.classList.contains(r.PHOTO_ELEMENT_CLASS)||o.classList.contains(r.PHOTO_NO_SIZE_ELEMENT_CLASS)||o.classList.contains("page_post_thumb_wrap")?n.blockOptions.sendAnalytic("open_photo",n.post,e):o.classList.contains(r.PHOTO_CAROUSEL_HIDE_BTN_CLASS)&&n.blockOptions.sendAnalytic("hide",n.post,e))},this.post=e,this.blockOptions=t;var s=this.getCarouselOptions();this.items=this.createItems(e),this.carousel=new i.PhotoCarousel(e,this.items,s),this.initListeners(),null===(o=window.cur.destroy)||void 0===o||o.push(this.destroy)}return e.prototype.initListeners=function(){this.post.addEventListener("click",this.onPostClick)},e.prototype.deInitListener=function(){this.post.removeEventListener("click",this.onPostClick)},e.prototype.createItems=function(e){var t,o=this,i=Array.from(e.querySelectorAll("."+r.PHOTO_CAROUSEL_ITEM_CLASS)),s={};return(null===(t=this.blockOptions)||void 0===t?void 0:t.sendAnalytic)&&(s.sendAnalytic=function(e,t){var i,n;(null===(i=o.blockOptions)||void 0===i?void 0:i.sendAnalytic)&&(null===(n=o.blockOptions)||void 0===n||n.sendAnalytic(e,o.post,t))}),i.map((function(e){return new n.PhotoCarouselBlockItem(e,s)}))},e.prototype.getCarouselOptions=function(){var e,t=this,o=null===(e=this.blockOptions)||void 0===e?void 0:e.sendAnalytic;return{onPrevClick:function(e){o&&o("click_previous",t.post,e)},onNextClick:function(e){o&&o("click_next",t.post,e)}}},e}()},917325:(e,t,o)=>{o.d(t,{PhotoCarouselBlockItem:()=>l});var i=o(570655),n=o(213),r=o(67328),s=o(700069),a=o(152278),c=o(274642),l=function(e){function t(t,o){var i=e.call(this,t)||this;i.onPhotoClick=function(e){var t;e.ctrlKey||e.metaKey||(i.showPhoto(e),(null===(t=i.options)||void 0===t?void 0:t.sendAnalytic)&&i.options.sendAnalytic("open_photo"))},i.onShareClick=function(e){var t;if(i.objectRawId){var o=null===(t=i.options)||void 0===t?void 0:t.sendAnalytic;o&&(o("click_to_sharing",e),window.cur.sbOnShare=function(){o("repost",e)}),s.Likes.share(i.objectRawId,i.shareOptions),(0,a.cancelEvent)(e)}},i.onCommentsClick=function(e){var t,o=i.photoViewOptions||{};o.commentFocusInit=!0,i.showPhoto(e,o);var n=null===(t=i.options)||void 0===t?void 0:t.sendAnalytic;n&&n("click_to_comment",e)},i.onLikeClick=function(e){var t;if(i.likeBtn&&i.objectRawId&&i.likeHash){var o=i.isLiked()?"unlike":"like",n=null===(t=i.options)||void 0===t?void 0:t.sendAnalytic;n&&n(o,e),s.Likes.toggle(i.likeBtn,e,i.objectRawId,i.likeHash)}},i.isLiked=function(){return i.likeBtn&&i.likeBtn.classList.contains("active")},i.options=o,i.shareBtn=t.querySelector("._share"),i.commentsBtn=t.querySelector("._comment"),i.likeBtn=t.querySelector("._like"),i.objectRawId=t.dataset.objectRawId,i.likeHash=t.dataset.likeHash;var n=t.dataset.shareOptions||"";return i.shareOptions=n&&(0,r.parseJSON)(n),i.initListeners(),i}return(0,i.__extends)(t,e),t.prototype.destroy=function(){this.deInitListeners()},t.prototype.initListeners=function(){this.shareBtn&&this.shareBtn.addEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.addEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.addEventListener("click",this.onLikeClick),this.photo.addEventListener("click",this.onPhotoClick)},t.prototype.deInitListeners=function(){this.shareBtn&&this.shareBtn.removeEventListener("click",this.onShareClick),this.commentsBtn&&this.commentsBtn.removeEventListener("click",this.onCommentsClick),this.likeBtn&&this.likeBtn.removeEventListener("click",this.onLikeClick),this.photo.removeEventListener("click",this.onPhotoClick)},t.prototype.showPhoto=function(e,t){void 0===t&&(t=this.photoViewOptions),(0,c.showPhoto)(this.photoRawId,this.photoContext,t,e),(0,a.cancelEvent)(e)},t}(n.PhotoCarouselItem)},213:(e,t,o)=>{o.d(t,{PhotoCarouselItem:()=>s});var i=o(570655),n=o(275512),r=o(520820),s=function(){function e(e){this.item=e;var t=e.querySelector("."+n.PHOTO_ELEMENT_CLASS),o=e.dataset.photoViewOptions||"",s=e.dataset.photoContext,a=e.dataset.photoRawId,c=o&&(0,r.parseJSON)(o);if(!(c&&a&&s&&t))throw new Error("PhotoCarouselBlockItem: incorrect arguments");var l=(0,i.__read)(a.split("_"),2),d=l[0],u=l[1];this.ownerId=Number(d),this.photoId=Number(u),this.photoRawId=a,this.photoContext=s,this.photoViewOptions=c,this.photo=t,this.isActive=e.classList.contains("PhotoCarouselItem--active")}return e.prototype.setActive=function(e){void 0===e&&(e=!0),this.isActive=e,this.item.classList.toggle("PhotoCarouselItem--active",e)},e.prototype.init=function(){var e=this.item.getAttribute("data-photo-url");if(e){if(this.item.classList.contains(n.PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS)){var t=this.item.querySelector("."+n.PHOTO_NO_SIZE_ELEMENT_CLASS);t&&(t.src=e)}else{var o=this.item.querySelector("."+n.PHOTO_ELEMENT_CLASS);if(!o)return;o.style.backgroundImage="url('"+e+"')"}this.item.removeAttribute("data-photo-url")}},e.prototype.getPhotoRawId=function(){return this.photoRawId},e.prototype.getOwnerId=function(){return this.ownerId},e.prototype.getEl=function(){return this.item},e}()},463343:(e,t,o)=>{o.d(t,{PhotoRecognizeBlock:()=>h});var i=o(275512),n=o(642009),r=o(312422),s=o(501389),a=o(873589),c=o(67328),l=o(123251),d=o(70162),u=o(152278),_=o(13353),h=function(){function e(e){var t,o=this;this.isDestroyed=!1,this.countConfirmedTags=0,this.destroy=function(){o.isDestroyed||(o.nextPhotoTimerId&&(clearTimeout(o.nextPhotoTimerId),o.nextPhotoTimerId=null),o.deInitListeners(),o.carousel.destroy(),o.items.forEach((function(e){return e.destroy()})),o.isDestroyed=!0)},this.handleOutsideConfirmationTags=function(e){var t=e.detail.photoRawId,i=e.detail.tagIds;o.items.filter((function(e){return e.getPhotoRawId()===t})).forEach((function(e){return e.setConfirmedTagsByIds(i)}))},this.handleOutsideDeclinationTags=function(e){var t=e.detail.photoRawId,i=e.detail.tagIds;o.items.filter((function(e){return e.getPhotoRawId()===t})).forEach((function(e){return e.setDeclinedTagsByIds(i)}))},this.handleOutsideDeletingTags=function(e){var t=e.detail.photoRawId,i=e.detail.tagIds;o.items.filter((function(e){return e.getPhotoRawId()===t})).forEach((function(e){return e.setDeletedTagsByIds(i)}))},this.next=function(){o.nextPhotoTimerId&&(clearTimeout(o.nextPhotoTimerId),o.nextPhotoTimerId=null),o.carousel.getActiveIdx()!==o.items.length-1?o.carousel.next():o.countConfirmedTags?o.showEndCard():(o.removeBlock(),o.showThanksNotification())},this.removeBlock=function(){o.destroy(),o.post.remove()},this.onPhotoChangeClick=function(){o.nextPhotoTimerId&&(clearTimeout(o.nextPhotoTimerId),o.nextPhotoTimerId=null),o.skipActiveItemTags()},this.updateBlockTitle=function(){if(o.titleEl){var e=o.carousel.getActive().getTitle();e&&(o.titleEl.innerHTML=e)}},this.hideHelpHintClick=function(e){o.hintHelpId&&o.hintHelpHash&&((0,u.cancelEvent)(e),window.ajax.post("al_index.php",{act:"help_hints_hide",hint_id:o.hintHelpId,hash:o.hintHelpHash},{onDone:function(){var e;null===(e=o.hintHelpPanel)||void 0===e||e.remove()},onFail:function(){return console.error("something wrong with help hint"),!0}}))},this.post=e,this.titleEl=e.querySelector(".PhotoRecognizeBlock__title");var i=e.querySelector(".PhotoRecognizeBlock__inner");if(!i)throw new Error("PhotoRecognizeBlock: there is not inner");this.trackCode=e.dataset.trackCode,this.hintHelpId=e.dataset.hintHelpId,this.hintHelpHash=e.dataset.hintHelpHash,this.innerWrapperEl=i,this.items=this.createItems(e),this.carousel=new r.PhotoCarousel(e,this.items,{onPrevClick:this.onPhotoChangeClick,onNextClick:this.onPhotoChangeClick,onChange:this.updateBlockTitle}),this.hintHelpPanel=e.querySelector(".PhotoRecognizeBlockHint"),this.helpHintPanelHideBtn=e.querySelector(".PhotoRecognizeBlockHint__hide"),this.initListeners(),this.initFirstItems(),null===(t=window.cur.destroy)||void 0===t||t.push(this.destroy),window.cur.pvOneSuggestHintId=e.dataset.hintAlertId,window.cur.pvOneSuggestHintHash=e.dataset.hintAlertHash,null==window.cur.pvNeedShowAlertForOneSuggest&&(window.cur.pvNeedShowAlertForOneSuggest=Boolean(Number(e.dataset.needShowAlert)))}return e.prototype.initListeners=function(){var e;document.addEventListener(l.TagEventTypes.CONFIRM_SUGGESTED_TAGS,this.handleOutsideConfirmationTags),document.addEventListener(l.TagEventTypes.DECLINE_SUGGESTED_TAGS,this.handleOutsideDeclinationTags),document.addEventListener(l.TagEventTypes.DELETE_TAG,this.handleOutsideDeletingTags),null===(e=this.helpHintPanelHideBtn)||void 0===e||e.addEventListener("click",this.hideHelpHintClick)},e.prototype.deInitListeners=function(){var e,t;null===(e=this.closeEl)||void 0===e||e.removeEventListener("click",this.removeBlock),null===(t=this.helpHintPanelHideBtn)||void 0===t||t.removeEventListener("click",this.hideHelpHintClick),document.removeEventListener(l.TagEventTypes.CONFIRM_SUGGESTED_TAGS,this.handleOutsideConfirmationTags),document.removeEventListener(l.TagEventTypes.DECLINE_SUGGESTED_TAGS,this.handleOutsideDeclinationTags),document.removeEventListener(l.TagEventTypes.DELETE_TAG,this.handleOutsideDeletingTags)},e.prototype.initFirstItems=function(){this.items.slice(0,i.NUMBER_INITIALIZED_PHOTO).forEach((function(e){return e.init()}))},e.prototype.createItems=function(e){var t=this;return Array.from(e.querySelectorAll("."+i.PHOTO_CAROUSEL_ITEM_CLASS)).map((function(e){return new n.PhotoRecognizeBlockItem(e,t)}))},e.prototype.nextWithDelay=function(){var e=this;this.nextPhotoTimerId||(this.nextPhotoTimerId=setTimeout((function(){e.nextPhotoTimerId=null,e.next()}),800))},e.prototype.incrementConfirmedCount=function(e){void 0===e&&(e=1),this.countConfirmedTags+=e},e.prototype.skipActiveItemTags=function(){this.carousel.getActive().skipTags()},e.prototype.showThanksNotification=function(){(0,s.showDoneBox)((0,d.getLang)("photo_recognition_thanks_notification"))},e.prototype.showEndCard=function(){var e,t=this.innerWrapperEl.parentElement;if(t){var o=this.getEndCardData(),i=(0,d.getLang)("photo_recognition_viewed_photos",this.items.length),n=o.subtitle||"",r=o.button,s=(0,a.se)('\n      <div class="PhotoRecognizeBlockEndCard">\n        <div class="PhotoRecognizeBlockEndCard__close"></div>\n        <div class="PhotoRecognizeBlockEndCard__title">'+i+'</div>\n        <div class="PhotoRecognizeBlockEndCard__subtitle">'+n+"</div>\n      </div>\n    ");if(r){var c=r.title,l=r.action.url,u=(0,a.se)('<a href="'+l+'" class="PhotoRecognizeBlockEndCard__action flat_button secondary">'+c+"</a>");s.appendChild(u)}this.closeEl=s.querySelector(".PhotoRecognizeBlockEndCard__close"),null===(e=this.closeEl)||void 0===e||e.addEventListener("click",this.removeBlock),t.appendChild(s),(0,a.hide)(this.innerWrapperEl),this.sendAnalytic("show_end_card")}},e.prototype.getEndCardData=function(){var e=this.post.getAttribute("data-end-card");return e?(0,c.parseJSON)(e):{}},e.prototype.sendAnalytic=function(e,t){void 0===t&&(t={}),(0,_.sendAnalytic)(e,this.trackCode,t)},e}()},642009:(e,t,o)=>{o.d(t,{PhotoRecognizeBlockItem:()=>m});var i,n=o(570655),r=o(213),s=o(491838),a=o(274642),c=o(873589),l=o(152278),d=o(66433),u=o(959115),_=o(275512),h=o(996885),p=o(70162),f=o(506770),g=o(13353),v=o(844142);!function(e){e[e.CONFIRMED=0]="CONFIRMED",e[e.DECLINED=1]="DECLINED",e[e.DELETED=2]="DELETED"}(i||(i={}));var m=function(e){function t(t,o){var n=e.call(this,t)||this;n.isLoading=!1,n.isSkipped=!1,n.onShowAllClick=function(e){n.showPhoto(e),n.sendAnalytic("show_tags")},n.onPhotoClick=function(e){e.ctrlKey||e.metaKey||(n.showPhoto(e),(0,l.cancelEvent)(e))},n.onConfirmClick=function(){if(!n.isLoading){var e=n.getTags();n.isLoading=!0,n.tagArea.confirmSuggestedTags(e,n,n.confirmBtn).then((function(){n.updatePhotoviewCache(!0),n.incrementConfirmedCount(e.length),n.showResultPanel(i.CONFIRMED),n.block.nextWithDelay()}),(function(e){e&&(0,d.logError)(e)})).finally((function(){n.isLoading=!1}))}},n.onDeclineClick=function(){n.isLoading||(n.isLoading=!0,n.tagArea.declineSuggestedTags(n.getTags(),n,n.declineBtn).then((function(){n.updatePhotoviewCache(!0),n.showResultPanel(i.DECLINED),n.block.nextWithDelay()})).finally((function(){n.isLoading=!1})))},n.onCancelClick=function(){n.cancelBtn&&(n.reset(),n.showSuggestPanel())},n.onNextClick=function(){n.skipTags(),n.block.next()};var r=t.dataset.tagHash||"";return n.block=o,n.type=Number(t.dataset.recognizeType),n.title=t.dataset.title,n.trackCode=t.dataset.trackCode||"",n.skipHash=t.dataset.skipHash||"",n.confirmBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--confirm"),n.declineBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--decline"),n.showAllBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--showTags"),n.nextBtn=t.querySelector(".PhotoRecognizeBlockItem__btn--next"),n.description=t.querySelector(".PhotoRecognizeBlockItem__description"),n.tagArea=new u.PhotoTagArea(n,r,n.trackCode),n.initListeners(),n}return(0,n.__extends)(t,e),t.prototype.destroy=function(){this.deInitListeners()},t.prototype.skipTags=function(){this.isSkipped||(this.isSkipped=!0,window.ajax.post("al_photos.php",{act:"skip_suggested_tags",tag_raw_ids:this.tagArea.getFullRawTagIdsStr(),photo_raw_id:this.getPhotoRawId(),track_code:this.trackCode,hash:this.skipHash},{onDone:function(){},onFail:function(e){return!!(0,f.partConfigEnabled)("recognize_mock_turn_off")&&e&&(0,d.logError)(e),!0}}))},t.prototype.initListeners=function(){var e,t,o,i,n;null===(e=this.confirmBtn)||void 0===e||e.addEventListener("click",this.onConfirmClick),null===(t=this.declineBtn)||void 0===t||t.addEventListener("click",this.onDeclineClick),null===(o=this.cancelBtn)||void 0===o||o.addEventListener("click",this.onDeclineClick),null===(i=this.showAllBtn)||void 0===i||i.addEventListener("click",this.onShowAllClick),null===(n=this.nextBtn)||void 0===n||n.addEventListener("click",this.onNextClick),this.photo.addEventListener("click",this.onPhotoClick)},t.prototype.deInitListeners=function(){var e,t,o,i,n;null===(e=this.confirmBtn)||void 0===e||e.removeEventListener("click",this.onConfirmClick),null===(t=this.declineBtn)||void 0===t||t.removeEventListener("click",this.onDeclineClick),null===(o=this.showAllBtn)||void 0===o||o.removeEventListener("click",this.onShowAllClick),null===(i=this.nextBtn)||void 0===i||i.removeEventListener("click",this.onNextClick),null===(n=this.cancelBtn)||void 0===n||n.removeEventListener("click",this.onCancelClick),this.photo.removeEventListener("click",this.onPhotoClick)},t.prototype.showPhoto=function(e){(0,a.showPhoto)(this.photoRawId,this.photoContext,this.photoViewOptions,e),this.updatePhotoviewCache()},t.prototype.updatePhotoviewCache=function(e){void 0===e&&(e=!1),this.photoViewOptions.noCache=e,e&&(0,h.dropPhotoCacheData)()},t.prototype.showResultPanel=function(e){var t;if(this.description){var o=this.getResultText(e);this.resultPanel||this.createResultPanel();var n=null===(t=this.resultPanel)||void 0===t?void 0:t.querySelector(".PhotoRecognizeBlockItem__resultMessage");if(!n||!this.resultPanel)throw new Error("PhotoRecognizeBlockItem: can not get text element");this.resultPanel.classList.toggle("PhotoRecognizeBlockItem__resultPanel--confirmed",e===i.CONFIRMED),n.innerHTML=o,(0,c.hide)(this.description),(0,c.show)(this.resultPanel)}},t.prototype.showSuggestPanel=function(){(0,c.hide)(this.resultPanel),(0,c.show)(this.description)},t.prototype.getResultText=function(e){var t=this.getOwnerId(),o=this.getConfirmedTags(),n=this.getTags()[0],r=n.getUserId(),a=n.getOwnerNameGenitive(),c=n.getUserNameAccusative(),l="";switch(e){case i.CONFIRMED:this.type===s.RecognizeItemType.ME?l=t===r?(0,p.getLang)("photo_recognition_confirm_me_on_my_photo"):(l=v.Ranges.isUserIdTransitional(t)?(0,p.getLang)("photo_recognition_confirm_myself_on_photo"):(0,p.getLang)("photo_recognition_confirm_myself_on_photo_group")).replace("{name}",a):this.type===s.RecognizeItemType.FRIEND?l=t===r?(0,p.getLang)("photo_recognition_confirm_on_photo").replace("{name}",a):(l=(l=v.Ranges.isUserIdTransitional(t)?(0,p.getLang)("photo_recognition_confirm_friend_on_photo"):(0,p.getLang)("photo_recognition_confirm_friend_on_photo_group")).replace("{name1}",c)).replace("{name2}",a):this.type===s.RecognizeItemType.ALL&&(l=(0,p.getLang)("photo_recognition_confirm_n_friends_on_photo",o.length));break;case i.DECLINED:l=this.type===s.RecognizeItemType.ALL?o.length?(0,p.getLang)("photo_recognition_confirm_n_friends_on_photo",o.length):(0,p.getLang)("photo_recognition_decline_n_friends_on_photo",o.length):(l=v.Ranges.isUserIdTransitional(t)?(0,p.getLang)("photo_recognition_decline_on_photo"):(0,p.getLang)("photo_recognition_decline_on_photo_group")).replace("{name}",a);break;default:l=(0,p.getLang)("photo_recognition_deleted_tag")}return l},t.prototype.createResultPanel=function(){this.resultPanel=document.createElement("div"),this.resultPanel.classList.add("PhotoRecognizeBlockItem__resultPanel");var e=document.createElement("span");e.classList.add("PhotoRecognizeBlockItem__resultMessage"),this.resultPanel.appendChild(e);var t=this.item.querySelector(".PhotoRecognizeBlockItem__footerWrapper");t&&t.appendChild(this.resultPanel)},t.prototype.setConfirmedTagsByIds=function(e){this.tagArea.setConfirmedTagsByIds(e)&&(this.showResultPanel(i.CONFIRMED),this.incrementConfirmedCount(e.length))},t.prototype.setDeclinedTagsByIds=function(e){this.tagArea.setDeclinedTagsByIds(e)&&this.showResultPanel(i.DECLINED)},t.prototype.setDeletedTagsByIds=function(e){this.tagArea.setDeclinedTagsByIds(e)&&this.showResultPanel(i.DELETED)},t.prototype.reset=function(){this.tagArea.reset()},t.prototype.getTitle=function(){return this.title},t.prototype.getTags=function(){return this.tagArea.getTags()},t.prototype.getConfirmedTags=function(){return this.tagArea.getConfirmedTags()},t.prototype.incrementConfirmedCount=function(e){void 0===e&&(e=1),this.block.incrementConfirmedCount(e)},t.prototype.init=function(){var t=this.item.getAttribute("data-photo-url");t&&(e.prototype.init.call(this),this.checkItemHasNoSizes()&&this.correctTagView(t))},t.prototype.checkItemHasNoSizes=function(){return this.item.classList.contains(_.PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS)},t.prototype.correctTagView=function(e){var t=this,o=new Image;o.onload=function(){var i=o.width,r=o.height;if(i&&r){var s=t.item.querySelector(".PhotoRecognizeBlockItem__photoFrame");if(!s)return;var a=(0,n.__read)(u.PhotoTagArea.calculateTagAreaSizes(s,i,r),2),c=a[0],l=a[1],d=t.item.querySelector("."+_.PHOTO_ELEMENT_CLASS);if(!d)return;var h=t.item.querySelector("."+_.PHOTO_NO_SIZE_ELEMENT_CLASS);h&&h.remove(),d.style.backgroundSize=c+"px "+l+"px",d.style.backgroundImage="url('"+e+"')";var p=c+1,f=l+1;t.tagArea.setSizes(p,f),t.tagArea.show(),t.item.classList.remove(_.PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS)}},o.src=e},t.prototype.sendAnalytic=function(e,t){void 0===t&&(t={}),(0,g.sendAnalytic)(e,this.trackCode,t)},t}(r.PhotoCarouselItem)},761635:(e,t,o)=>{o.d(t,{initPhotoBlockInPost:()=>a});var i=o(923374),n=o(275512),r=o(463343),s=o(66433);function a(e,t){var o=e.querySelector("."+n.PHOTO_CAROUSEL_CLASS);if(o)try{if(o.classList.contains("PhotoCarousel--recognize"))return new r.PhotoRecognizeBlock(e);var a={sendAnalytic:t};return new i.PhotoCarouselBlock(e,a)}catch(e){console.error(e),(0,s.logError)(e)}}},275512:(e,t,o)=>{o.d(t,{PHOTO_CAROUSEL_CLASS:()=>i,PHOTO_CAROUSEL_ITEM_CLASS:()=>n,PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS:()=>r,PHOTO_ELEMENT_CLASS:()=>s,PHOTO_NO_SIZE_ELEMENT_CLASS:()=>a,PHOTO_CAROUSEL_AVATAR_CLASS:()=>c,PHOTO_CAROUSEL_HIDE_BTN_CLASS:()=>l,NUMBER_INITIALIZED_PHOTO:()=>d});var i="PhotoCarousel",n="PhotoCarouselItem",r="PhotoCarouselItem--noSize",s="PhotoCarouselImage",a="PhotoCarouselItem__stub",c="PhotoCarouselBlockItem__avatar",l="PhotoCarousel__hidePost",d=4},13353:(e,t,o)=>{o.d(t,{sendAnalytic:()=>r});var i=o(570655),n=o(798262);function r(e,t,o){void 0===t&&(t=""),void 0===o&&(o={});var r=(0,i.__assign)({event_type:e,track_code:t},o);(0,n.statlogsValueEvent)("photo_recognition_stat",r)}},491838:(e,t,o)=>{var i;o.d(t,{RecognizeItemType:()=>i}),function(e){e[e.ME=1]="ME",e[e.FRIEND=2]="FRIEND",e[e.ALL=3]="ALL"}(i||(i={}))},936115:(e,t,o)=>{o.d(t,{initFeedRightBlocks:()=>d});var i=o(570655),n=o(785893),r=o(86894),s=o(659397),a=o(99656),c=o(515469),l=o(812317),d=function(e){e=(0,s.decodeHTMLEntitiesDeep)(e);var t=document.querySelector("#feed_right_blocks_root");(0,l.initReactApp)(t,(0,n.jsxs)(a.AppRootProvider,{children:[(0,n.jsx)(r.Spacing,{size:15},void 0),(0,n.jsx)(c.OwnersListPageBlock,(0,i.__assign)({},e),void 0)]},void 0))}},41189:(e,t,o)=>{var i;o.d(t,{BlockTypeIds:()=>i}),function(e){e.YoulaRecommendationsCarousel="block_youla-recommendations-carousel",e.AliExpressRecommendationsCarousel="block_aliexpress-recommendations-carousel",e.PhotoRecognize="tags_suggestions",e.RecommendedNarratives="recommended_narratives",e.BookmarkGame="bookmark_game",e.AchievementGame="achievement_game",e.VideosForYou="videos_for_you",e.VideoPostcard="video_postcard",e.UXPollBlock="uxpoll_block"}(i||(i={}))},23778:(e,t,o)=>{o.d(t,{feedLoadingStats:()=>s});var i=o(570655),n=o(506770),r=o(469129);function s(e){var t=e.is_skeleton_applicable,o=e.is_skeleton_rendered;return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,s,a,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(t||o)&&(0,n.partConfigEnabled)("feed_web_performance_stats")?[4,(0,r.getPerformanceStatsTools)({module:"feed"})]:[2];case 1:return(e=i.sent())?(s=e.storePerformanceStats,a=e.sendStoredPerformanceStats,c=e.PerformanceStatsEvent,l=e.AuxiliaryPerformanceStatsEvent,s(c.render_content),s({metricName:c.render_content_without_ttfb,basisMetricName:c.render_content,auxiliaryMetricName:l.TTFB}),o?(s(c.render_content_after_skeleton),s({metricName:c.render_content_after_skeleton_without_ttfb,basisMetricName:c.render_content_after_skeleton,auxiliaryMetricName:l.TTFB}),s({metricName:c.render_content_after_skeleton_without_skeleton,basisMetricName:c.render_content_after_skeleton,auxiliaryMetricName:c.render_skeleton})):(s(c.render),s({metricName:c.render_without_ttfb,basisMetricName:c.render,auxiliaryMetricName:l.TTFB})),a(),[2]):[2]}}))}))}},377782:(e,t,o)=>{o.d(t,{feedLogFilteredRow:()=>r});var i=o(171516),n=o(347675);function r(e){var t,o,r=e.filterReason,s=e.ref,a=e.row,c=e.rowsContainer,l=e.section,d={contentId:null===(t=a.firstElementChild)||void 0===t?void 0:t.id,feedRowsCount:c.childElementCount,filterReason:r,ref:s,rowFlags:(0,n.formatStringValueBooleans)([Boolean(null===(o=a.firstElementChild)||void 0===o?void 0:o.id),Boolean(a.firstElementChild)]),section:l};(0,i.saveStatlogEvents)({name:"feed_pagination_item_filtered",value:d})}},909456:(e,t,o)=>{o.d(t,{shouldFilterPaginatedRow:()=>s});var i=/^post(-?\d+_\d+)$/,n={shouldFilter:!1},r={shouldFilter:!0,filterReason:"empty"};function s(e){var t=e.row.firstElementChild;return t?function(e){var t=function(e){return!!e.id&&i.test(e.id)}(e),o=function(e){return!!e.id&&e.id.startsWith("feedback_row")}(e);if(!t&&!o)return n;if(!e.id||null===document.querySelector("#"+e.id))return n;return{shouldFilter:!0,filterReason:a({isNotification:o,isPost:t})}}(t):r}function a(e){return e.isNotification?"duplicate_notification":e.isPost?"duplicate_post":"duplicate_unknown"}},905998:(e,t,o)=>{o.d(t,{postsGetRaws:()=>s,isAutoplayAd:()=>a,isAdWithLongImpression:()=>c,isAdWithLongImpressionOnly:()=>l,isAdWithShowOff:()=>d,isElemViewable:()=>_});var i=o(352422),n=o(873589),r=o(342269),s=function(e){var t,o;if(!(e instanceof HTMLElement))return{};var i=(0,r.indexOf)((0,n.domPN)(e).children,e),s=e.firstElementChild;if(!(s instanceof HTMLElement))return{};for(;s&&s.id.startsWith("moat");)s=(0,n.domNS)(s);if(!(s instanceof HTMLElement))return{};var a,c,l,d=/^post(-?\d+_\d+)$/,u={};if("ads_feed_placeholder"===s.id)return u;var _=window.cur;u={module:_.module,index:i},"feed"==_.module&&("search"==_.section?(u.module="feed_search",u.q=_.q):"news"==_.section?u.module=_.subsection?"feed_news_"+_.subsection:"feed_news":"recommended"==_.section?u.module=_.subsection?"feed_recommended_"+_.subsection:"feed_recommended":"friends"==_.section?u.module=_.subsection?"feed_friends_"+_.subsection:"feed_friends":"groups"==_.section?u.module=_.subsection?"feed_groups_"+_.subsection:"feed_groups":"videos"==_.section?u.module=_.subsection?"feed_videos_"+_.subsection:"feed_videos":"photos"==_.section?u.module=_.subsection?"feed_photos_"+_.subsection:"feed_photos":"podcasts"==_.section?u.module=_.subsection?"feed_podcasts_"+_.subsection:"feed_podcasts":"list"==_.section?u.module=_.subsection?"feed_list_"+_.subsection:"feed_list":u.module="feed_other");var h=s.getAttribute("data-ad-view");h&&(u["ad_"+h]=1);var p=s.getAttribute("post_view_hash");if(p&&(u.hash=p),"block_"===s.id.substr(0,6)){u[s.id]=1,u.block=s.id.substr(6);var f=(0,n.attr)(s,"data-contain");f&&f.split(",").forEach((function(e){var t=e.split(":");u[t[0]]=(0,r.intval)(t[1])||1}))}else if(c=s.id.match(d))u[c[1]]=1;else if(c=s.id.match(/^post(adsite.*)$/))u[c[1]]=1;else if(c=(a=s.className).match(/feed_reposts_wrap(-?\d+_\d+)/)){if(l=(0,n.domFC)(s),(0,n.hasClass)((0,n.domFC)(l),"post_copy")&&(u[c[1]]=-1),(c=(0,n.domFC)(l).id.match(d))&&(u[c[1]]=1),(0,n.isVisible)(l=(0,n.domNS)(l)))for(l=(0,n.domFC)(l);l;l=(0,n.domNS)(l))(c=l.id.match(d))&&(u[c[1]]=1)}else if(c=a.match(/feed_repost(-?\d+_\d+)/)){if(!(l=(0,n.domFC)(s)))return u;(0,n.hasClass)(l,"post_copy")&&(u[c[1]]=-1),(c=l.id.match(d))&&(u[c[1]]=1)}else{var g=s.id;if((0,n.hasClass)(s,"post_photos")){var v=null===(o=null===(t=null==(l=(0,n.geByClass1)("post_image",s,"a"))?void 0:l.querySelector)||void 0===t?void 0:t.call(l,"[data-post-id]"))||void 0===o?void 0:o.getAttribute("data-post-id");v&&(c=v.match(/^(-?\d+_p?\d+)$/))&&(g=c[1])}u[g]=1}return u},a=function(e){var t=e&&(0,n.domFC)(e);return t&&t.hasAttribute("data-ad-video-autoplay")},c=function(e){var t=e&&(0,n.domFC)(e);return t&&(t.hasAttribute("data-ad-stat-impression_long")||t.hasAttribute("data-ad-disabled-stat-impression_long"))},l=function(e){var t=e&&(0,n.domFC)(e);return t&&t.hasAttribute("data-ad-views-long-only")},d=function(e){var t=e&&(0,n.domFC)(e);return t&&t.hasAttribute("data-ad-stat-show_off")},u=(0,i.memoizeFirstTruthy)((function(){return(0,n.ge)("page_header").offsetHeight})),_=function(e,t,o,i){var n=u(),r=o+n,s=o+i,a=e.offsetHeight,c=e.offsetTop+n,l=c+a;return(l>r&&c<s?(Math.min(s,l)-Math.max(r,c))/a:0)>=t}},596195:(e,t,o)=>{o.d(t,{initCheckValidationPhone:()=>_});var i=o(785893),n=o(973935),r=o(261508),s=o(997109),a=o(593227),c=o(501389),l=o(506770),d=o(508801),u=o(568806),_=function(){var e="CheckValidationPhone";(0,r.registerReactApplication)(e,(function(){var t=(0,r.getReactRootEl)(e);if(t){var o=(0,l.partConfigEnabled)("vkc_cvp_non_intersection")?(0,i.jsx)(d.CheckValidationPhone,{app_id:a.AuthAppId.VK,preventCheck:function(){return(0,c.curBox)()}},void 0):(0,i.jsx)(u.CheckValidationPhoneFallback,{app_id:a.AuthAppId.VK,isValidModule:!0},void 0);n.render(o,t),(0,s.pushNavDestroy)((function(){n.unmountComponentAtNode(t)}))}}))}},347675:(e,t,o)=>{function i(e){return e.map((function(e){return e?"1":"0"})).join("_")}o.d(t,{formatStringValueBooleans:()=>i})},465864:(e,t,o)=>{o.d(t,{parseLikeObjectId:()=>n,likePostObjectId:()=>r,likeReplyObjectId:()=>s,getElementLikeButtonCount:()=>a,getElementLikeButtonIcon:()=>c,getElementLikeButtonLabel:()=>l});var i=o(570655);function n(e){var t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;var o=(0,i.__read)(t,3);return{objectType:o[1],objectId:o[2]}}var r=function(e){return"wall"+e},s=function(e){return"wall_reply"+e},a=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_count, ._like_button_count"))&&void 0!==t?t:void 0},c=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_icon, ._like_button_icon"))&&void 0!==t?t:void 0},l=function(e){var t;return null!==(t=e.querySelector(".like_button_label, ._like_button_label"))&&void 0!==t?t:void 0}},325698:(e,t,o)=>{o.d(t,{LikeButtonTypes:()=>i});var i={like:"like",share:"share",views:"views",comment:"comment"}},16850:(e,t,o)=>{function i(e){var t,o;if(null!==(o=t=e)&&"object"==typeof o&&("queue"in t||"key"in t&&"string"==typeof t.key))return e.queue||e.key}o.d(t,{subscriptionObjectStableId:()=>i})},42479:(e,t,o)=>{o.d(t,{getRef:()=>a,friendsRecommLogSave:()=>c,friendsRecommLogGet:()=>l,friendsRecommLogClear:()=>d,friendsRecommLogAddVisited:()=>u,friendsRecommLogCheckVisited:()=>_,friendsRecommLogSend:()=>h,friendsRecommLogOnFail:()=>f,friendsRecommGetTrackCode:()=>g,onViewFriendRecomm:()=>v});var i=o(15305),n=o(342269),r=o(514191),s=o(873589),a=function(){var e;return"feed"===window.cur.module&&window.Feed?null===(e=window.Feed)||void 0===e?void 0:e.getModuleRef():window.cur.module};function c(e,t){void 0===t&&(t=!1);var o=l();o.push(e),i.ls.set("friends_recomm",o),h(t)}function l(e,t,o){void 0===e&&(e=!1),void 0===o&&(o=!1);var r=i.ls.get("friends_recomm"),s=Array.isArray(r)?r:[];return t&&(s=s.filter((function(e){return(o?e[1]!==t:e[1]===t)&&(0,n.inArray)(e[0],["show_user_rec","open_user"])}))),e&&(s=s.map((function(e){return e.join("|")}))),s}function d(e){if(e){var t=l(!1,e,!0);t.length?i.ls.set("friends_recomm",t):i.ls.remove("friends_recomm")}else i.ls.remove("friends_recomm");!function(e){if(e){var t=i.ls.get("friends_recomm_visited")||{};delete t[e],i.ls.set("friends_recomm_visited",t)}else i.ls.remove("friends_recomm_visited")}(e)}function u(e,t,o){var n=i.ls.get("friends_recomm_visited")||{};n[e]={ref:t,trackCode:o},i.ls.set("friends_recomm_visited",n)}function _(e){return(i.ls.get("friends_recomm_visited")||{})[e]}function h(e){var t,o;void 0===e&&(e=!1),!(null===(t=window.cur)||void 0===t?void 0:t.friendsRecommLogIdle)&&(null===(o=null===window||void 0===window?void 0:window.curNotifier)||void 0===o?void 0:o.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=function(){clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(h)),clearTimeout(window.cur.friendsRecommLog),e?p():window.cur.friendsRecommLog=window.setTimeout(p,1e4)}function p(){if(!window.cur.friendsRecommProcess){var e=l(!0);e.length&&(window.cur.friendsRecommProcess=!0,d(),r.ajax.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:function(){delete window.cur.friendsRecommProcess},onFail:function(){return f(e),delete window.cur.friendsRecommProcess,!0}}))}}function f(e){var t=l();t=e.map((function(e){return e.split("|")})).concat(t),i.ls.set("friends_recomm",t)}function g(e){var t,o=(0,s.domData)(e,"code");return o||(t=(0,s.gpeByClass)("ui_gallery",e),o=(0,s.domData)(t,"code")),o||""}function v(e,t,o){if(!e.viewed&&(0,s.hasClass)(e,"ui_gallery_item")){var i=+(0,s.domData)(e,"uid"),n=a(),r=g(e);c(["show_user_rec",i,Date.now(),t,n,o,r]),e.viewed=!0}}},173801:(e,t,o)=>{o.d(t,{feedInitialViewRecommendedGroupsTrigger:()=>n,blockInstanceSetForFeedRowContent:()=>r});var i=o(660080);function n(e){var t=e.querySelector(".js-feed_groups_recomm"),o=e.querySelector(".ui_gallery");if(t&&o){var n,r=o.getAttribute("data-code")||"",s=null!==(n=t.__RecommendedGroups)&&void 0!==n?n:void 0;if(s){s.viewBlock(r);var a=(0,i.uiGetGallery)(o);a&&a.getVisibleItems().forEach((function(e){s.onViewGroup(e[0])})),o.visible=!0}else console.error(new Error("RecommendedGroups: missing block instance"),t,o)}else console.error(new Error("RecommendedGroups: missing block container for view"),t,o)}function r(e,t){e.__RecommendedGroups=t}},560717:(e,t,o)=>{o.d(t,{highlightModule:()=>d});var i,n,r=o(743469),s=o(549357),a=o(927766),c=o(873589),l=o(997109);function d(e){var t=document.getElementById(e.module);if(t&&t.classList.contains("module")){window.cur.__narrowBarForceNotFixed=!0;var o=e.speed?e.speed:300;(0,a.scrollToY)((0,c.getXY)(t)[1]-100,o);var d=function(){i&&(i.hideTT(),(0,a.enableBodyScroll)(),delete window.cur.__narrowBarForceNotFixed,(0,s.updateNarrow)(),e.onClose&&e.onClose())};(i=new r.default(t,e.text,{highlight:!0,width:250,offset:[0,-17],side:"bottom",withCloseButton:!0,onBGClick:d,onCloseButtonClick:d})).show(),(0,a.disableBodyScroll)(),e.autoCancelDelay&&(n=setTimeout((function(){d(),n=null}),e.autoCancelDelay),(0,l.pushNavDestroy)((function(){n&&clearTimeout(n)})))}}},310568:(e,t,o)=>{var i;o.d(t,{PhotoTag:()=>n}),function(e){e[e.Initial=0]="Initial",e[e.Confirmed=1]="Confirmed",e[e.Declined=2]="Declined"}(i||(i={}));var n=function(){function e(e,t){this.tagEl=e,this.tagArea=t;var o=e.getAttribute("data-item");if(!o)throw new Error("Tag: incorrect json data");var n=JSON.parse(o);this.id=Number(n.id),this.userId=n.userId,this.name=n.name,this.nameGenitive=n.nameGenitive,this.ownerNameGenitive=n.ownerNameGenitive,this.placerNameGenitive=n.placerNameGenitive,this.nameAccusative=n.nameAccusative,this.isSuggested=Boolean(n.isSuggested),this.sex=Number(n.sex),this.styles={top:n.top,left:n.left,width:n.width,height:n.height};var r=i.Initial;e.classList.contains("PhotoTag--confirm")?r=i.Confirmed:e.classList.contains("PhotoTag--decline")&&(r=i.Declined),this.state=r;var s="tag_cutout"+t.getPhotoRawId()+"_"+n.userId,a=document.getElementById(s);if(!a)throw new Error("Tag: incorrect data");this.cutoutEl=a}return e.prototype.decline=function(){this.tagEl.classList.remove("PhotoTag--confirm"),this.tagEl.classList.add("PhotoTag--decline"),this.cutoutEl.classList.remove("PhotoTagCutout--transparency"),this.state=i.Declined},e.prototype.confirm=function(){this.tagEl.classList.remove("PhotoTag--decline"),this.tagEl.classList.add("PhotoTag--confirm"),this.cutoutEl.classList.add("PhotoTagCutout--transparency"),this.state=i.Confirmed},e.prototype.reset=function(){this.tagEl.classList.remove("PhotoTag--decline"),this.tagEl.classList.remove("PhotoTag--confirm"),this.cutoutEl.classList.remove("PhotoTagCutout--transparency"),this.state=i.Initial},e.prototype.getFullRawId=function(){return this.tagArea.getPhotoRawId()+"_"+this.getId()},e.prototype.getId=function(){return this.id},e.prototype.getUserId=function(){return this.userId},e.prototype.getUserName=function(){return this.name},e.prototype.getUserNameGenitive=function(){return this.nameGenitive},e.prototype.getUserNameAccusative=function(){return this.nameAccusative},e.prototype.getOwnerNameGenitive=function(){return this.ownerNameGenitive},e.prototype.getPlacerNameGenitive=function(){return this.placerNameGenitive},e.prototype.isConfirmed=function(){return this.state===i.Confirmed},e.prototype.getSex=function(){return this.sex},e}()},959115:(e,t,o)=>{o.d(t,{PhotoTagArea:()=>d});var i=o(310568),n=o(897449),r=o(506770),s=o(501389),a=o(70162),c=o(146143),l=o(365931),d=function(){function e(e,t,o){var c=this;this.confirmTag=function(e,t,o){o&&(0,n.lockButton)(o);var i=!(0,r.partConfigEnabled)("recognize_mock_turn_off");return new Promise((function(r,l){window.ajax.post("al_photos.php",{act:"confirm_tag",photo:t.getPhotoRawId(),tag:e.getId(),hash:c.tagHash},{onDone:function(){c.setConfirmedTags([e]),c.decrementLeftMenuCounterIfNeeded([e]),r()},onFail:function(){return i?(c.setConfirmedTags([e]),r(),!0):((0,s.showDoneBox)((0,a.getLang)("global_unknown_error")),l(),!0)},hideProgress:function(){o&&(0,n.unlockButton)(o)}})}))},this.declineTag=function(e,t,o){return new Promise((function(i,l){o&&(0,n.lockButton)(o);var d=!(0,r.partConfigEnabled)("recognize_mock_turn_off");window.ajax.post("al_photos.php",{act:"delete_tag",photo:t.getPhotoRawId(),tag:e.getId(),hash:c.tagHash},{onDone:function(){c.setDeclinedTags([e]),c.decrementLeftMenuCounterIfNeeded([e]),i()},onFail:function(){return d?(c.setDeclinedTags([e]),i(),!0):((0,s.showDoneBox)((0,a.getLang)("global_unknown_error")),l(),!0)},hideProgress:function(){o&&(0,n.unlockButton)(o)}})}))},this.confirmSuggestedTags=function(e,t,o){return c.showConfirmAlertBoxIfNeeded(e).then((function(){o&&(0,n.lockButton)(o);var t=!(0,r.partConfigEnabled)("recognize_mock_turn_off");return new Promise((function(i,r){window.ajax.post("al_photos.php",{act:"confirm_suggested_tags",tag_raw_ids:c.getFullRawTagIdsStr(e),track_code:c.trackCode,hash:c.tagHash},{onDone:function(){c.setConfirmedTags(e),c.decrementLeftMenuCounterIfNeeded(e),i()},onFail:function(){return t?(c.setConfirmedTags(e),i(),!0):((0,s.showDoneBox)((0,a.getLang)("global_unknown_error")),r(),!0)},hideProgress:function(){o&&(0,n.unlockButton)(o)}})}))}))},this.declineSuggestedTags=function(e,t,o){return new Promise((function(t,i){o&&(0,n.lockButton)(o);var l=!(0,r.partConfigEnabled)("recognize_mock_turn_off");window.ajax.post("al_photos.php",{act:"decline_suggested_tags",tag_raw_ids:c.getFullRawTagIdsStr(e),track_code:c.trackCode,hash:c.tagHash},{onDone:function(){c.setDeclinedTags(e),c.decrementLeftMenuCounterIfNeeded(e),t()},onFail:function(){return l?(c.setDeclinedTags(e),t(),!0):((0,s.showDoneBox)((0,a.getLang)("global_unknown_error")),i(),!0)},hideProgress:function(){o&&(0,n.unlockButton)(o)}})}))};var l=e.getEl().querySelector(".PhotoTagArea");if(!l)throw new Error("error: there is not tag area el");if(!t)throw new Error("error: there is not tag hash");var d=Array.from(e.getEl().querySelectorAll(".PhotoTag"));this.trackCode=o,this.tagArea=l,this.tagHash=t,this.photoEntity=e,this.tags=d.map((function(e){return new i.PhotoTag(e,c)})),this.tagsMap=this.tags.reduce((function(e,t){return e[t.getId()]=t,e}),{})}return e.prototype.showConfirmAlertBoxIfNeeded=function(e){var t=this,o=e[0];return new Promise((function(e,i){if(window.cur.pvNeedShowAlertForOneSuggest&&o.getUserId()!==window.vk.id)var n=(0,a.getLang)("photo_recognition_one_tag_alert"),r=(0,a.langSex)(o.getSex(),(0,a.getLang)("photo_recognition_one_tag_alert_text","raw")).replace("{name}",o.getUserName()),s=(0,c.showFastBox)(n,r,(0,a.getLang)("photo_recognition_one_friend_submit_btn"),(function(){t.hideHint(),s.hide(),e()}),(0,a.getLang)("global_cancel"),(function(){s.hide(),i()}));else e()}))},e.prototype.hideHint=function(){window.cur.pvNeedShowAlertForOneSuggest=!1;var e=window.cur.pvOneSuggestHintId,t=window.cur.pvOneSuggestHintHash;e&&t&&window.ajax.post("al_index.php",{act:"help_hints_hide",hint_id:e,hash:t},{onDone:function(){},onFail:function(){return console.error("something wrong with help hint"),!0}})},e.prototype.decrementLeftMenuCounterIfNeeded=function(e){e.forEach((function(e){e.getUserId()===window.vk.id&&(0,l.decrementLeftMenuPhotoCounter)()}))},e.prototype.getFullRawTagIdsStr=function(e){return void 0===e&&(e=this.tags),e.reduce((function(e,t,o){return e+(0===o?"":",")+t.getFullRawId()}),"")},e.prototype.setConfirmedTagsByIds=function(e){var t=this,o=e.reduce((function(e,o){return t.tagsMap[o]&&e.push(t.tagsMap[o]),e}),[]);return!!o.length&&(this.setConfirmedTags(o),!0)},e.prototype.setConfirmedTags=function(e){var t=this;(e=e.filter((function(e){return t.tagsMap[e.getId()]}))).length&&(e.forEach((function(e){return e.confirm()})),this.tagArea.classList.add("PhotoTagArea--fade"))},e.prototype.setDeclinedTags=function(e){e.forEach((function(e){return e.decline()}))},e.prototype.setDeclinedTagsByIds=function(e){var t=this,o=e.reduce((function(e,o){return t.tagsMap[o]&&e.push(t.tagsMap[o]),e}),[]);return!!o.length&&(this.setDeclinedTags(o),!0)},e.prototype.reset=function(){this.tagArea.classList.remove("PhotoTagArea--fade"),this.tags.forEach((function(e){return e.reset()}))},e.prototype.getPhotoRawId=function(){return this.photoEntity.getPhotoRawId()},e.prototype.getTags=function(){return this.tags},e.prototype.getConfirmedTags=function(){return this.tags.filter((function(e){return e.isConfirmed()}))},e.prototype.setSizes=function(e,t){this.tagArea.style.width=e+"px",this.tagArea.style.height=t+"px"},e.prototype.show=function(){this.tagArea.classList.remove("PhotoTagArea--hide")},e.calculateTagAreaSizes=function(e,t,o){var i,n,r=e.offsetWidth,s=e.offsetHeight,a=t/o,c=!0;return r/s>a&&(c=!1),c?(i=Math.round(Math.min(t,r)),n=Math.round(i/a)):(n=Math.round(Math.min(o,s)),i=Math.round(n*a)),[i,n]},e}()},365931:(e,t,o)=>{o.d(t,{decrementLeftMenuPhotoCounter:()=>a});var i=o(342269),n=o(66433),r=o(101178),s="ph";function a(e){void 0===e&&(e=1);try{var t=function(){var e=document.getElementById("l_ph");if(!e)throw new Error("There is not photo left menu item");var t=e.querySelector(".left_count");return t?(0,i.intval)(t.textContent):0}();(0,r.handlePageCount)(s,Math.max(t-e,0))}catch(e){console.error(e),(0,n.logError)(e)}}},123251:(e,t,o)=>{var i;o.d(t,{TagEventTypes:()=>i}),function(e){e.CONFIRM_SUGGESTED_TAGS="CONFIRM_SUGGESTED_TAGS",e.DECLINE_SUGGESTED_TAGS="DECLINE_SUGGESTED_TAGS",e.DECLINE_USER_TAG="DECLINE_USER_TAG",e.CONFIRM_USER_TAG="CONFIRM_USER_TAG",e.DELETE_TAG="DELETE_TAG"}(i||(i={}))},856901:(e,t,o)=>{o.d(t,{PROFILE_MEDIA_NARROW_BLOCK_ID:()=>i});var i="profile_media_narrow_block"},908706:(e,t,o)=>{o.d(t,{isVariantInActionStatusBar:()=>n,isVariantHidden:()=>r,previewVisibilityUseCurrent:()=>s,isIntentPreviewInActionStatusBar:()=>a,isIntentPreviewHidden:()=>c,isIntentPreviewUseCurrent:()=>l,previewVisibilityIntentForVariant:()=>d,parsePreviewVariant:()=>u});var i=o(404608),n=function(e){return e===i.PreviewVariantActionStatusBar},r=function(e){return e===i.PreviewVariantHidden},s={kind:"useCurrent"},a=function(e){return e.kind===i.PreviewVariantActionStatusBar},c=function(e){return e.kind===i.PreviewVariantHidden},l=function(e){return"useCurrent"===e.kind},d=function(e){return e?{kind:e}:s},u=function(e){return i.PreviewVariants.includes(e)?e:void 0}},404608:(e,t,o)=>{o.d(t,{PreviewVariantActionStatusBar:()=>i,PreviewVariantHidden:()=>n,PreviewVariants:()=>r});var i="action_status_bar",n="hidden",r=[i,n]},95146:(e,t,o)=>{o.d(t,{SUPPORTED_OBJECT_TYPES:()=>i,SIZE_32:()=>n,SIZE_40:()=>r,SIZE_96:()=>s,SIZE_128:()=>a,REACTIONS_COUNTS_RESPONSE_FIELD:()=>c,WK_SECTION_PREFIX_REACTIONS:()=>l});var i={wall:"wall",wall_reply:"wall_reply"},n={width:32,height:32},r={width:40,height:40},s={width:96,height:96},a={width:128,height:128},c="reactions_counts",l="reactions"},485207:(e,t,o)=>{o.d(t,{isDebugEnabled:()=>i.isDebugEnabled,ENABLED_IN_POST_REPLY:()=>n});var i=o(464746),n=!1},582982:(e,t,o)=>{o.d(t,{reactionLogError:()=>r});var i=o(82701),n=o(385667),r=function(e){var t,o=e.error,r=(0,n.getReactionConfig)(),s=null!==(t=null==r?void 0:r.reportJsErrors)&&void 0!==t&&t;(0,i.reactionLogError)({error:o,reportError:s})}},385667:(e,t,o)=>{o.d(t,{storageAddSets:()=>_,getReactionSet:()=>h,storageSetConfig:()=>p,getReactionConfig:()=>f});var i=o(570655),n=o(659397),r=o(517760),s=o(419223),a=o(582982),c=o(95146),l=o(485207),d=(0,s.makeSharedState)("reactions-storage",(function(){return new Map}),{version:0}),u=(0,s.makeSharedState)("reactions-config",(function(){return{config:void 0}}),{version:0}),_=function(e){(0,l.isDebugEnabled)()&&console.log(e),Object.entries(e).forEach((function(e){var t=(0,i.__read)(e,2),o=t[0],s=t[1],l=(0,r.validateReactionSetPayloaditems)(s,o);if(l)(0,a.reactionLogError)({error:l.error});else{var u=s.map((function(e){return(0,i.__assign)((0,i.__assign)({},e),{title:(0,n.decodeHTMLEntities)(e.title)})}));d().set(o,(0,r.prepareReactionMenuSet)(o,u,{imageMenuSize:c.SIZE_96,imagePreviewSize:c.SIZE_32,imageStoryPanelSize:c.SIZE_128,imageStoryPreviewSize:c.SIZE_40}))}}))},h=function(e){var t=d().get(e);if(t)return t;var o=new Error("Reaction set not found: "+e);(0,a.reactionLogError)({error:o})},p=function(e){(0,l.isDebugEnabled)()&&console.log(e);var t=(0,r.parseReactionMenuConfig)(e);t?u().config=t:console.warn("Reactions: invalid menu config passed",e)},f=function(){var e;return null===(e=u())||void 0===e?void 0:e.config}},507794:(e,t,o)=>{o.d(t,{getReactionsButtonPostTemplate:()=>u,getReactionsButtonReplyTemplate:()=>_,likeDataReactionsFields:()=>f});var i=o(506770),n=o(873589),r=o(95146),s=o(385667),a=o(517760),c=o(714396),l=function(e,t){var o,i=null===(o=function(e){try{var t=JSON.parse(e);if(null!==t&&"object"!=typeof t)return;return t}catch(e){return}}(e))||void 0===o?void 0:o.set_id,r="string"==typeof i?i:void 0;if(t&&r){var c=(0,s.getReactionSet)(r);if(c)return{likeClassName:"like_btn--hidden PostBottomAction--hidden",template:(0,n.rs)(t,{reactions_button_title:(0,a.getDefaultReactionTitle)(c)||"",reactions_set_id:r})}}},d=function(e,t){return t.length>e},u=function(e,t){var o,i=null===(o=null==t?void 0:t.wallTpl)||void 0===o?void 0:o.post_likes_reactions,n=d(14,e)?e[14]:void 0;if("string"==typeof n)return l(n,i)},_=function(e,t){var o,n=null===(o=null==t?void 0:t.wallTpl)||void 0===o?void 0:o.reply_likes_reactions;if((0,i.partConfigEnabled)("reactions_enabled_post_replies")){var r=d(14,e)?e[14]:void 0;if("string"==typeof r)return l(r,n)}},h=function(e){var t=JSON.parse(e);if(null===t||"object"==typeof t||Array.isArray(t)){var o;if(Array.isArray(t))t=(0,c.reactionCountsBrandWrap)((o=t,Object.assign({},o)));return t}},p=function(e){var t=d(5,e)?e[5]:void 0;if("string"==typeof t){var o=function(e){var t=e.indexOf(";"),o=e.substr(0,t),i=e.substr(t+1);if("1"===o)return h(i)}(t);if(o)return{counts:o}}},f=function(e){var t,o=p(e);return(t={})[r.REACTIONS_COUNTS_RESPONSE_FIELD]=null==o?void 0:o.counts,t}},665872:(e,t,o)=>{o.d(t,{reactionsCountsUpdatePayload:()=>r,isReactionsFullUpdatePayload:()=>s,reactionsCountsOnlyUpdatePayload:()=>a});var i=o(570655),n=o(571904),r=function(e,t){return(0,i.__assign)((0,i.__assign)({kind:n.PayloadKindFull},e),{reactionIdState:{reactionId:t.id}})},s=function(e){return e.kind===n.PayloadKindFull},a=function(e){return(0,i.__assign)({kind:n.PayloadKindCountsOnly},e)}},571904:(e,t,o)=>{o.d(t,{PayloadKindCountsOnly:()=>i,PayloadKindFull:()=>n});var i="counts_only",n="counts_with_current_reaction"},107337:(e,t,o)=>{o.d(t,{triggerReactionsUpdate:()=>a});var i=o(465864),n=o(95146),r=o(453580),s=o(665872),a=function(e,t,o,a){var c=(0,i.parseLikeObjectId)(e);c&&c.objectType===n.SUPPORTED_OBJECT_TYPES.wall&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.post_reactions_counts_update,function(e,t,o,i){var n={counts:e,isFromWkLayer:null==t?void 0:t.isFromWkLayer,isPrimaryLikeButtonClick:null==t?void 0:t.isPrimaryLikeButtonClick,isQueueUpdate:null==t?void 0:t.isQueueUpdate,isUserAction:t.isUserAction,postFullId:o.objectId,previewVisibility:t.previewVisibility,reactionIdState:i?{reactionId:i.id}:void 0,suggestSubscribe:t.suggestSubscribe};return i?(0,s.reactionsCountsUpdatePayload)(n,i):(0,s.reactionsCountsOnlyUpdatePayload)(n)}(t,a,c,o)):c&&c.objectType===n.SUPPORTED_OBJECT_TYPES.wall_reply&&c.objectId?(0,r.emitEvent)(r.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:c.objectId,reactionIdState:o?{reactionId:o.id}:void 0}):console.warn("Unsupported reactions object update",e)}},348230:(e,t,o)=>{o.d(t,{getBoxLayerWrap:()=>d,showLoader:()=>u,hideLoader:()=>_,getPurchaseResult:()=>h,updateStickersFromQueue:()=>p,getLangCode:()=>f});var i=o(608021),n=o(70162),r=o(511417),s=o(873589),a=o(501389),c=o(749091);function l(){return document.querySelector("#box_loader")}function d(){return document.querySelector("#box_layer_wrap")}function u(){var e=l();(0,a.boxRefreshCoords)(e),(0,s.show)(e),(0,s.show)(d())}function _(){(0,s.hide)(l())}function h(e){var t=new c.ProductsByType(e.items.filter((function(e){return!e.error})).map((function(e){return e.product}))),o=t.getPack(),r=t.getStyles();if(o)return r.length?(0,i.langStr)((0,n.getLang)("purchases_stickers_purchase_result_pack_and_styles",r.length),"pack_title",o.title,"n",r.length):(0,i.langStr)((0,n.getLang)("purchases_stickers_purchase_result_pack"),"title",o.title);if(r.length)switch(r.length){case 1:return(0,i.langStr)((0,n.getLang)("purchases_stickers_purchase_result_1_style"),"title",r[0].title);case 2:return(0,i.langStr)((0,n.getLang)("purchases_stickers_purchase_result_2_styles"),"title1",r[0].title,"title2",r[1].title);case 3:return(0,i.langStr)((0,n.getLang)("purchases_stickers_purchase_result_3_styles"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);case 4:return(0,i.langStr)((0,n.getLang)("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);default:var s=r.length-3;return(0,i.langStr)((0,n.getLang)("purchases_stickers_purchase_result_3_styles_and_n_more",s),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title,"n",s)}return null}function p(e){var t,o;t=e,o=r.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light",t.querySelectorAll(".sticker_img["+o+"]").forEach((function(e){var t=e.getAttribute(o);t&&(e.src=t)}))}var f=function(){return window.vk.lang||"ru"}},652745:(e,t,o)=>{o.d(t,{prepareStoriesForPublishing:()=>h,updateNarrativeBlock:()=>p,highlightNarrativeBlock:()=>f,updateNarrativeSnippetsFromQueueByPost:()=>g});var i=o(873589),n=o(501389),r=o(560717),s=o(70162),a=o(733164),c=o(856901),l=o(533228),d=o(66433),u=o(506770),_=o(844142);function h(e){return e.map((function(e){return e.id})).join(",")}function p(e){void 0===e&&(e=!1);var t=(0,a.intval)(window.cur.oid);if(window.cur.narrativeBlock)window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:t},{onDone:function(e){var t=(0,a.intval)(window.cur.oid),o=document.getElementById("narratives_module"+t+"_wrapper");if(o)if(e)(0,i.domReplaceEl)(o,e),window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new window.NarrativeBlock);else{var n=o.parentElement;(null==n?void 0:n.children.length)&&(null==n?void 0:n.children.length)>1?o.remove():null==n||n.remove(),window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),delete window.cur.narrativeBlock}(0,l.removeStoryList)("narratives"+t)}});else if(_.Ranges.isUserId(t)&&"profile"===window.cur.module){var o=document.getElementById(c.PROFILE_MEDIA_NARROW_BLOCK_ID),r=!o;window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:t,need_wrap_block:(0,a.intval)(r)},{onDone:function(e){if(o)o.insertAdjacentHTML("afterbegin",e);else{var i=document.getElementById("narrow_column");if(!i)return;i.insertAdjacentHTML("beforeend",e)}window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new window.NarrativeBlock,window.cur.narrativeBlock.showOnboardTooltipIfNeeded()),(0,l.removeStoryList)("narratives"+t)}})}else e&&function(e){window.boxQueue.hideAll();var t=document.querySelector("#box_layer_wrap"),o=document.querySelector("#box_loader");window.nav.reload({onDone:function(){e&&e()},showProgress:function(){(0,i.show)(t),(0,i.show)(o),(0,n.boxRefreshCoords)(o)},hideProgress:function(){(0,i.hide)(t),(0,i.hide)(o)}})}((function(){window.cur.needNarrativeOnboard=!0}))}function f(e){if(e){var t="narratives_module"+window.vk.id;(0,r.highlightModule)({module:t,text:(0,s.getLang)("stories_narrative_block_onboarding_text"),onClose:function(){delete window.cur.needNarrativeOnboard,window.ajax.post("al_index.php",{act:"hide_feature_tt",hash:e,type:"profile_narrative"})},autoCancelDelay:1e4,speed:600})}}function g(e){if(window.vk.id&&(0,u.partConfigEnabled)("update_private_snippets_by_queue")){var t=Array.from(e.querySelectorAll(".NarrativeSnippet"));if(t.length){var o=[];t.forEach((function(e){if(window.vk.id&&e.dataset.needUpdate){var t=e.dataset.narrativeRawId;t&&o.push({narrative_raw_id:t,snippet_type:e.dataset.snippetType,from:e.dataset.from})}})),o.length&&window.ajax.post("al_stories.php",{act:"get_narrative_snippets",narrative_snippets:JSON.stringify(o)},{onDone:function(e){t.forEach((function(t){t.dataset.narrativeRawId&&e[t.dataset.narrativeRawId]&&(t.outerHTML=e[t.dataset.narrativeRawId])}))},onFail:function(){return(0,d.logError)(new Error("Fail: updateNarrativeSnippetFromQueueByPost")),!0}})}}}},533228:(e,t,o)=>{o.d(t,{getVolume:()=>c,setVolume:()=>l,getStoryList:()=>d,removeStoryList:()=>u,preloadDiscoverList:()=>_,fetchDiscover:()=>h,isDiscoverLoading:()=>p,getStoryBlockKey:()=>f,createUserStackMaskIfNeeded:()=>g,isNewDesignEnabled:()=>v});var i=o(570655),n=o(341319),r=o(873589),s=o(506770),a=o(997109);function c(){var e=window.ls.get("video_volume");return"number"==typeof e?Math.min(1,Math.max(0,e)):1}function l(e){window.ls.set("video_volume",e)}function d(e){return window.cur["stories_list_"+e]}function u(e){delete window.cur["stories_list_"+e]}function _(e){if(void 0===e&&(e=!1),window.cur.storiesDiscoverFetchingPromise)return window.cur.storiesDiscoverFetchingPromise;var t,o,r=d(n.StoryListName.feed);return r&&(o=r.find((function(e){return e.type===n.StoryBlockType.discover})))&&(t=o.track_code),window.cur.storiesDiscoverFetchingPromise=h("",t,e).then((function(e){var t=(0,i.__read)(e,2),n=t[0],r=t[1];return o&&(o.grouped=n,o.next_from=r),n})).finally((function(){delete window.cur.storiesDiscoverFetchingPromise})),window.cur.storiesDiscoverFetchingPromise}function h(e,t,o,i){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===o&&(o=!1),void 0===i&&(i=15),new Promise((function(n,r){window.ajax.post("al_stories.php",{act:"get_discover",start_from:e,count:i,track_code:t},{loader:o,onDone:function(e,t){n([e,t])},onFail:function(e){return r(e),!0}})}))}function p(){return Boolean(window.cur.storiesDiscoverFetchingPromise)}function f(e){var t,o,i;return(null===(t=null==e?void 0:e.author)||void 0===t?void 0:t.id)&&(null===(o=null==e?void 0:e.narrative)||void 0===o?void 0:o.id)?e.author.id+"narrative"+(null===(i=e.narrative)||void 0===i?void 0:i.id):""+e.id}function g(){var e="users_stack_stories_mask",t=document.getElementById(e);t||(t=(0,r.se)('\n        <svg width="0" height="0">\n          <defs>\n            <clipPath id="'+e+'">\n              <path transform="translate(1.5 0)" d="M1.20772 8C1.20772 6.32671 0.768742 4.75626 0 3.39821C1.44342 1.34278 3.8277 0 6.52463 0C10.9293 0 14.5 3.58172 14.5 8C14.5 12.4183 10.9293 16 6.52463 16C3.8277 16 1.44342 14.6572 0 12.6018C0.768742 11.2437 1.20772 9.6733 1.20772 8Z"></path>\n            </clipPath>\n          </defs>  \n        </svg>  \n      '))&&(document.body.appendChild(t),(0,a.pushNavDestroy)((function(){null==t||t.remove()})))}function v(){return(0,s.partConfigEnabled)("story_reactions_sending_feature_web")}},725161:(e,t,o)=>{o.d(t,{viewUXPollsBlock:()=>n,clickUXPollsBlock:()=>r});var i=o(798262);function n(e){(0,i.statlogsValueEvent)("uxpolls_view",e)}function r(e){(0,i.statlogsValueEvent)("uxpolls_click",e)}},453580:(e,t,o)=>{o.d(t,{WallDataEvents:()=>s,registerUniqueListener:()=>l,registerNonGlobalNonUniqueListener:()=>d,emitEvent:()=>u});var i=o(570655),n=o(480816),r=o(419223),s={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},a=(0,r.makeSharedState)("wall-data",(function(){return{emitter:new n.default,keyedListeners:Object.create(null)}}),{version:0}),c=function(e,t,o){var n,r,s=a(),c=null===(r=null===(n=s.keyedListeners)||void 0===n?void 0:n[e])||void 0===r?void 0:r[t];return c&&s.emitter.removeListener(e,c),function(e,t,o){var n,r=a();return r.emitter.addListener(e,o),r.keyedListeners[e]=(0,i.__assign)((0,i.__assign)({},r.keyedListeners[e]),((n={})[t]=o,n)),function(){var i,n;r.emitter.removeListener(e,o),(null===(i=r.keyedListeners[e])||void 0===i?void 0:i[t])===o&&(null===(n=r.keyedListeners[e])||void 0===n||delete n[t])}}(e,t,o)},l=function(e,t,o){return c(t,e,o)},d=function(e,t){return function(e,t){var o=a();return o.emitter.addListener(e,t),function(){o.emitter.removeListener(e,t)}}(e,t)},u=function(e,t){a().emitter.emit(e,t)}},210277:(e,t,o)=>{o.d(t,{updateAriaLabelCounter:()=>r});var i=o(70162),n=o(325698),r=function(e,t,o){if("number"==typeof t&&e instanceof HTMLElement&&e.classList.contains("PostBottomAction")){var r=function(e){var t=void 0;switch(e){case n.LikeButtonTypes.comment:t=(0,i.getLang)("likes_comments_N_aria_short","raw");break;case n.LikeButtonTypes.like:t=(0,i.getLang)("likes_likes_N_aria_short","raw");break;case n.LikeButtonTypes.share:t=(0,i.getLang)("likes_shares_N_aria_short","raw")}return t}(o);if(r){var s=(0,i.langNumeric)(t,r,!1);e.setAttribute("aria-label",s)}}}},329979:(e,t,o)=>{o.d(t,{highlightUpdatedPost:()=>n,highlightUpdatedPostContent:()=>r});var i=o(830104),n=function(e){(0,i.triggerAnimationClass)(e,"post_highlight_updated",3e3)},r=function(e){(0,i.triggerAnimationClass)(e,"post_highlight_updated_content",3e3)}},175382:(e,t,o)=>{o.d(t,{floatingButtonCollapseAllRepliesHide:()=>r,floatingButtonCollapseAllRepliesShow:()=>s,loadRepliesLinkShow:()=>a,loadRepliesLinkIsVisible:()=>c,highlightUpdatedReply:()=>l,highlightUpdatedReplyContent:()=>d});var i=o(830104),n=o(873589),r=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.add("replies_side_hidden")},s=function(e){e instanceof HTMLElement&&e.classList.contains("replies_side")&&e.classList.remove("replies_side_hidden")},a=function(e){e instanceof HTMLElement&&e.classList.contains("replies_next")&&e.classList.add("replies_next_shown")},c=function(e){return!!(e instanceof HTMLElement&&e.classList.contains("replies_next"))&&(e.classList.contains("replies_next_shown")||(0,n.isVisible)(e))},l=function(e){(0,i.triggerAnimationClass)(e,"reply_highlight_updated",3e3)},d=function(e){(0,i.triggerAnimationClass)(e,"reply_highlight_updated_content",3e3)}}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,o,i)=>{if(!t){var n=1/0;for(c=0;c<deferred.length;c++){for(var[t,o,i]=deferred[c],r=!0,s=0;s<t.length;s++)(!1&i||n>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[s])))?t.splice(s--,1):(r=!1,i<n&&(n=i));if(r){deferred.splice(c--,1);var a=o();void 0!==a&&(e=a)}}return e}i=i||0;for(var c=deferred.length;c>0&&deferred[c-1][2]>i;c--)deferred[c]=deferred[c-1];deferred[c]=[t,o,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var n=2&t&&e;"object"==typeof n&&!~leafPrototypes.indexOf(n);n=getProto(n))Object.getOwnPropertyNames(n).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(o,i),o},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,o)=>(__webpack_require__.f[o](e,t),t)),[])),__webpack_require__.u=e=>9375===e?"voice_message_player.1ca99e7ec51aef6df7b5.js":28762===e?"speech.ec5bb88b79217da0bc5d.js":57468===e?"SilentModeForms.710e5d0929fe4e8d2b72.js":75980===e?"menu_settings.0f17151bd588fe6a5267.js":59240===e?"performance-stats.3abb6f691466d2ec2615.js":void 0,__webpack_require__.miniCssF=e=>e+"."+{57468:"28053bce032a9da83885",75980:"95eccc249ab38cb1e901"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,o,i)=>{if(inProgress[e])inProgress[e].push(t);else{var n,r;if(void 0!==o)for(var s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var c=s[a];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")=="vk:"+o){n=c;break}}n||(r=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack","vk:"+o),n.src=e),inProgress[e]=[t];var l=(t,o)=>{n.onerror=n.onload=null,clearTimeout(d);var i=inProgress[e];if(delete inProgress[e],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((e=>e(o))),t)return t(o)},d=setTimeout(l.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=l.bind(null,n.onerror),n.onload=l.bind(null,n.onload),r&&document.head.appendChild(n)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,o)=>{var i=__webpack_require__.miniCssF(e),n=__webpack_require__.p+i;if(((e,t)=>{for(var o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var n=(s=o[i]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){var s;if((n=(s=r[i]).getAttribute("data-href"))===e||n===t)return s}})(i,n))return t();((e,t,o,i)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=r=>{if(n.onerror=n.onload=null,"load"===r.type)o();else{var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,n.parentNode.removeChild(n),i(c)}},n.href=t,document.head.appendChild(n)})(e,n,t,o)})),installedCssChunks={12495:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{57468:1,75980:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{var e={12495:0};__webpack_require__.f.j=(t,o)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else if(75980!=t){var n=new Promise(((o,n)=>i=e[t]=[o,n]));o.push(i[2]=n);var r=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(r,(o=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var n=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",s.name="ChunkLoadError",s.type=n,s.request=r,i[1](s)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.O.j=t=>0===e[t];var t=(t,o)=>{var i,n,[r,s,a]=o,c=0;for(i in s)__webpack_require__.o(s,i)&&(__webpack_require__.m[i]=s[i]);if(a)var l=a(__webpack_require__);for(t&&t(o);c<r.length;c++)n=r[c],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[r[c]]=0;return __webpack_require__.O(l)},o=self.webpackChunkvk=self.webpackChunkvk||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var __webpack_exports__=__webpack_require__.O(void 0,[76429,75514,24509,56990,98066,76400,40885,68592,61317],(()=>__webpack_require__(272972)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();