(self.webpackChunkvk=self.webpackChunkvk||[]).push([[88869],{189214:(e,t,r)=>{"use strict";function n(e){var t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function o(e){return n(new Date(e.getTime()+864e5))}function a(e){return n(new Date(e.getTime()-864e5))}r.d(t,{isToday:()=>n,isTomorrow:()=>a,isYesterday:()=>o})},939008:(e,t,r)=>{"use strict";r.d(t,{initLang:()=>o,langNumeric:()=>i,langSex:()=>a,langWordNumeric:()=>s});var n;r(189214);function o(e){e.source,n=e.config}function a(e,t){if(!Array.isArray(t))return t;var r=n(),o=t[1];return r?(r.sexRules.some((function(r){return"*"===r[0]||e==r[0]&&t[r[1]]?(o=t[r[1]],!0):void 0})),o):o}function i(e,t,r){var o,a=n();if(!t||!a)return e;Array.isArray(t)?(o=t[1],e!==Math.floor(e)?o=t[a.numRules.float]:a.numRules.int.some((function(r){if("*"===r[0])return o=t[r[2]],!0;var n=r[0]?e%r[0]:e;return Array.isArray(r[1])&&-1!==r[1].indexOf(n)?(o=t[r[2]],!0):void 0}))):o=t;var i=e+"";if(r){for(var s=e.toString().split("."),c=[],u=s[0].length-3;u>-3;u-=3)c.unshift(s[0].slice(u>0?u:0,u+3));s[0]=c.join(a.numDel),i=s.join(a.numDec)}return o=(o||"%s").replace("%s",i)}function s(e,t,r){return Array.isArray(t)&&e<t.length?t[e]:i(e,r)}},553890:(e,t,r)=>{"use strict";r.d(t,{Lang:()=>h});var n=r(334738),o=r(28991),a=r(5991),i=r(306610),s=r(896156),c=r(939008),u=r(659397),l=r(997864),d=r.n(l),m=r(21705),h=(0,a.default)((function e(t,r){var a=this;(0,i.default)(this,e),(0,s.default)(this,"decodedKeys",{}),(0,s.default)(this,"use",(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return a.fold.apply(a,[e,function(e){return e},function(e){return e.join("")}].concat(r))})),(0,s.default)(this,"fold",(function(e,t,r){try{var n=arguments.length<=3?void 0:arguments[3],i=a.getTemplate(e);if(!i)return t(e);if(!n)return Array.isArray(i)?t(e):t(i);if("num"in n)i="fallback"in n?(0,c.langWordNumeric)(n.num,i,a.getTemplate(n.fallback)).toString():(0,c.langNumeric)(n.num,i).toString();else if("sex"in n){var s={female:"1",male:"2",unknown:"*"};i=(0,c.langSex)(s[n.sex],i)}else if("now"in n){var u=new Date(n.now),l=new Date(n.date);i=g(u,l)?i[3]:v(u,l)?i[2]:_(u,l)?i[4]:i[1],n.values=(0,o.default)((0,o.default)({},a.splitDate(l,{monthType:n.shortMonths?"short":void 0})),n.values||{})}if(Array.isArray(i)||!i)return t(e);if("values"in n&&Object.keys(n.values).length>0){var d=R.Grammar.tryParse(i),m=function e(o,a){switch(a.type){case"StaticPlaceholder":var i=n.values[a.name];o.push(i);break;case"FunctionPlaceholder":var s=n.values[a.name],c=a.inner.reduce(e,[]);o.push(s(r(c)));break;case"Text":o.push(t(a.text));break;default:}return o},h=d.reduce(m,[]);return r(h)}return t(i)}catch(r){return t(e)}})),(0,s.default)(this,"formatDate",(function(e,t){var r=new Date(e),n=new Date(t.now);try{switch(t.variant){case"time":var o=a.splitDate(r),i=o.hour,s=o.minute,c=o.am_pm;return"".concat(i,":").concat(s," ").concat(c);case"month-year":var u=a.splitDate(r,{monthType:"full"}),l=u.month,d=u.year;return"".concat(l," ").concat(d);case"full-date-time":var h=a.splitDate(r,{monthType:"full"}),f=h.day,p=h.month,g=h.year,v=h.hour,_=h.minute,R=h.am_pm;return"".concat(f," ").concat(p," ").concat(g,", ").concat(v,":").concat(_," ").concat(R);case"time-ago":var k=Math.floor((n.getTime()-e)/1e3);switch(!0){case k<60:return a.use("global_just_now");case k<3600:var I=Math.floor(k/60);return a.use("global_word_mins_ago",{num:I,fallback:"global_mins_ago"});case k<43200:var y=Math.floor(k/60/60);return a.use("global_word_hours_ago",{num:y,fallback:"global_hours_ago"});default:return(0,m.isSameYear)(n,new Date(e))?a.use("global_short_date_time",{now:n.getTime(),date:e}):a.use("global_date_year_time",{now:n.getTime(),date:e})}default:return(0,m.exhaustivenessCheck)(t.variant)}}catch(e){return a.logger.error("[LANG] Ошибка форматирования даты ".concat(t.variant),e),r.toISOString()}})),(0,s.default)(this,"formatNumber",(function(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";if("regular"===o)return e.toString().split(".").join(a.translations.config.numDec);switch(!0){case e>1e9:t=e/1e9,r="B";break;case e>1e6:t=e/1e6,r="M";break;case e>1e3:t=e/1e3,r="K";break;default:t=e,r=""}var i=t.toFixed(1).split("."),s=(0,n.default)(i,2),c=s[0],u=s[1],l=Number(u)?[c,u]:[c];return l.join(a.translations.config.numDec)+r})),(0,s.default)(this,"getTemplate",(function(e){if(!a.decodedKeys[e]){var t=a.translations.keys[e];if(!t)return;a.decodedKeys[e]=Array.isArray(t)?t.map(f):f(t)}return a.decodedKeys[e]})),(0,s.default)(this,"splitDate",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{monthType:"gen"},r=function(){switch(t.monthType){case"short":return a.getTemplate("global_months_short_of");case"full":return a.getTemplate("global_months");default:return a.getTemplate("global_months_of")}},n=r(),o=e.getMinutes().toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),s=e.getDate(),c=n[e.getMonth()]||n[0],u=e.getFullYear(),l="",d=a.translations.config.timeSys;return"12hour"===d[0]&&(l=e.getHours()>11?d[2]:d[1],i=(e.getHours()%12==0?12:e.getHours()%12).toString().padStart(2,"0")),{year:u,day:s,month:c,hour:i,minute:o,am_pm:l}})),this.logger=t,this.translations=r,(0,c.initLang)({source:function(){return r.keys},config:function(){return r.config}}),this.locale=r.config.locale}));function f(e){return(0,u.unescape)(e).replace(/<br\s*\/?>/gi,"\n")}var p=864e5;function g(e,t){var r=e.getDate(),n=e.getMonth(),o=e.getFullYear();return t.getFullYear()===o&&t.getMonth()===n&&t.getDate()===r}function v(e,t){return g(e,new Date(t.getTime()+p))}function _(e,t){return g(e,new Date(t.getTime()-p))}var R=d().createLanguage({Grammar:function(e){return d().alt(e.FunctionPlaceholder,e.StaticPlaceholder,e.Text).many()},StaticPlaceholder:function(e){return d().seqObj(d().string("{"),["name",e.Name],d().string("}")).map((function(e){return{type:"StaticPlaceholder",name:e.name}}))},FunctionPlaceholder:function(e){return d().seqObj(d().string("{"),["name",e.Name],d().string("}")).chain((function(t){var r=t.name;return d().alt(e.StaticPlaceholder,e.Text).many().skip(d().string("{/".concat(r,"}"))).map((function(e){return{type:"FunctionPlaceholder",name:r,inner:e}}))}))},Name:function(){return d().regex(/[a-zA-Z0-9_]+/)},Text:function(){return d().regex(/[^{}]+/).map((function(e){return{type:"Text",text:(0,u.unescape)(e)}}))}})},97461:(e,t,r)=>{"use strict";r.d(t,{DEFAULT_FEATURE_FLAGS:()=>n});var n={me_fc_tooltips:!0,me_fc_multiple_windows:!0,me_fc_pinned_message:!1,me_fc_message_actions:!1,me_fc_blue_unread_counters:!1,me_fc_simple_composer:!1,me_sticker_packs:{helloKeywordPack:[],helloStickersPack:[]},me_community_messages_enabled:!1,me_message_selecting:!1,vkm_folders:!1,vkm_pwa:!1,me_channels:!1,vkm_new_read_indicator:!1,vkm_global_search:!1,vkm_convo_member_temporary_ban:!1,vkm_profile_info_screen_name:!1,vkm_hide_forward_author:!1,vkm_video_messages_shapes:!1,vkm_channels_temp:!1,vkm_convo_new_history_load:!1,vkm_composer_new:!1,vkm_send_promoted_stickers:!1,vkm_reactions:!1,vkm_convo_profile:!1,vkm_mediascope_collect:!1,vkm_widget_attaches:!1,vkm_who_read_message:!1,vkm_calls_history:!1}},251766:(e,t,r)=>{"use strict";r.d(t,{resolveCmid:()=>s,insertReplies:()=>c,toWallReplyAttach:()=>u,toPlainText:()=>l,isEmpty:()=>d,markDeleted:()=>m,restoreDeleted:()=>h,findReplyByCmid:()=>f,replaceReply:()=>p,findLastReply:()=>g});var n=r(28991),o=r(678927),a=r(641450),i=r(314432);function s(e){return(Number.isNaN(e)||void 0===e)&&(e=0),e}function c(e,t){e.replies.history=[].concat((0,o.default)(e.replies.history),(0,o.default)(t))}function u(e){return{kind:"WallReply",attaches:e.attaches,chunks:e.chunks,id:e.cmid,postId:e.postCmid,authorId:e.peerId,date:e.sentAt,ownerId:i.resolveId(e.channelId)}}function l(e,t){return a.toPlainText(e.chunks,t)}function d(e){return 0===e.chunks.length&&!Object.keys(e.attaches).find((function(e){return"unknown"!==e}))}function m(e){return(0,n.default)((0,n.default)({},e),{},{kind:"MarkedDeleted"})}function h(e){return(0,n.default)((0,n.default)({},e),{},{kind:"Normal"})}function f(e,t){return e.replies.history.find((function(e){return e.cmid===t}))}function p(e,t){var r=e.replies.history.findIndex((function(e){return e.cmid===t.cmid}));-1!==r&&(e.replies.history[r]=t)}function g(e,t){for(var r=function(e){return e.kind===t},n=e.replies.history.length-1;n>=0;n--){var o=e.replies.history[n];if(o&&r(o))return o}}},427144:(e,t,r)=>{"use strict";r.d(t,{Router:()=>R});var n=r(28991),o=r(334738),a=r(678927),i=r(306610),s=r(5991),c=r(896156),u=r(997864),l=r(526067),d=r(606972),m=r(21705),h=r(716352),f=r(251766),p=r(360202),g=r(314432),v=r(980662),_=r(30966),R=function(){function e(t,r,n,s){var u=this;(0,i.default)(this,e),(0,c.default)(this,"utils",new I),(0,c.default)(this,"screenRoute",{kind:"MainRoute"}),(0,c.default)(this,"modalRoute",null),(0,c.default)(this,"runtimeRoute",null),(0,c.default)(this,"listeners",new Set),(0,c.default)(this,"checkIsolation",(function(){return!1})),(0,c.default)(this,"notifyListeners",(function(e,t){(0,a.default)(u.listeners).forEach((function(r){return r(e,t)}))})),(0,c.default)(this,"beforeRouteChange",(function(e,t){var r=u.currentRoute;if(l.IRouter.isRuntimeRoute(e))return u.runtimeRoute="EmptyRuntimeRoute"===e.kind?null:e,void u.notifyListeners(r,t);u.runtimeRoute=null,l.IRouter.isModalRoute(e)?(u.modalRoute=e,l.IRouter.isModalRoute(r)||(u.screenRoute=r)):(u.screenRoute=e,u.modalRoute=null)})),(0,c.default)(this,"addBasePath",(function(e){return u.basePath?"".concat(u.basePath).concat("/"===e?"":e):e})),(0,c.default)(this,"removeBasePath",(function(e){return u.basePath?e.replace(new RegExp("^".concat(u.basePath.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))),""):e})),(0,c.default)(this,"openLink",(function(e,t){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var r=l.IRouter.isProxyRoute(t)?u.fromProxyRoute(t):t;r&&(e.preventDefault(),u.push(r))}})),(0,c.default)(this,"push",(function(e){u.beforeRouteChange(e,d.Action.Push),l.IRouter.isRuntimeRoute(e)||u.history.push(u.toUrl(e),{screenRoute:u.screenRoute})})),(0,c.default)(this,"replace",(function(e){u.beforeRouteChange(e,d.Action.Replace),l.IRouter.isRuntimeRoute(e)||u.history.replace(u.toUrl(e),{screenRoute:u.screenRoute})})),(0,c.default)(this,"back",(function(){u.history.back()})),(0,c.default)(this,"forward",(function(){u.history.forward()})),(0,c.default)(this,"subscribe",(function(e){var t=u.history.listen((function(t){var r=t.location,n=t.action,o=u.fromUrl(k(r));u.beforeRouteChange(o,n),e(o,n)}));return u.listeners.add(e),function(){u.listeners.delete(e),t()}})),(0,c.default)(this,"fromExternalUrl",(function(e){var t,r=u.fromUrl(e);if("NotFoundRoute"!==r.kind)return r;try{t=new URL(e)}catch(e){return r}var n=(t.searchParams.get("w")||"").slice(4).split("_"),a=(0,o.default)(n,3),i=a[0],s=a[1],c=a[2],l=i?h.resolveId(parseInt(i)):void 0,d=s?_.resolveCmid(parseInt(s)):void 0,m=c?f.resolveCmid(parseInt(c.slice(1))):void 0;if(l&&d)return{kind:"ChannelRoute",channelId:l,postCmid:d,commentCmid:m};var p=t.pathname.split("/"),g=p[1];return t.hostname===u.vkDomain&&2===p.length&&g&&g.length>=3&&g.length<=25&&"reforged.php"!==g?"groups"===g?{kind:"ChannelsListRoute"}:{kind:"ScreenNameRoute",screenName:g}:r})),(0,c.default)(this,"fromUrl",(function(e){return u.utils.fromUrl(u.removeBasePath(e))})),this.featureFlags=t,this.vkDomain=r,this.basePath=n,this.toUrl=this.toUrl.bind(this),this.fromProxyRoute=this.fromProxyRoute.bind(this),this.history=s?(0,d.createMemoryHistory)():(0,d.createBrowserHistory)();var m=this.currentRoute;l.IRouter.isModalRoute(m)?(this.modalRoute=m,this.screenRoute=this.state.screenRoute||this.screenRoute):this.screenRoute=m}return(0,s.default)(e,[{key:"state",get:function(){return this.history.location.state||{}}},{key:"currentRoute",get:function(){return this.fromUrl(k(this.history.location))}},{key:"toUrl",value:function(e){if(l.IRouter.isProxyRoute(e)){var t=this.fromProxyRoute(e);switch(e.kind){case"AttachMediaProxyRoute":return t?this.toUrlInternal(t):null;case"AttachProxyRoute":return t?this.toUrlInternal(t):this.checkIsolation()?null:this.utils.getAttachLink(e.attach,this.vkDomain)||e.fallbackUrl||null;default:(0,m.exhaustivenessCheck)(e)}}return this.toUrlInternal(e)}},{key:"toUrlInternal",value:function(e){return this.addBasePath(this.utils.toUrl(e))}},{key:"fromProxyRoute",value:function(e){switch(e.kind){case"AttachProxyRoute":switch(e.attach.kind){case"MiniApp":return{kind:"MiniAppModalRoute",miniAppId:e.attach.id};case"Wall":return this.featureFlags.me_channels&&h.isChannelId(e.attach.authorId)?{kind:"ChannelRoute",channelId:h.resolveId(e.attach.authorId),postCmid:_.resolveCmid(e.attach.id)}:null;case"WallReply":return this.featureFlags.me_channels&&h.isChannelId(e.attach.authorId)?{kind:"ChannelRoute",channelId:h.resolveId(e.attach.ownerId),postCmid:_.resolveCmid(e.attach.postId),commentCmid:f.resolveCmid(e.attach.id)}:null;case"Audio":case"AudioPlaylist":case"Podcast":case"Doc":case"Sticker":case"Link":case"Voice":case"Market":case"MoneyTransfer":case"MoneyRequest":case"Gift":case"Graffiti":case"MarketAlbum":case"FinishedCall":case"Poll":case"Story":case"Article":case"WallHistory":case"Geo":case"ActiveCall":case"DonutLink":case"InviteLink":case"VideoMessage":case"Widget":return null;default:return(0,m.exhaustivenessCheck)(e.attach)}case"AttachMediaProxyRoute":var t;if(e.source)switch(e.source.kind){case"message":t={kind:l.IRouter.RouteSourceKind.Message,cmid:e.source.cmid,peerId:e.source.peerId,messageAccessKey:e.attach.messageAccessKey};break;case"post":t={kind:l.IRouter.RouteSourceKind.Post,cmid:e.source.cmid,channelId:e.source.channelId};break;case"comment":t={kind:l.IRouter.RouteSourceKind.Comment,commentCmid:e.source.commentCmid,postCmid:e.source.postCmid,channelId:e.source.channelId};break;case"composer":t={kind:l.IRouter.RouteSourceKind.Composer};break;case"channelComposer":t={kind:l.IRouter.RouteSourceKind.ChannelComposer};break;default:(0,m.exhaustivenessCheck)(e.source)}return{kind:{Photo:"PhotoModalRoute",Video:"VideoModalRoute"}[e.attach.kind],id:e.attach.id,ownerId:e.attach.ownerId,accessKey:e.attach.accessKey,source:t,tab:e.tab};default:(0,m.exhaustivenessCheck)(e)}}}]),e}();function k(e){return"".concat(e.pathname).concat(e.search).concat(e.hash||"#")}var I=(0,s.default)((function e(){var t=this;(0,i.default)(this,e),(0,c.default)(this,"routeParamsDelimiter","_"),(0,c.default)(this,"routeParamsDelimiterParser",u.string(this.routeParamsDelimiter)),(0,c.default)(this,"parser",u.createLanguage({ModalRoutes:function(e){return u.alt(e.Peer,e.Poll,e.Important,e.MiniApp,e.PhotoSourceMessage,e.PhotoSourcePost,e.PhotoSourceComment,e.PhotoSourceComposer,e.PhotoSourceChannelComposer,e.PhotoSourceLess,e.VideoSourceMessage,e.VideoSourcePost,e.VideoSourceComment,e.VideoSourceComposer,e.VideoSourceChannelComposer,e.VideoSourceLess)},ScreenRoutes:function(e){return u.alt(e.Convo,e.Channel,e.ChannelsList,e.CallJoin,e.ChatJoin,e.Main)},Main:function(){return u.regexp(/\/?/).map((function(){return{kind:"MainRoute"}}))},CallJoin:function(){return u.seqObj(u.string("/call/join/"),["callId",u.regexp(/^(.*)+$/)]).map((function(e){return{kind:"CallJoinRoute",callId:e.callId}}))},ChatJoin:function(){return u.seqObj(u.string("/chat/join/"),["chatId",u.regexp(/^(.*)+$/)]).map((function(e){return{kind:"ChatJoinRoute",chatId:e.chatId}}))},Convo:function(){return u.seqObj(u.string("/convo/"),["peerId",u.regexp(/(-)?[0-9]{1,10}$/)]).map((function(e){return{kind:"ConvoRoute",peerId:g.resolveId(Number(e.peerId)),entrypoint:"list_all"}}))},Channel:function(){return u.seqObj(u.string("/channels/"),["channelId",u.regexp(/(-)[0-9]{1,10}$/)]).map((function(e){return{kind:"ChannelRoute",channelId:h.resolveId(Number(e.channelId))}}))},ChannelsList:function(){return u.regexp(/\/channels\/?/).map((function(){return{kind:"ChannelsListRoute"}}))},Peer:function(){return u.seqObj(u.string("/peer/"),["peerId",u.regexp(/(-)?\d*/)]).map((function(e){return{kind:"PeerModalRoute",peerId:g.resolveId(Number(e.peerId))}}))},Poll:function(){return u.seqObj(u.string("/poll/"),["ownerId",u.regexp(/(-)?\d*/)],u.string("_"),["pollId",u.regexp(/(-)?\d*/)]).map((function(e){return{kind:"PollModalRoute",ownerId:g.resolveId(Number(e.ownerId)),pollId:Number(e.pollId)}}))},Important:function(){return u.string("/important").map((function(){return{kind:"ImportantMessagesModalRoute"}}))},MiniApp:function(){return u.seqObj(u.string("/miniapp/"),["miniAppId",u.regexp(/(-)?\d*/)]).map((function(e){return{kind:"MiniAppModalRoute",miniAppId:Number(e.miniAppId)}}))},Photo:function(){return u.seqObj(u.string("/photo/"),["ownerId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["id",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["accessKey",u.regexp(/[0-9a-zA-Z]*/)])},PhotoSourceLess:function(e){return u.seqObj(["photo",e.Photo]).map((function(e){return{kind:"PhotoModalRoute",ownerId:g.resolveId(Number(e.photo.ownerId)),id:Number(e.photo.id),accessKey:e.photo.accessKey}}))},PhotoSourceMessage:function(e){return u.seqObj(["photo",e.PhotoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Message.toString()),t.routeParamsDelimiterParser,["peerId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["cmid",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["messageAccessKey",u.regexp(/[0-9a-zA-Z]*/)]).map((function(e){return(0,n.default)((0,n.default)({},e.photo),{},{source:{kind:l.IRouter.RouteSourceKind.Message,peerId:g.resolveId(Number(e.peerId)),cmid:v.resolveCmid(Number(e.cmid)),messageAccessKey:e.messageAccessKey}})}))},PhotoSourcePost:function(e){return u.seqObj(["photo",e.PhotoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Post.toString()),t.routeParamsDelimiterParser,["channelId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["cmid",u.regexp(/(-)?\d*/)]).map((function(e){return(0,n.default)((0,n.default)({},e.photo),{},{source:{kind:l.IRouter.RouteSourceKind.Post,channelId:h.resolveId(Number(e.channelId)),cmid:_.resolveCmid(Number(e.cmid))}})}))},PhotoSourceComment:function(e){return u.seqObj(["photo",e.PhotoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Comment.toString()),t.routeParamsDelimiterParser,["channelId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["postCmid",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["commentCmid",u.regexp(/(-)?\d*/)]).map((function(e){return(0,n.default)((0,n.default)({},e.photo),{},{source:{kind:l.IRouter.RouteSourceKind.Comment,channelId:h.resolveId(Number(e.channelId)),postCmid:_.resolveCmid(Number(e.postCmid)),commentCmid:f.resolveCmid(Number(e.commentCmid))}})}))},PhotoSourceComposer:function(e){return u.seqObj(["photo",e.PhotoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Composer.toString())).map((function(e){return(0,n.default)((0,n.default)({},e.photo),{},{source:{kind:l.IRouter.RouteSourceKind.Composer}})}))},PhotoSourceChannelComposer:function(e){return u.seqObj(["photo",e.PhotoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.ChannelComposer.toString())).map((function(e){return(0,n.default)((0,n.default)({},e.photo),{},{source:{kind:l.IRouter.RouteSourceKind.ChannelComposer}})}))},Video:function(){return u.seqObj(u.string("/video/"),["ownerId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["id",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["accessKey",u.regexp(/[0-9a-zA-Z]*/)])},VideoSourceLess:function(e){return u.seqObj(["video",e.Video]).map((function(e){return{kind:"VideoModalRoute",ownerId:g.resolveId(Number(e.video.ownerId)),id:Number(e.video.id),accessKey:e.video.accessKey}}))},VideoSourceMessage:function(e){return u.seqObj(["video",e.VideoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Message.toString()),t.routeParamsDelimiterParser,["peerId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["cmid",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["messageAccessKey",u.regexp(/[0-9a-zA-Z]*/)]).map((function(e){return(0,n.default)((0,n.default)({},e.video),{},{source:{kind:l.IRouter.RouteSourceKind.Message,peerId:g.resolveId(Number(e.peerId)),cmid:v.resolveCmid(Number(e.cmid)),messageAccessKey:e.messageAccessKey}})}))},VideoSourcePost:function(e){return u.seqObj(["video",e.VideoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Post.toString()),t.routeParamsDelimiterParser,["channelId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["cmid",u.regexp(/(-)?\d*/)]).map((function(e){return(0,n.default)((0,n.default)({},e.video),{},{source:{kind:l.IRouter.RouteSourceKind.Post,channelId:h.resolveId(Number(e.channelId)),cmid:_.resolveCmid(Number(e.cmid))}})}))},VideoSourceComment:function(e){return u.seqObj(["video",e.VideoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Comment.toString()),t.routeParamsDelimiterParser,["channelId",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["postCmid",u.regexp(/(-)?\d*/)],t.routeParamsDelimiterParser,["commentCmid",u.regexp(/(-)?\d*/)]).map((function(e){return(0,n.default)((0,n.default)({},e.video),{},{source:{kind:l.IRouter.RouteSourceKind.Comment,channelId:h.resolveId(Number(e.channelId)),postCmid:_.resolveCmid(Number(e.postCmid)),commentCmid:f.resolveCmid(Number(e.commentCmid))}})}))},VideoSourceComposer:function(e){return u.seqObj(["video",e.VideoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.Composer.toString())).map((function(e){return(0,n.default)((0,n.default)({},e.video),{},{source:{kind:l.IRouter.RouteSourceKind.Composer}})}))},VideoSourceChannelComposer:function(e){return u.seqObj(["video",e.VideoSourceLess],t.routeParamsDelimiterParser,u.string(l.IRouter.RouteSourceKind.ChannelComposer.toString())).map((function(e){return(0,n.default)((0,n.default)({},e.video),{},{source:{kind:l.IRouter.RouteSourceKind.ChannelComposer}})}))}})),(0,c.default)(this,"fromUrl",(function(e){var r=(0,d.parsePath)(e),o=new URLSearchParams(r.search),a=t.parseParams(o);if(!r.pathname)return(0,n.default)({kind:"MainRoute"},a);try{var i=t.parser.ScreenRoutes.tryParse(r.pathname);switch(i.kind){case"MainRoute":var s=o.get("call"),c=o.get("chat");return(0,n.default)((0,n.default)((0,n.default)((0,n.default)({kind:"MainRoute"},s&&{callId:s}),c&&{chatId:c}),t.parseConvoRouteExtraParams(o)),a);case"CallJoinRoute":return(0,n.default)({kind:"CallJoinRoute",callId:i.callId},a);case"ChatJoinRoute":return(0,n.default)({kind:"ChatJoinRoute",chatId:i.chatId},a);case"ConvoRoute":var u=o.get("search"),l=o.get("chat_invite"),p=o.get("call_join"),R=o.get("cmid");return(0,n.default)((0,n.default)((0,n.default)((0,n.default)((0,n.default)((0,n.default)({kind:"ConvoRoute",peerId:g.resolveId(Number(i.peerId)),entrypoint:i.entrypoint},l&&{chatInvite:l}),p&&{callJoin:p}),null!=u?{search:u}:{}),R&&{cmid:v.resolveCmid(Number(R))}),t.parseConvoRouteExtraParams(o)),a);case"ChannelRoute":var k=o.get("cmid"),I=o.get("comment"),y=o.get("accessDenied");return(0,n.default)((0,n.default)({kind:"ChannelRoute",channelId:h.resolveId(Number(i.channelId)),postCmid:null!==k?_.resolveCmid(Number(k)):void 0,commentCmid:null!==I?f.resolveCmid(Number(I)):void 0,accessDenied:y?Boolean(y):void 0},t.parseConvoRouteExtraParams(o)),a);case"ChannelsListRoute":return(0,n.default)((0,n.default)({kind:"ChannelsListRoute"},t.parseConvoRouteExtraParams(o)),a);case"NotFoundRoute":return(0,n.default)({kind:"NotFoundRoute"},a);default:(0,m.exhaustivenessCheck)(i)}}catch(e){}try{var P=t.parser.ModalRoutes.tryParse(r.pathname);return(0,n.default)((0,n.default)({},P),a)}catch(e){}return(0,n.default)({kind:"NotFoundRoute"},a)})),(0,c.default)(this,"toUrl",(function(e){var r=function(e){var t=[];return e.forEach((function(e,r){t.push(e?[r,encodeURIComponent(e)].join("="):r)})),t.join("&")},n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new URLSearchParams,o=t.createGlobalQueryFromRoute(e,n);return""!==o.toString()?"?".concat(r(o)):""};switch(e.kind){case"ConvoRoute":var o=t.createConvoExtraParamsQueryFromRoute(e);return void 0!==e.search&&o.append("search",String(e.search)),e.cmid&&o.append("cmid",String(e.cmid)),e.chatInvite&&o.append("chat_invite",e.chatInvite),e.callJoin&&o.append("call_join",e.callJoin),"/convo/".concat(e.peerId).concat(n(o));case"ChannelsListRoute":var a=t.createConvoExtraParamsQueryFromRoute(e);return"".concat(h.CHANNELS_BASE_PATH).concat(n(a));case"ChannelRoute":var i=new URLSearchParams;return void 0!==e.commentCmid&&i.append("comment",e.commentCmid.toString()),void 0!==e.postCmid&&i.append("cmid",e.postCmid.toString()),void 0!==e.accessDenied&&i.append("accessDenied",e.accessDenied.toString()),"".concat(h.CHANNELS_BASE_PATH,"/").concat(e.channelId).concat(n(i));case"MainRoute":var s=t.createConvoExtraParamsQueryFromRoute(e);return e.callId&&s.set("call",e.callId),e.chatId&&s.set("chat",e.chatId),"/".concat(n(s));case"CallJoinRoute":return"/call/join/".concat(e.callId).concat(n());case"ChatJoinRoute":return"/chat/join/".concat(e.chatId).concat(n());case"NotFoundRoute":return"/".concat(n());case"PeerModalRoute":return"/peer/".concat(e.peerId).concat(n());case"MiniAppModalRoute":return"/miniapp/".concat(e.miniAppId).concat(n());case"PollModalRoute":return"/poll/".concat(e.ownerId,"_").concat(e.pollId);case"ImportantMessagesModalRoute":return"/important";case"PhotoModalRoute":case"VideoModalRoute":var c="PhotoModalRoute"===e.kind?"/photo/":"/video/",u=[e.ownerId.toString(),e.id.toString(),e.accessKey||""];if(e.source)switch(u.push(e.source.kind.toString()),e.source.kind){case l.IRouter.RouteSourceKind.Message:u.push(e.source.peerId.toString(),e.source.cmid.toString(),e.source.messageAccessKey||"");break;case l.IRouter.RouteSourceKind.Post:u.push(e.source.channelId.toString(),e.source.cmid.toString());break;case l.IRouter.RouteSourceKind.Comment:u.push(e.source.channelId.toString(),e.source.postCmid.toString(),e.source.commentCmid.toString());break;case l.IRouter.RouteSourceKind.Composer:case l.IRouter.RouteSourceKind.ChannelComposer:break;default:(0,m.exhaustivenessCheck)(e.source)}return"".concat(c).concat(u.join(t.routeParamsDelimiter)).concat(n());default:(0,m.exhaustivenessCheck)(e)}})),(0,c.default)(this,"parseParams",(function(e){var t={};return l.IRouter.globalParamsKeys.reduce((function(r,n){switch(n){case"createPoll":t[n]=Boolean(e.get(n));break;case"folder":var o=e.get("folder");o&&(t.folder=p.resolveId(Number(o)));break;case"tab":t.tab=function(e){switch(e){case"archive":case"unread":case"businessNotify":case"messageRequest":return e;default:return}}(e.get("tab"));break;default:(0,m.exhaustivenessCheck)(n)}return r}),{}),t})),(0,c.default)(this,"parseConvoRouteExtraParams",(function(e){return l.IRouter.convoRouteExtraParamsKeys.reduce((function(t,r){return e.has(r)&&(t[r]=!0),t}),{})})),(0,c.default)(this,"createGlobalQueryFromRoute",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new URLSearchParams;return l.IRouter.globalParamsKeys.forEach((function(r){if(r in e){var n=e[r];n?t.append(r,n.toString()):t.delete(r)}})),t})),(0,c.default)(this,"createConvoExtraParamsQueryFromRoute",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new URLSearchParams;return l.IRouter.convoRouteExtraParamsKeys.forEach((function(r){r in e&&(e[r]?t.append(r,""):t.delete(r))})),t})),(0,c.default)(this,"getAttachLink",(function(e,t){switch(e.kind){case"Audio":return"https://".concat(t,"/audio").concat(e.ownerId,"_").concat(e.id);case"AudioPlaylist":var r=e.accessKey?"_".concat(e.accessKey):"";return"https://".concat(t,"/music/").concat(e.type,"/").concat(e.ownerId,"_").concat(e.id).concat(r);case"Podcast":return"https://".concat(t,"/im?z=podcast").concat(e.ownerId,"_").concat(e.id);case"Doc":return"https://".concat(t,"/doc").concat(e.ownerId,"_").concat(e.id);case"Sticker":return"https://".concat(t,"/stickers");case"Link":case"Article":case"InviteLink":return e.url;case"Voice":case"MoneyTransfer":case"MoneyRequest":case"Graffiti":case"MarketAlbum":case"FinishedCall":case"Geo":case"ActiveCall":case"VideoMessage":case"Widget":return"";case"Market":return"https://".concat(t,"/market").concat(e.ownerId,"?w=product").concat(e.ownerId,"_").concat(e.id);case"Gift":return"https://".concat(t,"/gifts");case"Poll":return"https://".concat(t,"/im?w=poll").concat(e.ownerId,"_").concat(e.id);case"Story":return"https://".concat(t,"/im?w=story").concat(e.ownerId,"_").concat(e.id,"/").concat(e.ownerId,"_").concat(e.id);case"Wall":case"WallHistory":return"https://".concat(t,"/wall").concat(e.ownerId,"_").concat(e.id);case"WallReply":return"https://".concat(t,"/wall").concat(e.ownerId,"_").concat(e.postId,"?reply=").concat(e.id)+(e.parentsStack&&e.parentsStack.length>0?"&thread=".concat(e.parentsStack.join("_")):"");case"MiniApp":return"https://".concat(t,"/im?w=").concat(e.appLink);case"DonutLink":return"https://".concat(t,"/donut/club").concat(g.toRealId(e.ownerId));default:return(0,m.exhaustivenessCheck)(e)}}))}))},816405:(e,t,r)=>{"use strict";r.d(t,{API_VERSION:()=>n});const n="5.204"},606972:(e,t,r)=>{"use strict";r.d(t,{Action:()=>n,createBrowserHistory:()=>c,createMemoryHistory:()=>u,parsePath:()=>p});var n,o=r(722122);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));var a=function(e){return e};var i="beforeunload",s="popstate";function c(e){void 0===e&&(e={});var t=e.window,r=void 0===t?document.defaultView:t,c=r.history;function u(){var e=r.location,t=e.pathname,n=e.search,o=e.hash,i=c.state||{};return[i.idx,a({pathname:t,search:n,hash:o,state:i.usr||null,key:i.key||"default"})]}var l=null;r.addEventListener(s,(function(){if(l)I.call(l),l=null;else{var e=n.Pop,t=u(),r=t[0],o=t[1];if(I.length){if(null!=r){var a=_-r;a&&(l={action:e,location:o,retry:function(){S(-1*a)}},S(a))}}else w(e)}}));var g=n.Pop,v=u(),_=v[0],R=v[1],k=m(),I=m();function y(e){return"string"==typeof e?e:f(e)}function P(e,t){return void 0===t&&(t=null),a((0,o.default)({pathname:R.pathname,hash:"",search:""},"string"==typeof e?p(e):e,{state:t,key:h()}))}function C(e,t){return[{usr:e.state,key:e.key,idx:t},y(e)]}function b(e,t,r){return!I.length||(I.call({action:e,location:t,retry:r}),!1)}function w(e){g=e;var t=u();_=t[0],R=t[1],k.call({action:g,location:R})}function S(e){c.go(e)}null==_&&(_=0,c.replaceState((0,o.default)({},c.state,{idx:_}),""));var x={get action(){return g},get location(){return R},createHref:y,push:function e(t,o){var a=n.Push,i=P(t,o);if(b(a,i,(function(){e(t,o)}))){var s=C(i,_+1),u=s[0],l=s[1];try{c.pushState(u,"",l)}catch(e){r.location.assign(l)}w(a)}},replace:function e(t,r){var o=n.Replace,a=P(t,r);if(b(o,a,(function(){e(t,r)}))){var i=C(a,_),s=i[0],u=i[1];c.replaceState(s,"",u),w(o)}},go:S,back:function(){S(-1)},forward:function(){S(1)},listen:function(e){return k.push(e)},block:function(e){var t=I.push(e);return 1===I.length&&r.addEventListener(i,d),function(){t(),I.length||r.removeEventListener(i,d)}}};return x}function u(e){void 0===e&&(e={});var t=e,r=t.initialEntries,i=void 0===r?["/"]:r,s=t.initialIndex,c=i.map((function(e){return a((0,o.default)({pathname:"/",search:"",hash:"",state:null,key:h()},"string"==typeof e?p(e):e))})),u=l(null==s?c.length-1:s,0,c.length-1),d=n.Pop,g=c[u],v=m(),_=m();function R(e,t){return void 0===t&&(t=null),a((0,o.default)({pathname:g.pathname,search:"",hash:""},"string"==typeof e?p(e):e,{state:t,key:h()}))}function k(e,t,r){return!_.length||(_.call({action:e,location:t,retry:r}),!1)}function I(e,t){d=e,g=t,v.call({action:d,location:g})}function y(e){var t=l(u+e,0,c.length-1),r=n.Pop,o=c[t];k(r,o,(function(){y(e)}))&&(u=t,I(r,o))}var P={get index(){return u},get action(){return d},get location(){return g},createHref:function(e){return"string"==typeof e?e:f(e)},push:function e(t,r){var o=n.Push,a=R(t,r);k(o,a,(function(){e(t,r)}))&&(u+=1,c.splice(u,c.length,a),I(o,a))},replace:function e(t,r){var o=n.Replace,a=R(t,r);k(o,a,(function(){e(t,r)}))&&(c[u]=a,I(o,a))},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return v.push(e)},block:function(e){return _.push(e)}};return P}function l(e,t,r){return Math.min(Math.max(e,t),r)}function d(e){e.preventDefault(),e.returnValue=""}function m(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function h(){return Math.random().toString(36).substr(2,8)}function f(e){var t=e.pathname,r=void 0===t?"/":t,n=e.search,o=void 0===n?"":n,a=e.hash,i=void 0===a?"":a;return o&&"?"!==o&&(r+="?"===o.charAt(0)?o:"?"+o),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function p(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}},471996:(e,t,r)=>{"use strict";r.d(t,{createFeatureFlags:()=>p,createLang:()=>g,vkcom_textInputStub:()=>v,vkcom_mediaSelectorStub:()=>_,VkComRouter:()=>R,isMasterTab:()=>k,sleep:()=>I,VKME_VKCALL_CONTAINER_ID:()=>P});var n=r(570655),o=r(97461),a=r(553890),i=r(427144),s=r(506770),c=r(840060),u=r(343474),l=r(146143),d=r(274642),m=r(173471),h=r(70162),f=r(844142);function p(){var e,t,r={helloStickersPack:[21,12467,53098,50456,50459,18164,134,51117,16263,4275,6329,12296,21560,13312,20952,56896,20465,11607,53320,53647],helloKeywordPack:(null===(t=null===(e=window.stickersKeywords)||void 0===e?void 0:e["привет"])||void 0===t?void 0:t.filter((function(e){return e>0})))||[]};return(0,n.__assign)((0,n.__assign)({},o.DEFAULT_FEATURE_FLAGS),{me_fc_multiple_windows:!0,me_fc_tooltips:!0,me_sticker_packs:r,me_fc_pinned_message:(0,s.partConfigEnabled)("me_fc_pinned_message"),me_fc_blue_unread_counters:(0,s.partConfigEnabled)("fc_blue_unread_counters"),me_fc_simple_composer:(0,s.partConfigEnabled)("me_fc_simple_composer"),me_fc_message_actions:(0,s.partConfigEnabled)("me_fc_message_actions"),me_message_selecting:(0,s.partConfigEnabled)("me_message_selecting"),vkm_hide_forward_author:(0,s.partConfigEnabled)("vkm_hide_forward_author"),vkm_send_promoted_stickers:(0,s.partConfigEnabled)("stickers_can_send_unpurchased_stickers"),vkm_convo_profile:(0,s.partConfigEnabled)("vkm_convo_profile"),vkm_mediascope_collect:(0,s.partConfigEnabled)("vkm_fc_mediascope_collect"),vkm_widget_attaches:(0,s.partConfigEnabled)("vkm_widget_attaches"),vkm_who_read_message:(0,s.partConfigEnabled)("vkm_who_read_message"),vkm_calls_history:!1})}function g(e){var t=Object.values((0,h.getLang)("months_of","raw")),r=Object.values((0,h.getLang)("months_sm_of","raw"));return new a.Lang(e,{keys:(0,n.__assign)((0,n.__assign)({},window.lang),{global_months_of:t,global_months_short_of:r}),config:window.langConfig})}function v(){return{init:function(){return 1},destroy:function(){},show:function(){},hide:function(){},val:function(){return""},focus:function(){},swapCallbacks:function(){}}}function _(){return{create:function(){return function(){}},isUploading:function(){return!1},removeMedia:function(){}}}var R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fromExternalUrl=function(e){return t.fromUrl(e)},t.openLink=function(e,r){var n=null;if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){if(e.preventDefault(),"AttachProxyRoute"===r.kind||"AttachMediaProxyRoute"===r.kind)switch(n=t.toUrl(r),r.kind){case"AttachMediaProxyRoute":switch((o=r.attach).kind){case"Photo":return void(0,d.showPhoto)(o.ownerId+"_"+o.id,o.messageAccessKey||o.accessKey||"",{queue:1},e.nativeEvent);case"Video":return void(0,u.showVideo)(o.ownerId+"_"+o.id,o.accessKey||"",{autoplay:1,minimized:0,module:"",queue:1},e.nativeEvent);default:return void y(o)}case"AttachProxyRoute":var o;switch((o=r.attach).kind){case"Poll":return void(0,d.showWiki)({w:"poll"+o.ownerId+"_"+o.id},!1,e.nativeEvent,{queue:1});case"Story":return void(0,m.showStory)("story"+o.ownerId+"_"+o.id+"/"+o.ownerId+"_"+o.id);case"Gift":return o.isStickerStyle&&o.id?window.Emoji.clickSticker(Math.abs(o.id)):void(0,l.showBox)("al_gifts.php",{act:"box",tab:"sent",mid:window.vk.id},{cache:1,stat:["gifts.css",window.jsc("web/gifts.js")]});case"MoneyTransfer":return void(0,l.showBox)("al_payments.php?act=money_transfer_history_box",{});case"Geo":return void(0,l.showBox)("al_places.php",{act:"show_photo_place",lat:o.coordinates.latitude,long:o.coordinates.longitude,provider:4})}}else switch(r.kind){case"MiniAppModalRoute":var a=t.toUrl(r);return void(a&&(0,d.showWiki)({w:a.replace("/",""),app_ref:"snippet_im"},!1,e.nativeEvent));case"PollModalRoute":var i=r.pollId,s=r.ownerId;return void(0,d.showWiki)({w:"poll"+s+"_"+i},!1,e.nativeEvent,{queue:1});default:n=t.toUrl(r)}n&&window.nav.go(n)}},t}return(0,n.__extends)(t,e),t.prototype.toUrl=function(t){switch(t.kind){case"AttachProxyRoute":return e.prototype.toUrl.call(this,t);case"AttachMediaProxyRoute":switch(t.attach.kind){case"Photo":var r=t.attach.accessKey?"/"+t.attach.accessKey:"";return"/im?z=photo"+t.attach.ownerId+"_"+t.attach.id+r;case"Video":r=t.attach.accessKey?"/"+t.attach.accessKey:"";return"/im?z=video"+t.attach.ownerId+"_"+t.attach.id+r;default:return y(t.attach),null}case"PeerModalRoute":var n=t.peerId;return f.Ranges.isUserIdTransitional(n)?"/id"+n:f.Ranges.isGroupId(n)?"/club"+Math.abs(n):f.Ranges.isContactId(n)?"/im?sel=mr"+(n-1e9):"/im?sel="+n;case"PollModalRoute":var o=t.pollId;return"/im?w=poll"+t.ownerId+"_"+o;case"MiniAppModalRoute":return this.checkIsolation()?null:"/app"+t.miniAppId;case"ConvoRoute":if(t.search)return"/im?sel="+t.peerId+"&st="+encodeURIComponent(t.search);default:return e.prototype.toUrl.call(this,t)}},t}(i.Router);function k(){return!window.curNotifier||window.curNotifier.is_server||c.browser.safari}function I(e){return new Promise((function(t){return setTimeout(t,e)}))}function y(e){throw new Error("Exhaustivness failure! This should never happen.")}var P="callsApp"}}]);try{stManager.done("dist/18d48385cf5047e1bdd5e25ec66e5a27.4127b2b04f8ab51fc0c5.js")}catch(e){}