(()=>{"use strict";var e,t,n,o,i,r,a={114233:(e,t,n)=>{n.d(t,{AdsEvents:()=>f});n(57327),n(226699),n(682772),n(140561),n(115306);var o=n(189798),i=n(368752),r=n(873589),a=n(135856),s=n(937884),u=n(274642),l=n(819086),c=[],d=(0,i.debounce)((()=>{if(0!==c.length){var e=c.splice(0,c.length);(0,o.api)("adsint.registerAdEvents",{events:JSON.stringify(e)}).catch((t=>{for(;e.length;)c.unshift(e.pop())}))}}),1e3),f={register:(e,t)=>{(e=>["like","unlike","share","music_pause","music_play","music_track_to_profile","music_playlist_to_profile","music_track_share","music_playlist_share","music_track_share_to_story","music_playlist_share_to_story"].includes(e))(e)&&(e=>!!e)(t)&&(c.push({event_type:e,ad_data:t}),d())},handleShareEvent:(e,t,n)=>{var o=e&&e.dataset&&e.dataset.ad;if(!o||!t)return null;var i="share";0===t.indexOf("audio")&&(window.Wall&&Wall.triggerAdStat(e,"audio_click"),0===t.indexOf("audio_playlist")?i=2==n?"music_playlist_share_to_story":"music_playlist_share":0===t.indexOf("audio")&&(i=2==n?"music_track_share_to_story":"music_track_share")),f.register(i,o)}};(0,a.onDomReady)((()=>{var e="adsEvents",t=(0,u.getAudioPlayer)();if(t&&!(t.subscribers&&t.subscribers.filter((t=>t.context===e)).length>0)){var n={[s.AudioPlayerEventType.PLAY]:"music_play",[s.AudioPlayerEventType.PAUSE]:"music_pause",[s.AudioPlayerEventType.MUSIC_AUDIOS_ADD]:"music_track_to_profile",[s.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD]:"music_playlist_to_profile"},o=e=>{if(n[e]){var o=l.AudioUtils.audioTupleToAudioObject(t.getCurrentAudio()),i=o?document.querySelector("._audio_row_"+o.fullId+"."+l.AudioUtils.AUDIO_CURRENT_CLS):null,a=(0,r.domClosest)("post",i),s=a&&a.dataset&&a.dataset.ad;s||(s=(e=>{if(!e)return null;var t=0===e.indexOf("feed:")?e.replace("feed:","post"):null,n=t&&document.getElementById(t);return n&&n.dataset&&n.dataset.ad})(t._getPlayingContext())),s&&(window.Wall&&Wall.triggerAdStat(a,"audio_click"),f.register(n[e],s))}};t.on(e,s.AudioPlayerEventType.PLAY,(()=>o(s.AudioPlayerEventType.PLAY))),t.on(e,s.AudioPlayerEventType.PAUSE,(()=>o(s.AudioPlayerEventType.PAUSE))),t.on(e,s.AudioPlayerEventType.MUSIC_AUDIOS_ADD,(()=>o(s.AudioPlayerEventType.MUSIC_AUDIOS_ADD))),t.on(e,s.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD,(()=>o(s.AudioPlayerEventType.MUSIC_PLAYLISTS_ADD)))}}))},58255:(e,t,n)=>{n.d(t,{default:()=>i});var o=n(111132);function i(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,n)=>{function o(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>o})},374277:(e,t,n)=>{function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>i})},429697:(e,t,n)=>{n.d(t,{default:()=>v});var o=n(722122),i=n(419756),r=n(841788),a=n(58255),s=n(374277),u=n(667294),l=n(696630),c=n(559391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},f=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1];t.removeClasses(i,"exit"),t.addClass(i,r?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1]?"appear":"enter";t.addClass(i,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var o=t.resolveArguments(e,n),i=o[0],r=o[1]?"appear":"enter";t.removeClasses(i,r),t.addClass(i,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,o="string"==typeof n,i=o?""+(o&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:o?i+"-active":n[e+"Active"],doneClassName:o?i+"-done":n[e+"Done"]}},t}(0,r.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var o=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(o+=" "+i),"active"===n&&e&&(0,c.forceReflow)(e),o&&(this.appliedClasses[t][n]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))}(e,o))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],o=n.base,i=n.active,r=n.done;this.appliedClasses[t]={},o&&d(e,o),i&&d(e,i),r&&d(e,r)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.default)(e,["classNames"]));return u.createElement(l.default,(0,o.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(u.Component);f.defaultProps={classNames:""},f.propTypes={};const v=f},696630:(e,t,n)=>{n.d(t,{default:()=>h});var o=n(419756),i=n(841788),r=n(667294),a=n(973935),s=n(806035),u=n(500220),l=n(559391),c="unmounted",d="exited",f="entering",v="entered",p="exiting",g=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var i,r=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?r?(i=d,o.appearStatus=f):i=v:i=t.unmountOnExit||t.mountOnEnter?c:d,o.state={status:i},o.nextCallback=null,o}(0,i.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==v&&(t=f):n!==f&&n!==v||(t=p)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===f){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&(0,l.forceReflow)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:c})},n.performEnter=function(e){var t=this,n=this.props.enter,o=this.context?this.context.isMounting:e,i=this.props.nodeRef?[o]:[a.findDOMNode(this),o],r=i[0],u=i[1],l=this.getTimeouts(),c=o?l.appear:l.enter;!e&&!n||s.default.disabled?this.safeSetState({status:v},(function(){t.props.onEntered(r)})):(this.props.onEnter(r,u),this.safeSetState({status:f},(function(){t.props.onEntering(r,u),t.onTransitionEnd(c,(function(){t.safeSetState({status:v},(function(){t.props.onEntered(r,u)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!s.default.disabled?(this.props.onExit(o),this.safeSetState({status:p},(function(){e.props.onExiting(o),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(o)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),o=null==e&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],r=i[0],s=i[1];this.props.addEndListener(r,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(u.default.Provider,{value:null},"function"==typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function m(){}g.contextType=u.default,g.propTypes={},g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},g.UNMOUNTED=c,g.EXITED=d,g.ENTERING=f,g.ENTERED=v,g.EXITING=p;const h=g},500220:(e,t,n)=>{n.d(t,{default:()=>o});const o=n(667294).createContext(null)},806035:(e,t,n)=>{n.d(t,{default:()=>o});const o={disabled:!1}},559391:(e,t,n)=>{n.d(t,{forceReflow:()=>o});var o=function(e){return e.scrollTop}},311931:(e,t,n)=>{n.d(t,{useEventListenerOnRef:()=>i});var o=n(667294),i=function(e,t,n){(0,o.useLayoutEffect)((function(){var o=e.current;if(o)return o.addEventListener(t,n,{passive:!0}),function(){o.removeEventListener(t,n)}}),[e.current])}},868025:(e,t,n)=>{n.d(t,{useOnClickOutside:()=>i});var o=n(667294),i=function(e,t){(0,o.useEffect)((function(){var n=function(n){!e.current||n.target instanceof Node&&e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",n,{passive:!0}),document.addEventListener("touchstart",n,{passive:!0}),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},799336:(e,t,n)=>{n.d(t,{parseReactWikiLinks:()=>d});var o=n(570655),i=n(785893),r=n(667294),a=n(86894),s={target:"_self",withVKUILink:!1,withNewRegex:!1},u=new RegExp("\\[?("+/(?:http(s)?:\/\/)/.source+"?"+/[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+/.source+")"+/(?:\|([\wёЁА-я ]{1,}))/.source+"?\\]?"),l=new RegExp("("+u.source+"|"+/\[(id|public|club|event)-?[\d]{1,}\|[\wёЁА-я ]{1,}\]/.source+")","gi"),c=/^(http(s)?:\/\/)?vk.(com|ru)/gi;function d(e,t){void 0===t&&(t=s);var n=t.target,u=void 0===n?s.target:n,d=t.withVKUILink,f=void 0===d?s.withVKUILink:d,v=e.match(t.withNewRegex?l:/\[(.*?)\]/g),p=v?v.map((function(e){return e.replace(/\[|(.*?)\]/g,"$1")})):[];if(!v||!p.length)return(0,i.jsx)(r.Fragment,{children:e},void 0);var g=f?a.Link:"a",m=p.map((function(e,n){var r,a,s=(0,o.__read)(e.split("|"),2),l=s[0],d=s[1],f=(null===(r=t.hrefMap)||void 0===r?void 0:r[l])||c.test(l)?l.replace(c,""):l,v=null===(a=t.onClickMap)||void 0===a?void 0:a[l];return(0,i.jsx)(g,(0,o.__assign)({href:f,target:u,onClick:v},{children:d||l}),n)})),h=[];return v.forEach((function(t,n){var o=e.indexOf(t);h.push(e.substr(0,o)),h.push(m[n]),e=e.slice(o+t.length)})),h.push(e),(0,i.jsx)(r.Fragment,{children:h},void 0)}},690847:(e,t,n)=>{n.d(t,{makePendingRequestState:()=>o});var o=function(e){void 0===e&&(e={});var t=Object.create(null);return{cancel:function(e){var n=t[e];null==n||n.abort(),delete t[e]},register:function(n,o){var i,r=t[n],a=function(e){var n;return void 0!==(null===(n=t[e])||void 0===n?void 0:n.throttleTimerId)}(n);if(r){if(a)return!1;console.warn("Reactions pending request for key '"+n+"' wasn't unregistered, but has to be overwritten.\nPending request should be cancelled through .cancel() explicitly before .register()"),r.abort()}t[n]={abort:o},void 0!==(null==e?void 0:e.throttleMs)&&(i=function(e,n){var o=t[e];if(o){o.throttleTimerId&&window.clearTimeout(o.throttleTimerId);var i=window.setTimeout((function(){var n=t[e];n&&(n.throttleTimerId=void 0)}),n);return o.throttleTimerId=i,i}}(n,e.throttleMs));return function(){var e;(null===(e=t[n])||void 0===e?void 0:e.abort)===o&&delete t[n],window.clearTimeout(i)}}}}},52104:(e,t,n)=>{var o=n(434389);window.Reactions=o.ReactionsEntryGlobal,(0,o.init)();try{window.stManager.done(window.jsc("web/reactions.js"))}catch(e){}},453991:(e,t,n)=>{n.d(t,{ReactionImage:()=>u});var o=n(570655),i=n(785893),r=n(667294),a=n(546876),s=n(659397),u=(0,r.forwardRef)((function(e,t){var n=e.animationURL,u=e.isPlaying,l=e.image,c=e.loadAnimationParams,d=(0,r.useRef)(null),f=(0,a.useReactionAnimation)({animationElem:d,animationURL:n,play:u,loadAnimationParams:c}).isAnimationReady&&u;return(0,i.jsx)("div",(0,o.__assign)({className:"ReactionImage",style:{backgroundImage:!f&&l?"url("+l+")":void 0},ref:t},{children:(0,i.jsx)("div",{className:(0,s.classNames)("ReactionImage__animationContainer",{"ReactionImage__animationContainer--hidden":!f}),ref:d},void 0)}),void 0)}))},640248:(e,t,n)=>{n.d(t,{PreloadImages:()=>r});var o=n(740672),i=n(667294),r=(0,i.memo)((function(e){var t=e.imageURLs;return(0,i.useEffect)((function(){Promise.all(t.map((function(e){return(0,o.preloadImage)(e)}))).catch((function(){}))}),[t]),null}))},442513:(e,t,n)=>{n.d(t,{userPhotoStub:()=>s,ReactedUsersStack:()=>u,stackConfigForVisibleCount:()=>l});var o=n(570655),i=n(785893),r=n(659397),a=n(342269),s={kind:"stub"};function u(e){var t=e.photos,n=e.size,s=e.totalCount,u=e.visibleCount,l=null!=s?s:t.length,c=Math.min(t.length,u);l===c+1&&t.length>=c+1&&(c+=1);var d=Math.max(0,l-c),f=d>0,v=t.slice(0,c),p=(0,a.formatCount)(d);return(0,i.jsx)("div",(0,o.__assign)({className:(0,r.classNames)("ReactedUsersStack","ReactedUsersStack--size-"+n,{"ReactedUsersStack--others":f})},{children:(0,i.jsxs)("div",(0,o.__assign)({className:"ReactedUsersStack__photos",role:"presentation"},{children:[v.map((function(e,t){return function(e){return"profile"===e.kind}(e)?(0,i.jsx)("div",{className:"ReactedUsersStack__photo",role:"img",style:{backgroundImage:"url("+e.imageURL+")"},title:e.title},t):function(e){return"stub"===e.kind}(e)?(0,i.jsx)("div",{role:"img",className:"ReactedUsersStack__photo ReactedUsersStack__photo--stub"},t):null})),f&&(0,i.jsx)("div",{className:"ReactedUsersStack__photo ReactedUsersStack__photo--others","aria-hidden":"true",dangerouslySetInnerHTML:{__html:"+"+p}},void 0)]}),void 0)}),void 0)}function l(e){var t=e+1;return{maxStackItems:t,visibleCount:e,stubItemsForPhotos:function(e){return Math.min(e,t)}}}},471242:(e,t,n)=>{n.d(t,{Reaction:()=>c});var o=n(570655),i=n(785893),r=n(152278),a=n(659397),s=n(285262),u=n(882824),l=n(453991),c=function(e){var t=e.animationURL,n=e.image,c=e.isOpenedDefault,d=e.onMouseEnter,f=e.onReactionClick,v=e.reactionId,p=e.reactionTitle,g=(0,u.useReactedUsersConfig)(v),m=function(){null==f||f(v)};return(0,i.jsxs)("div",(0,o.__assign)({className:(0,a.classNames)("Reaction",{"Reaction--openedDefault":c&&g.shouldShowReactedUsers}),onClick:function(e){m(),e.stopPropagation()},onKeyDown:function(e){[r.KEY.RETURN,r.KEY.SPACE].includes(e.keyCode)&&(m(),e.stopPropagation())},onMouseEnter:d,tabIndex:0,role:"button","aria-label":p||void 0},{children:[(0,i.jsx)("div",{className:"Reaction__hoverArea"},void 0),(0,i.jsx)("div",(0,o.__assign)({className:"Reaction__title"},{children:(0,i.jsx)(s.ReactionTitle,{reactedUsersConfigResult:g,reactionId:v,title:p},void 0)}),void 0),(0,i.jsx)("div",(0,o.__assign)({className:"Reaction__image"},{children:(0,i.jsx)(l.ReactionImage,{isPlaying:!0,image:n,animationURL:t},void 0)}),void 0)]}),void 0)}},285262:(e,t,n)=>{n.d(t,{ReactionTitle:()=>u});var o=n(570655),i=n(785893),r=n(667294),a=n(659397),s=n(859036),u=function(e){var t=e.reactedUsersConfigResult,n=e.reactionId,u=e.title,l=(0,r.useRef)(null),c=t.reactedUsersConfig,d=t.shouldShowReactedUsers;return(0,i.jsxs)("div",(0,o.__assign)({className:(0,a.classNames)("ReactionTitle",{"ReactionTitle--withUsers":d}),ref:l},{children:[(0,i.jsx)("div",(0,o.__assign)({className:"ReactionTitle__name"},{children:u}),void 0),(0,i.jsx)("div",(0,o.__assign)({className:(0,a.classNames)({"ReactionTitle__reactedUsers--visible":d})},{children:(0,i.jsx)(s.ReactionsMenuReactedUsersPreview,{parentClickContainerRef:l,reactedUsersConfig:c,reactionId:n},void 0)}),void 0)]}),void 0)}},339222:(e,t,n)=>{n.d(t,{ReactionsMenu:()=>d});var o=n(570655),i=n(785893),r=n(667294),a=n(659397),s=n(152278),u=n(471242),l=n(840075),c=n(803609),d=(0,r.forwardRef)((function(e,t){var n=e.close,d=e.currentReactionId,f=e.onReactionChoose,v=e.position,p=void 0===v?l.PopperVerticalPosition.TOP:v,g=e.reactionsOptions,m=e.onMouseEnter,h=e.onMouseLeave,_=(0,c.useReactionMenuConfig)(),E=p===l.PopperVerticalPosition.TOP?null==_?void 0:_.openedDefaultReactionId:void 0,R=(0,o.__read)((0,r.useState)(E),2),b=R[0],C=R[1],y=(0,r.useCallback)((function(e){e.keyCode===s.KEY.ESC&&(null==n||n())}),[]),w=(0,r.useCallback)((function(){C(void 0)}),[]);return(0,i.jsx)("div",(0,o.__assign)({className:(0,a.classNames)("ReactionsMenu ReactionsMenu--extraHoverArea",{"ReactionsMenu--extraHoverAreaToTop":p===l.PopperVerticalPosition.TOP,"ReactionsMenu--extraHoverAreaToBottom":p===l.PopperVerticalPosition.BOTTOM}),onKeyDown:y,onMouseEnter:m,onMouseLeave:h,ref:t},{children:(0,i.jsx)("div",(0,o.__assign)({className:"ReactionsMenu__inner"},{children:g.items.map((function(e){return(0,i.jsx)(u.Reaction,{animationURL:e.animationURL,image:e.imageMenuURL,isOpenedDefault:e.id===b,isSelected:e.id===d,onMouseEnter:w,onReactionClick:f,reactionId:e.id,reactionTitle:e.title},e.id)}))}),void 0)}),void 0)}))},337386:(e,t,n)=>{n.d(t,{useReactionsMenuContext:()=>u,ReactionsMenuContextProvider:()=>l});var o=n(570655),i=n(785893),r=n(667294),a=n(239545),s=(0,r.createContext)({currentReactionId:void 0,likeObjectId:void 0,reactedUsers:a.REMOTE_RESOURCE_STATE_CONTEXT_STUB,reactedUsersCounts:void 0,titleVariant:void 0,triggerClose:function(){}}),u=function(){return(0,r.useContext)(s)},l=function(e){var t=e.value,n=e.children,r=(0,a.useRemoteResource)();return(0,i.jsx)(s.Provider,(0,o.__assign)({value:(0,o.__assign)((0,o.__assign)({},t),{reactedUsers:r})},{children:n}),void 0)}},859036:(e,t,n)=>{n.d(t,{ReactionsMenuReactedUsersPreview:()=>d});var o=n(570655),i=n(785893),r=n(667294),a=n(30389),s=n(442513),u=n(337386),l=n(311931),c=n(882824);function d(e){var t=e.parentClickContainerRef,n=e.reactionId,d=e.reactedUsersConfig,f=(0,u.useReactionsMenuContext)(),v=f.likeObjectId,p=f.triggerClose,g=(0,r.useCallback)((function(e){if(e.stopPropagation(),!v)throw new Error("ReactionTitle: unable to open reacted modal, missing object id");(null==d?void 0:d.hasSomeReactions)&&(p(),(0,a.showReactedModal)(n,v))}),[]);return(0,l.useEventListenerOnRef)(t,"click",g),(0,i.jsx)("div",(0,o.__assign)({className:"ReactionsMenuReactedUsersPreview"},{children:d&&d.userPhotos?(0,i.jsx)(s.ReactedUsersStack,{visibleCount:c.visibleCount,totalCount:d.totalPhotosCount,photos:d.userPhotos,size:"s"},void 0):null}),void 0)}},451858:(e,t,n)=>{n.d(t,{ReactionsMenuStateContainer:()=>a});var o=n(570655),i=n(785893),r=n(337386),a=function(e){var t=e.children,n=e.contextValue;return(0,i.jsx)(r.ReactionsMenuContextProvider,(0,o.__assign)({value:n},{children:t}),void 0)}},889323:(e,t,n)=>{n.d(t,{getUsersForReactionId:()=>i,isTitleVariantWithUsers:()=>r});var o=n(1925);function i(e,t){var n,o=null===(n=e.byReactionId)||void 0===n?void 0:n[t];if(void 0!==o)return o}function r(e){return e===o.TitleVariantWithLikedUsers}},882824:(e,t,n)=>{n.d(t,{visibleCount:()=>f,useReactedUsersConfig:()=>v});var o,i=n(570655),r=n(337386),a=n(442513),s=n(785480),u=n(1925),l=n(889323),c=n(517760),d=(o=(0,a.stackConfigForVisibleCount)(3)).stubItemsForPhotos,f=o.visibleCount;function v(e){var t,n=(0,r.useReactionsMenuContext)(),o=n.currentReactionId,f=n.reactedUsers.valueMaybeStale,v=function(e){var t=(0,r.useReactionsMenuContext)(),n=t.titleVariant,o=void 0===n?u.TITLE_VARIANT_DEFAULT:n,i=t.reactedUsers.valueMaybeStale,a=t.reactedUsersCounts;if(!(0,l.isTitleVariantWithUsers)(o))return;return function(e,t,n){var o=t?(0,l.getUsersForReactionId)(t,e):void 0;if(o)return{kind:"reacted_users",reactedUsersForReaction:o};var i=n?(0,c.counterForReactionId)(n,e):void 0;if(i&&i>0)return{kind:"count_only_stub",counter:i};return}(e,i,a)}(e),g=void 0,m=void 0;if(v&&"reacted_users"===v.kind&&v.reactedUsersForReaction.users){var h=v.reactedUsersForReaction,_=h.users,E=void 0===_?[]:_,R=h.totalCount;R=(y=(0,s.withCurrentUser)(E,R,e,o,null==f?void 0:f.currentUser)).totalCount,E=y.users,m=null!=R?R:E.length,g=E.map(p)}else if(v&&function(e){return"count_only_stub"===e.kind}(v)){var b=v.counter;b=(y=(0,s.withCurrentUser)([],b,e,o,null==f?void 0:f.currentUser)).totalCount;var C=y.users;b&&(m=b,g=(0,i.__spreadArray)((0,i.__spreadArray)([],(0,i.__read)(C.map(p)),!1),(0,i.__read)(Array.from({length:d(b)},(function(){return a.userPhotoStub}))),!1))}else{var y;m=(y=(0,s.withCurrentUserAddedOnly)(e,o,null==f?void 0:f.currentUser)).totalCount,g=y.users.map(p)}m=null!==(t=null!=m?m:null==g?void 0:g.length)&&void 0!==t?t:0;var w=Boolean(m&&m>0);return w?{shouldShowReactedUsers:!0,reactedUsersConfig:{hasSomeReactions:w,totalPhotosCount:m,userPhotos:g}}:{shouldShowReactedUsers:!1,reactedUsersConfig:void 0}}function p(e){return{kind:"profile",imageURL:e.ownerImageURL,title:e.ownerName}}},785480:(e,t,n)=>{n.d(t,{useReactedUsersPreview:()=>f,withCurrentUser:()=>g,withCurrentUserAddedOnly:()=>m});var o=n(570655),i=n(517760),r=n(541848),a=n(485207),s=n(889323),u=n(337386),l=n(738316),c=n(667294),d=n(853005);function f(e){var t=e.attemptRefetch,n=(0,u.useReactionsMenuContext)(),i=n.likeObjectId,d=n.titleVariant,f=n.reactedUsers,g=(0,l.useReactionsGlobalStateForObject)(i,{payloadIsSuitable:v}).counts,m=(0,o.__read)((0,c.useState)(!1),2),h=m[0],_=m[1];(0,c.useEffect)((function(){g&&_(!0)}),[g]),(0,c.useEffect)((function(){i&&(0,s.isTitleVariantWithUsers)(d)&&(t&&("initial"===f.resource.kind||"loading"!==f.resource.kind&&h)&&function(){(0,o.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,u;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:if(!i)return[2];h&&_(!1),f.setLoading(!0),e=(0,r.requestGetReacted)(i),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.promise];case 2:return t=l.sent(),n=function(e){var t,n,i,r,a,s=e.reactedMenuStats;if(!s)return;var u=void 0,l=s.byReactionId;if(l){u={};try{for(var c=(0,o.__values)(Object.entries(l)),d=c.next();!d.done;d=c.next()){var f=(0,o.__read)(d.value,2),v=f[0],g=f[1];u[v]={totalCount:null!==(i=g.totalCount)&&void 0!==i?i:void 0,users:null!==(a=null===(r=g.users)||void 0===r?void 0:r.map((function(e){return p(e)})))&&void 0!==a?a:void 0}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}}var m=s.currentUser?p(s.currentUser):s.currentUser;return{byReactionId:u,currentUser:m}}(t),n?(f.setLoaded(n),[3,4]):(s=new Error("useReactedUsersTooltip: failed to transform response"),(0,a.isDebugEnabled)()&&console.error(s),f.setFailed(s),[2]);case 3:return u=l.sent(),f.setFailed(u),[3,4];case 4:return[2]}}))}))}())}),[d,i,h,t])}function v(e){return"counts_only"===e.kind||!0===e.isQueueUpdate}function p(e){return(0,o.__assign)((0,o.__assign)({},e),{ownerName:e.ownerName?(0,d.stringWithHTMLEntitiesDecode)(e.ownerName):void 0})}function g(e,t,n,o,r){var a=null!=t?t:0,s=window.vk.id;if((0,i.isReactionIdSet)(o)&&o===n&&r){var u=function(e,t,n,o,i){if(i){var r=i.ownerImageURL,a=i.ownerName;if(r&&!n.find((function(t){return t.ownerId===e})))return{currentUser:{ownerId:e,ownerImageURL:r,ownerName:a},totalCount:o+1}}}(s,0,e,a,r);if(null==u?void 0:u.currentUser){var l={ownerId:u.currentUser.ownerId,ownerImageURL:u.currentUser.ownerImageURL,ownerName:u.currentUser.ownerName};return{totalCount:u.totalCount,users:[l].concat(e||[])}}}else if((0,i.isReactionIdUnset)(o)||o!==n){var c=function(e,t,n,o){var i=n&&n.filter((function(t){return t.ownerId!==e})),r=i&&n&&i.length<n.length;if(r)return{totalCount:r?o-1:o,users:i}}(s,0,e,a);if(c)return{totalCount:c.totalCount,users:c.users}}return{totalCount:a,users:e}}function m(e,t,n){return g([],0,e,t,n)}},546876:(e,t,n)=>{n.d(t,{useReactionAnimation:()=>s});var o=n(570655),i=n(667294),r=n(646346),a=n(819633),s=function(e){var t=e.animationElem,n=e.animationURL,s=e.play,u=void 0===s||s,l=e.loadAnimationParams,c=(0,i.useRef)(null),d=(0,o.__read)((0,i.useState)((function(){return n&&(0,r.animationItemHasData)(n)})),2),f=d[0],v=d[1];return(0,i.useEffect)((function(){if(n){if(t.current){var e=function(){};return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var i;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:return t.current?(i=c,[4,(0,r.getAnimationAsync)(n,t.current,{loadAnimationParams:(0,o.__assign)({autoplay:!0},l)})]):[3,2];case 1:i.current=s.sent(),e=function(){v(!0)},(0,a.onAnimationReady)(c.current,e),s.label=2;case 2:return[2]}}))})),function(){var t,n;!c.current||!c.current._cbs||(null===(t=c.current)||void 0===t||t.removeEventListener("DOMLoaded",e),null===(n=c.current)||void 0===n||n.destroy()),v(!1),c.current=null}}console.error(new Error("Missing animation container"))}else c.current=null}),[n,t]),(0,i.useEffect)((function(){var e,t;f&&(u?null===(e=c.current)||void 0===e||e.play():null===(t=c.current)||void 0===t||t.stop())}),[u,f]),{isAnimationReady:f}}},239881:(e,t,n)=>{n.d(t,{useReactionMenuSet:()=>r});var o=n(667294),i=n(385667),r=function(e){return(0,o.useMemo)((function(){return(0,i.getReactionSet)(e)}),[e])}},738316:(e,t,n)=>{n.d(t,{useReactionsGlobalStateForObject:()=>l,useReactionsGlobalUpdateEventsForObject:()=>c});var o=n(570655),i=n(667294),r=n(517760),a=n(453580),s=n(465864),u=n(740672);function l(e,t){var n=(void 0===t?{}:t).payloadIsSuitable,a=(0,o.__read)((0,i.useState)(void 0),2),s=a[0],l=a[1],d=(0,u.usePreviousRef)(s),f=(0,i.useCallback)((function(e){var t;n&&!n(e)||e.counts&&!(0,r.areCountersEqual)(e.counts,null!==(t=d.current)&&void 0!==t?t:void 0)&&l(e.counts)}),[e]);return c(e,f),{counts:s}}function c(e,t){!function(e){var t=e.onAnyPostCountsAnyUpdate;(0,i.useEffect)((function(){return(0,a.registerNonGlobalNonUniqueListener)(a.WallDataEvents.post_reactions_counts_update,t)}),[t])}({onAnyPostCountsAnyUpdate:(0,i.useCallback)((function(n){(0,s.likePostObjectId)(n.postFullId)===e&&t(n)}),[e])})}},239545:(e,t,n)=>{n.d(t,{REMOTE_RESOURCE_STATE_CONTEXT_STUB:()=>a,useRemoteResource:()=>l});var o=n(570655),i=n(667294),r={kind:"initial"},a={valueMaybeStale:void 0,value:void 0,reset:function(){},setFailed:function(){},setLoaded:function(){},setLoading:function(){},resource:r};function s(e){if("value"in e&&void 0!==e.value)return e.value}function u(e){var t=s(e);return void 0!==t?t:"staleValue"in e&&void 0!==e.staleValue?e.staleValue:void 0}function l(){var e=(0,o.__read)((0,i.useState)(r),2),t=e[0],n=e[1];return{valueMaybeStale:u(t),value:s(t),resource:t,setFailed:(0,i.useCallback)((function(e,t){void 0===t&&(t=!1),n((function(n){return{kind:"failed",error:e,staleValue:t?u(n):void 0}}))}),[]),setLoaded:(0,i.useCallback)((function(e){n({kind:"loaded",value:e})}),[]),setLoading:(0,i.useCallback)((function(e){void 0===e&&(e=!1),n((function(t){return{kind:"loading",staleValue:e?u(t):void 0}}))}),[]),reset:(0,i.useCallback)((function(){n((function(){return r}))}),[])}}},263630:(e,t,n)=>{n.d(t,{ReactionsMenuButton:()=>h});var o=n(570655),i=n(785893),r=n(667294),a=n(485207),s=n(803609),u=n(31711),l=n(640248),c=n(892239),d=n(339222),f=n(239881),v=n(706658),p=n(672544),g=n(451858),m=n(629401),h=function(e){var t=e.objectId,n=e.onReactionChoose,h=e.reactionButtonContainerElem,_=e.reactionIdInitial,E=e.reactionSetId,R=e.reactionsCounts,b=e.styleVariant,C=e.triggerMouseenterOnInitial,y=e.titleVariant,w=(0,u.useTooltipVisibility)(),S=w.isAllowedReenter,T=w.tooltipVisibility,k=w.triggerClose,P=(0,o.__read)((0,r.useState)(_),2),x=P[0],I=P[1];(0,r.useEffect)((function(){var e=[(0,c.addReactionChooseListener)(t,(function(){k()})),(0,c.addDataUpdateListener)(t,(function(e){I(e.currentReactionId)}))];return function(){e.forEach((function(e){e()}))}}),[]);var U=(0,f.useReactionMenuSet)(E),A=(0,s.useReactionMenuConfig)(),O=(0,r.useMemo)((function(){var e;return null!==(e=null==U?void 0:U.items.map((function(e){return e.imageMenuURL})))&&void 0!==e?e:[]}),[null==U?void 0:U.id]);(0,r.useEffect)((function(){var e;U&&void 0!==x&&!(null===(e=U.items)||void 0===e?void 0:e.find((function(e){return e.id===x})))&&console.warn("Current reaction ID "+x+" is not found in set '"+E+"'")}),[U]);if(!U)return console.warn("ReactionsMenuButton init error, unavailable reaction set: "+E),null;var L={close:k,currentReactionId:x,onReactionChoose:function(e){(k(),e!==x)&&n(e)},reactionsOptions:U},M={currentReactionId:x,likeObjectId:t,reactedUsersCounts:R,titleVariant:y,triggerClose:k};return(0,i.jsxs)(g.ReactionsMenuStateContainer,(0,o.__assign)({contextValue:M},{children:[(0,i.jsx)(v.ReactionsMenuTooltip,{delayShow:null==A?void 0:A.menuShowDelay,getAttachElem:function(e){if(e){var t=(0,p.getClosestLikeBtnContainerElem)(e);return t||(0,a.isDebugEnabled)()&&console.warn("ReactionsMenuButton missing attach target:",e),t}},isAllowedReenter:S,popup:d.ReactionsMenu,popupProps:L,reactionButtonContainer:h,styleVariant:b,triggerMouseenterOnInitial:C,visibility:T,onOpenStateChange:function(e,t){e&&t&&(0,m.loadBadgesWallOnboarding)({target:t})}},void 0),(0,i.jsx)(l.PreloadImages,{imageURLs:O},void 0)]}),void 0)}},706658:(e,t,n)=>{n.d(t,{ReactionsMenuTooltip:()=>g});var o=n(570655),i=n(785893),r=n(667294),a=n(508271),s=n(785480),u=n(740672),l=n(461157),c=n(46373),d=n(31711),f=n(126816),v=["--post-padding-lr"],p=function(){var e=document.createElement("div");return e.setAttribute("aria-hidden","true"),e},g=function(e){var t=e.getAttachElem,n=e.initialIsOpen,g=void 0!==n&&n,m=e.isAllowedReenter,h=e.reactionButtonContainer,_=e.popup,E=e.popupProps,R=e.delayHide,b=void 0===R?a.HIDE_TOOLTIP_TIMEOUT:R,C=e.delayShow,y=void 0===C?a.SHOW_TOOLTIP_TIMEOUT:C,w=e.onOpenStateChange,S=e.onPopperVisibilityChange,T=e.styleVariant,k=e.triggerMouseenterOnInitial,P=void 0===k||k,x=e.visibility,I=void 0===x?d.TooltipVisibility.uncontrolled:x,U=void 0!==t,A=(0,o.__read)((0,r.useState)(g),2),O=A[0],L=A[1],M=I!==d.TooltipVisibility.uncontrolled,N=(0,u.usePrevious)(I),j=(0,r.useRef)(null),V=(0,r.useRef)(null),D=(0,r.useRef)(null);(0,s.useReactedUsersPreview)({attemptRefetch:O});var B=(0,f.useCSSVarsPropagation)({elementWithPropsRef:V,properties:v}).style,F=(0,r.useMemo)((function(){var e;if(t)return t(null!==(e=D.current)&&void 0!==e?e:void 0)}),[t,D.current]),W=(0,r.useCallback)((function(e,t){!t&&M||L(e)}),[M]);(0,r.useEffect)((function(){null==w||w(O,D.current)}),[O]),(0,r.useEffect)((function(){O&&m&&(m.current=d.IS_ALLOWED_REENTER_DEFAULT)}),[O]);var H=(0,c.useTooltipTrigger)({afterHide:W,afterShow:W,cancelCloseOnContentHover:m,delayHide:b,delayShow:y,ignoreMouseTriggers:M,popperPopupRef:j,reactionButtonContainer:h,triggerMouseenterOnInitial:P});return(0,r.useEffect)((function(){if(M){var e=I===d.TooltipVisibility.opened;return e||H.cancelDelayedOpening(),void L(e)}O&&N===d.TooltipVisibility.opened&&L(!1)}),[I,M]),(0,i.jsx)(l.TransitionPopper,(0,o.__assign)({attachTarget:F,isOpen:O,content:_,contentProps:(0,o.__assign)((0,o.__assign)({},E),H.contentProps),mode:"side",onPopperVisibilityChange:S,position:"t",popperContentStyle:B,popperPopupRef:j,ref:U?D:V,renderNodeFactory:p,styleVariant:T},{children:(0,i.jsx)("div",{className:"ReactionsMenuButtonPopperReference"},void 0)}),void 0)}},461157:(e,t,n)=>{n.d(t,{TransitionPopper:()=>f});var o=n(570655),i=n(785893),r=n(667294),a=n(483295),s=n(429697),u=n(814217),l=n(840075),c=n(630810),d={appear:150,enter:150,exit:150},f=(0,r.forwardRef)((function(e,t){var n,f,v=e.attachTarget,p=e.isOpen,g=void 0!==p&&p,m=e.content,h=e.contentProps,_=e.onPopperVisibilityChange,E=e.popperContentStyle,R=e.popperPopupRef,b=e.styleVariant,C=(0,o.__rest)(e,["attachTarget","isOpen","content","contentProps","onPopperVisibilityChange","popperContentStyle","popperPopupRef","styleVariant"]),y=function(e){var t=(0,o.__read)((0,r.useState)(!!e),2),n=t[0],i=t[1];return{isVisible:!!e||n,onEnter:(0,r.useCallback)((function(){i(!0)}),[]),onHidden:(0,r.useCallback)((function(){i(!1)}),[])}}(g),w=y.isVisible,S=y.onEnter,T=y.onHidden,k=(0,r.useRef)(null),P=(0,c.useCombinedRefs)(t,k),x=(0,l.usePopperTopAutoPosition)(null!==(n=k.current)&&void 0!==n?n:void 0,146,w),I=(f=(0,r.useRef)(!0),(0,r.useEffect)((function(){f.current=!1}),[]),f.current);(0,r.useEffect)((function(){I||null==_||_(w)}),[w]);var U=(0,a.classNames)("ReactionsMenuPopper _ReactionsMenuPopperRoot",{"ReactionsMenuPopper--alignType-post":"post"===b,"ReactionsMenuPopper--popperBottom":x===l.PopperVerticalPosition.BOTTOM,"ReactionsMenuPopper--popperTop":x===l.PopperVerticalPosition.TOP}),A=(0,i.jsx)(m,(0,o.__assign)({},h,{position:x}),void 0),O=(0,i.jsx)(s.default,(0,o.__assign)({appear:!0,in:g,classNames:"ReactionsMenuPopperTransition",onEnter:S,onExited:T,timeout:d},{children:(0,i.jsx)("div",(0,o.__assign)({className:U,ref:R,style:E},{children:A}),void 0)}),void 0);return(0,i.jsx)(u.Popper,(0,o.__assign)({},C,{align:"left",attachTarget:v,content:O,open:w,position:x,ref:P}),void 0)}))},126816:(e,t,n)=>{n.d(t,{useCSSVarsPropagation:()=>i});var o=n(667294),i=function(e){var t=e.elementWithPropsRef,n=e.properties;return(0,o.useMemo)((function(){var e=t.current;if(!e)return{style:{}};var o=window.getComputedStyle(e),i={};return n.forEach((function(e){var t=o.getPropertyValue(e);t&&(i[e]=t)})),{style:i}}),[t.current,n])}},840075:(e,t,n)=>{n.d(t,{PopperVerticalPosition:()=>o,usePopperTopAutoPosition:()=>a});var o,i=n(667294),r=n(959855);!function(e){e.BOTTOM="b",e.TOP="t"}(o||(o={}));var a=function(e,t,n){return(0,i.useMemo)((function(){return function(e,t){var n=o.TOP;if(!e)return n;var i=(0,r.default)(e),a=window.pageYOffset||document.documentElement.scrollTop;return i.top-a<t?o.BOTTOM:n}(e,t)}),[e,t,n])}},803609:(e,t,n)=>{n.d(t,{useReactionMenuConfig:()=>r});var o=n(667294),i=n(385667),r=function(){return(0,o.useMemo)((function(){return(0,i.getReactionConfig)()}),[])}},46373:(e,t,n)=>{n.d(t,{useTooltipTrigger:()=>r});var o=n(868025),i=n(667294),r=function(e){var t=e.afterHide,n=e.afterShow,r=e.cancelCloseOnContentHover,a=e.delayHide,s=void 0===a?0:a,u=e.delayShow,l=void 0===u?0:u,c=e.ignoreMouseTriggers,d=void 0!==c&&c,f=e.reactionButtonContainer,v=e.popperPopupRef,p=e.triggerMouseenterOnInitial,g=(0,i.useRef)(null),m=(0,i.useRef)(void 0),h=(0,i.useRef)(void 0),_=(0,i.useCallback)((function(){var e;window.clearTimeout(null!==(e=m.current)&&void 0!==e?e:void 0)}),[]),E=(0,i.useCallback)((function(){_(),null==n||n(!1)}),[n]),R=(0,i.useCallback)((function(){_(),null==n||n(!0)}),[n]);(0,o.useOnClickOutside)(v,E),(0,i.useEffect)((function(){return function(){window.clearTimeout(m.current),window.clearTimeout(h.current)}}),[]);var b=(0,i.useCallback)((function(e){return window.setTimeout((function(){null==t||t(!1)}),null!=e?e:0)}),[t]),C=function(){var e,t;(window.clearTimeout(null!==(e=h.current)&&void 0!==e?e:void 0),d)||(m.current=(t=l,window.setTimeout((function(){R()}),null!=t?t:0)))},y=function(e){var t,n;if(window.clearTimeout(null!==(t=m.current)&&void 0!==t?t:void 0),!d){e.relatedTarget instanceof HTMLElement&&(null===(n=null==g?void 0:g.current)||void 0===n?void 0:n.contains(e.relatedTarget))||(h.current=b(s))}};(0,i.useEffect)((function(){p&&C()}),[]),(0,i.useEffect)((function(){return null==f||f.addEventListener("mouseenter",C,{passive:!0}),null==f||f.addEventListener("mouseleave",y,{passive:!0}),function(){null==f||f.removeEventListener("mouseenter",C),null==f||f.removeEventListener("mouseleave",y)}}),[f]);var w={cancelDelayedOpening:_,contentProps:{ref:g,onMouseEnter:(0,i.useCallback)((function(){var e;window.clearTimeout(null!==(e=h.current)&&void 0!==e?e:void 0),(null==r?void 0:r.current)&&R()}),[d,R]),onMouseLeave:(0,i.useCallback)((function(e){d||f&&e.target instanceof HTMLElement&&f.contains(e.target)||(h.current=b(s))}),[b,s,d,f])}};return w}},31711:(e,t,n)=>{n.d(t,{TooltipVisibility:()=>o,IS_ALLOWED_REENTER_DEFAULT:()=>a,useTooltipVisibility:()=>s});var o,i=n(570655),r=n(667294);!function(e){e.closed="closed",e.opened="opened",e.uncontrolled="uncontrolled"}(o||(o={}));var a=!0,s=function(){var e=(0,i.__read)((0,r.useState)(o.uncontrolled),2),t=e[0],n=e[1],s=(0,r.useRef)(a),u=(0,r.useCallback)((function(e){t!==o.closed&&(void 0!==e&&(s.current=e),n(o.closed),window.setTimeout((function(){n(o.uncontrolled)})))}),[]);return{isAllowedReenter:s,tooltipVisibility:t,setTooltipVisibility:n,triggerClose:u}}},287121:(e,t,n)=>{n.d(t,{reactionsButtonMount:()=>g});var o=n(785893),i=n(973935),r=n(30389),a=n(485207),s=n(301718),u=n(1925),l=n(263630),c=n(892239),d=n(54789),f=n(672544),v=n(997109),p=d.ButtonStyleVariant.Post,g=function(e,t){var n;if(void 0===t&&(t={}),!("__isMounted"in e)){var d=(0,f.getMenuMount)(e),g=(0,s.reactionsElemPayload)(e);if(d&&(null==g?void 0:g.objectRaw)){var m=g.counts,h=g.csrfHash,_=g.objectRaw,E=g.reactionSetId,R=g.styleVariant,b=void 0===R?p:R,C=g.userReactionId,y=null!==(n=g.titleVariant)&&void 0!==n?n:u.TITLE_VARIANT_DEFAULT;null===h&&console.warn("Missing reactions csrf hash"),(0,a.isDebugEnabled)()&&console.log("Init reactions button",_,E);i.render((0,o.jsx)(l.ReactionsMenuButton,{objectId:_,onReactionChoose:function(t){var n=(0,s.reactionsElemPayload)(e);null!==h&&n&&((0,c.emitReactionChoose)(_),(0,r.reactionButtonSetReaction)(t,n.userReactionId,_,h,e))},reactionButtonContainerElem:e,reactionIdInitial:C,reactionSetId:E,reactionsCounts:m,styleVariant:b,titleVariant:y,triggerMouseenterOnInitial:!!t.isMouseenterEvent},void 0),d),(0,v.pushNavDestroy)((function(){d&&(i.unmountComponentAtNode(d),delete e.__isMounted)})),e.__isMounted=!0}else(0,a.isDebugEnabled)()&&console.error("Init reactions button failed",d,g)}}},30389:(e,t,n)=>{n.d(t,{reactionButtonSetReaction:()=>m,showReactedModal:()=>h});var o=n(570655),i=n(274642),r=n(714396),a=n(95146),s=n(908706),u=n(107337),l=n(928634),c=n(541848),d=n(485207),f=n(301718),v=n(740672),p=n(114233),g=function(e,t){var n=t.counts,o=t.isFromWkLayer,i=t.isPrimaryLikeButtonClick,r=t.isUserAction,a=void 0!==r&&r,s=t.objectRaw,l=t.previewVisibility,c=t.reactionId,d=t.suggestSubscribe;(0,u.triggerReactionsUpdate)(s,n,{id:c},{isFromWkLayer:o,isPrimaryLikeButtonClick:i,isUserAction:a,previewVisibility:l,suggestSubscribe:d})},m=function(e,t,n,i,a,u){if((0,d.isDebugEnabled)()&&console.log("Change reaction for object "+n+": "+e),(0,v.isValidEnvironment)()){var m=(0,f.reactionsElemPayload)(a),h=null==m?void 0:m.counts,_=function(e,t,n){var i=(0,o.__assign)({},e);return void 0!==t&&(i[t]=(i[t]||0)+1),void 0!==n&&(i[n]=Math.max(0,(i[n]||0)-1)),i}((null==m?void 0:m.counts)||(0,r.reactionCountsBrandWrap)({}),e,t),E=null==u?void 0:u.isPrimaryLikeButtonClick,R=(0,l.isWkLayerWallPostOpen)(),b=(0,s.previewVisibilityIntentForVariant)(null==m?void 0:m.previewVariant);g(0,{counts:_,isFromWkLayer:R,isPrimaryLikeButtonClick:E,isUserAction:!0,objectRaw:n,previewVisibility:b,reactionId:e}),(0,c.requestPostReactionSet)(e,n,i).promise.then((function(t){var o=(0,c.validateLikesChangeResponse)(t),i=null==o?void 0:o.userReaction;o&&void 0!==i&&g(0,{counts:o.counts,isFromWkLayer:R,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:b,reactionId:i.id,suggestSubscribe:o.suggestSubscribe});var r=n.replace("wall","post"),a=document.getElementById(r);if(a){var s=a.getAttribute("data-ad");if(s){var u=void 0===e?"unlike":"like";p.AdsEvents.register(u,s)}}}),(function(e){(null==e?void 0:e.isAborted)||g(0,{counts:h,isFromWkLayer:R,isPrimaryLikeButtonClick:!1,isUserAction:!1,objectRaw:n,previewVisibility:b,reactionId:t})}))}};function h(e,t){!function(e){(0,i.showWiki)({w:e},!1,void 0,{queue:1})}(a.WK_SECTION_PREFIX_REACTIONS+"_"+e+"/"+t)}},541848:(e,t,n)=>{n.d(t,{requestGetReacted:()=>o.requestGetReacted,requestPostReactionSet:()=>i.requestPostReactionSet,validateLikesChangeResponse:()=>i.validateLikesChangeResponse});var o=n(998429),i=n(353448)},998429:(e,t,n)=>{n.d(t,{requestGetReacted:()=>a});var o=n(570655),i=n(517760),r=n(514191),a=function(e){var t={act:"reactions_get_reacted",object:e};return{promise:new Promise((function(e,n){r.ajax.post("/like.php",t,{onDone:function(t){var r=function(e){var t=void 0;if(!(0,i.isUnknownObject)(e))return t;var n=e.reactedMenuStats;n&&(t||(t={}),t=(0,o.__assign)((0,o.__assign)({},t),{reactedMenuStats:n}));return t}(t);if(!r){var a=new Error("requestGetReacted: Invalid response");return console.error(a,t),void n(a)}e(r)},onFail:function(e){return n({err:e}),!1}})}))}}},853005:(e,t,n)=>{n.d(t,{stringWithHTMLEntitiesDecode:()=>r});var o=n(165594),i=n(659397),r=function(e){return(0,i.decodeHTMLEntities)((0,o.unwrap)(e))};o.unwrap},353448:(e,t,n)=>{n.d(t,{requestPostReactionSet:()=>d,validateLikesChangeResponse:()=>f});var o=n(690847),i=n(517760),r=n(514191),a=n(319367),s=n(501389),u=n(95146),l=n(576772),c=(0,o.makePendingRequestState)(),d=function(e,t,n,o){var i,u;(null===(i=null==o?void 0:o.abortPendingRequests)||void 0===i||i)&&c.cancel(t);var d={act:"a_set_reaction",object:t,reaction_id:e,hash:n,wall:2,from:null===(u=window.Likes)||void 0===u?void 0:u._getReference(t)},f=new a.AjaxCancellationToken,v=new Promise((function(e,t){var n=r.ajax.post("like.php",d,{cancellationToken:f,onDone:function(n){if(null==n?void 0:n.unauth_action_box)return l.UnauthActionBox.show(n.unauth_action_box),void t();(null==n?void 0:n.done_box)&&(0,s.showDoneBox)("",{},n.done_box),e(n)},onFail:function(e){var o=function(e){return"object"==typeof(t=e)&&null!==t&&"readyState"in t&&0===e.readyState;var t}(n);return t({err:e,isAborted:o}),!!o}})})),p=function(){f.cancel()},g=c.register(t,p);return v.catch((function(){})).finally((function(){g&&g()})),{abort:p,promise:v}},f=function(e){var t;if(void 0!==(null==e?void 0:e.reactions_my)){var n=null!==(t=null==e?void 0:e[u.REACTIONS_COUNTS_RESPONSE_FIELD])&&void 0!==t?t:void 0,o=e.reactions_my,r=e.suggest_subscribe,a=void 0;return null===o?a={id:void 0}:(0,i.isValidReactionId)(o)&&(a={id:o}),{counts:n,userReaction:a,suggestSubscribe:r}}console.warn("Invalid reaction change response format",e)}},434389:(e,t,n)=>{n.d(t,{init:()=>c,ReactionsEntryGlobal:()=>d});var o=n(152278),i=n(287121),r=n(964862),a=n(366220),s=n(498908),u=n(385667),l=n(130273),c=function(){(0,l.postRenderReactionsInit)(),(0,s.initResponseHandlers)()},d={onReactionKeyDown:function(e,t){(0,r.isEventFromMenu)(t)||[o.KEY.RETURN,o.KEY.SPACE].includes(t.keyCode)&&(t.stopPropagation(),(0,r.toggleReactionOnClick)(e))},onReactionMouseEnter:function(e,t){t.target===e&&(0,a.reactionsButtonInit)(e,{isMouseenterEvent:!0})},onReactionClick:function(e,t){(0,o.checkEvent)(t)||(0,r.isEventFromMenu)(t)||((0,r.toggleReactionOnClick)(e),(0,a.reactionsButtonInit)(e))},reactionsButtonMount:i.reactionsButtonMount,storageAddSets:u.storageAddSets,storageSetConfig:u.storageSetConfig}},964862:(e,t,n)=>{n.d(t,{isEventFromMenu:()=>u,toggleReactionOnClick:()=>l});var o=n(508271),i=n(30389),r=n(892239),a=n(301718),s=n(629401),u=function(e){var t,n;return e.target instanceof HTMLElement&&(null===(n=(t=e.target).closest)||void 0===n?void 0:n.call(t,"._ReactionsMenuPopperRoot"))},l=function(e){var t=(0,a.reactionsElemPayload)(e);if(null==t?void 0:t.objectRaw){var n=t.csrfHash,u=t.objectRaw,l=t.userReactionId;if((0,r.emitReactionChoose)(u),null!==n){var c=void 0===l?o.REACTION_ID_DEFAULT:void 0;(0,i.reactionButtonSetReaction)(c,l,u,n,e,{isPrimaryLikeButtonClick:!0}),(0,s.loadBadgesWallOnboarding)({target:e})}else console.warn("Missing reactions csrf hash",e)}else console.warn("Missing reactions object raw",e)}},366220:(e,t,n)=>{n.d(t,{reactionsButtonInit:()=>i});var o=n(570655),i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=window.Reactions;n?n.reactionsButtonMount.apply(n,(0,o.__spreadArray)([],(0,o.__read)(e),!1)):window.stManager.add([window.jsc("web/reactions.js"),"reactions.css"]).then((function(){window.Reactions?i.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e),!1)):console.error("Reactions module is unavailable")}))}},498908:(e,t,n)=>{n.d(t,{initResponseHandlers:()=>u});var o=n(19834),i=n(385667),r=function(e){var t=null==e?void 0:e.reaction_sets;t&&(0,i.storageAddSets)(t)},a=function(e){e&&(0,i.storageSetConfig)(e)},s=!1,u=function(){s||((0,o.replaceExtraHandler)("reactionsConfig",a),(0,o.replaceExtraHandler)("reactions",r),s=!0)}},107337:(e,t,n)=>{n.d(t,{triggerReactionsUpdate:()=>s});var o=n(465864),i=n(95146),r=n(453580),a=n(665872),s=function(e,t,n,s){var u=(0,o.parseLikeObjectId)(e);u&&u.objectType===i.SUPPORTED_OBJECT_TYPES.wall&&u.objectId?(0,r.emitEvent)(r.WallDataEvents.post_reactions_counts_update,function(e,t,n,o){var i={counts:e,isFromWkLayer:null==t?void 0:t.isFromWkLayer,isPrimaryLikeButtonClick:null==t?void 0:t.isPrimaryLikeButtonClick,isQueueUpdate:null==t?void 0:t.isQueueUpdate,isUserAction:t.isUserAction,postFullId:n.objectId,previewVisibility:t.previewVisibility,reactionIdState:o?{reactionId:o.id}:void 0,suggestSubscribe:t.suggestSubscribe};return o?(0,a.reactionsCountsUpdatePayload)(i,o):(0,a.reactionsCountsOnlyUpdatePayload)(i)}(t,s,u,n)):u&&u.objectType===i.SUPPORTED_OBJECT_TYPES.wall_reply&&u.objectId?(0,r.emitEvent)(r.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:u.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):console.warn("Unsupported reactions object update",e)}},928634:(e,t,n)=>{n.d(t,{isWkLayerWallPostOpen:()=>i,preparePostElToDetaching:()=>r,updatePostElAfterAttaching:()=>a});var o=n(660080),i=function(){return!!window.cur.wallLayer},r=function(e){var t,n=e.querySelector("."+o.UI_GALLERY_CLASSNAME);if(n){var i=null===(t=n.querySelector("."+o.UI_GALLERY_CONTENT_CLASSNAME))||void 0===t?void 0:t.scrollLeft;i&&(n.dataset.contentScrollLeft=i.toString())}},a=function(e){var t=e.querySelector("."+o.UI_GALLERY_CLASSNAME);if(t){var n=t.querySelector("."+o.UI_GALLERY_CONTENT_CLASSNAME),i=t.dataset.contentScrollLeft;n&&i&&(n.scrollLeft=parseInt(i,10))}}}},s={};function u(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return a[e].call(n.exports,n,n.exports,u),n.exports}u.m=a,e=[],u.O=(t,n,o,i)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){for(var[n,o,i]=e[c],a=!0,s=0;s<n.length;s++)(!1&i||r>=i)&&Object.keys(u.O).every((e=>u.O[e](n[s])))?n.splice(s--,1):(a=!1,i<r&&(r=i));if(a){e.splice(c--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,o,i]},u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,u.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);u.r(i);var r={};t=t||[null,n({}),n([]),n(n)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,u.d(i,r),i},u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.f={},u.e=e=>Promise.all(Object.keys(u.f).reduce(((t,n)=>(u.f[n](e,t),t)),[])),u.u=e=>9375===e?"voice_message_player.1ca99e7ec51aef6df7b5.js":28762===e?"speech.ec5bb88b79217da0bc5d.js":57468===e?"SilentModeForms.710e5d0929fe4e8d2b72.js":75980===e?"menu_settings.0f17151bd588fe6a5267.js":18669===e?"BadgesCatalog.074920d1a900899e3de4.js":83803===e?"BadgesObjectInfo.e2bb64d2d54b91cb090b.js":9603===e?"badges_wall_onboarding_init.79369f2b6dec8a6a2d06.js":55489===e?"lottie-light.19743fa6c7bec04c41d3.js":48164===e?"badges_wall_onboarding.18036d9828f4d36c9afb.js":38288===e?"lottie.7d914fa3404556039ac3.js":void 0,u.miniCssF=e=>e+"."+{18669:"cc681d4380f0165d1ec0",48164:"ec78c85c8296af470758",57468:"28053bce032a9da83885",75980:"95eccc249ab38cb1e901",83803:"686e7a35cb81d6ecfe7a"}[e]+".css",u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},u.l=(e,t,n,i)=>{if(o[e])o[e].push(t);else{var r,a;if(void 0!==n)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var c=s[l];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")=="vk:"+n){r=c;break}}r||(a=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,u.nc&&r.setAttribute("nonce",u.nc),r.setAttribute("data-webpack","vk:"+n),r.src=e),o[e]=[t];var d=(t,n)=>{r.onerror=r.onload=null,clearTimeout(f);var i=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),a&&document.head.appendChild(r)}},u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="/dist/",i=e=>new Promise(((t,n)=>{var o=u.miniCssF(e),i=u.p+o;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=(a=n[o]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){var a;if((i=(a=r[o]).getAttribute("data-href"))===e||i===t)return a}})(o,i))return t();((e,t,n,o)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=r=>{if(i.onerror=i.onload=null,"load"===r.type)n();else{var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=a,u.request=s,i.parentNode.removeChild(i),o(u)}},i.href=t,document.head.appendChild(i)})(e,i,t,n)})),r={70724:0},u.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{18669:1,48164:1,57468:1,75980:1,83803:1}[e]&&t.push(r[e]=i(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{var e={70724:0};u.f.j=(t,n)=>{var o=u.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else if(75980!=t){var i=new Promise(((n,i)=>o=e[t]=[n,i]));n.push(o[2]=i);var r=u.p+u.u(t),a=new Error;u.l(r,(n=>{if(u.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",a.name="ChunkLoadError",a.type=i,a.request=r,o[1](a)}}),"chunk-"+t,t)}else e[t]=0},u.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[r,a,s]=n,l=0;for(o in a)u.o(a,o)&&(u.m[o]=a[o]);if(s)var c=s(u);for(t&&t(n);l<r.length;l++)i=r[l],u.o(e,i)&&e[i]&&e[i][0](),e[r[l]]=0;return u.O(c)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=u.O(void 0,[76429,75514,24509,56990,98066,76400,40885,68592,93592,6493,85820],(()=>u(52104)));l=u.O(l)})();