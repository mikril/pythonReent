(()=>{"use strict";var e,t,i,r,a,n,o={236742:(e,t,i)=>{i.d(t,{Stickers:()=>l});i(115306);var r=i(511417),a=i(70162),n=i(961540),o={},s=(e,t,i,r)=>{delete o[t],1===r?Emoji.favorite.addFavoriteSticker(e,t,i):-1===r&&Emoji.favorite.deleteFavoriteSticker(e,t,i)};var l={toggleFavorite:function(e,t,i){if(t&&t.stopPropagation(),!e.classList.contains("on")&&((r=Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers)&&!(r.length<Emoji.favoriteLimit)))return function(){if(!Emoji.favoriteLimitNoticed){var e=(0,a.langStr)(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);setTimeout(window.showFastBox(getLang("global_error"),e).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0}}(),!1;var r,n=e.getAttribute("data-sticker-id"),l=e.getAttribute("data-hash");return!(!n||!l)&&(!o[n]&&(o[n]=1,e.classList.toggle("on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:n,hash:l},{onDone:s.pbind(i,n,e)})))},getStickerUrl:function(e,t){var i=String(t);if(r.colorScheme.isDarkScheme()&&(i=i.replace(/b$/,"")+"b"),window.Emoji){var a,o,s,l=null==(a=Emoji.stickersById)||null==(o=a[e])||null==(s=o.sticker[Emoji.STICKER_FIELD_IMAGES])?void 0:s[i];if(l)return l}var d={id:e,size:i};if((0,n.isMvk)()){if(window.stickers_cache){var c=window.stickers_cache.getStickerImage(e,i);if(c)return c}return window.store.stickers&&window.rs(window.store.stickers.url_template,{id:e,size:i})}return window.getTemplate("stickers_sticker_url",d)}}},39336:(e,t,i)=>{i.d(t,{StickersAnimation:()=>n});i(241539),i(788674),i(339714);var r=i(961540),a=(0,i(506770).partConfigEnabled)("rlottie")&&!(0,r.isMvk)(),n=function(){var e,t,i,r,o=!1,s=!1,l={},d={},c={},u={},f={};function v(e,t){var i=a&&!t,r=g(e),n=1;if(r){hide(geByClass1("sticker_img",e)),addClass(e,"animation_play"),r.play();var o=attr(e,"data-loop-count");if(o=parseInt(o),isNaN(o)&&(o=3),-1!==o){var s,l,d=i?null==r||null==(s=r.listeners)?void 0:s.loopComplete:null==r||null==(l=r._cbs)?void 0:l.loopComplete;(!d||0===(null==d?void 0:d.length))&&r.addEventListener("loopComplete",(function t(){n++;var a=!0;o>=n&&(a=!1),a&&(p(e,!1),r.removeEventListener("loopComplete",t),r[i?"pause":"stop"]())}))}}}function m(e){var t=attr(e,"data-uid");return t||(t=attr(e,"data-uid",Math.random().toString(32).substr(2))),t}function p(e,t){f[m(e)]=t}function g(e){var t=attr(e,"data-uniq-id");if(!geByClass1("svg_sticker_animation",e))return!1;var i=c[t];return i||!1}function h(e,t,o){var s=a&&!t;if(!f[m(e)]){p(e,!0);var u=g(e);if(u)"function"==typeof o&&o(u);else{var v=attr(e,"data-uniq-id"),h=attr(e,"data-uid");if(!s||!hasClass(e,"animation_play")){var k=attr(e,"data-animation-path"),b=attr(e,"data-sticker-id"),_=!1,S=s?d[b]:l[b];if(b&&(_=(S||k)&&y(e)),_){var w=attr(e,"data-animation-class")||"",A=s?{elements:[e],loop:!0,autoplay:!0,name:h,group:"sticker",className:`svg_sticker_animation ${w}`}:{container:e,renderer:"svg",loop:!0,autoplay:!1,name:v,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:`svg_sticker_animation ${w}`}};S?A.animationData=S:A[s?"animationUrl":"path"]=k;var C=geByClass1("svg_sticker_animation",e);if(C&&re(C),u=(s?r:i).loadAnimation(A),!l[b]||s)return u instanceof Promise||(u.addEventListener("data_failed",(()=>{})),u=Promise.resolve(u)),void u.then((i=>{var r=s?"firstFrame":"data_ready";i.addEventListener(r,(()=>{var e=i.animationData;s?d[b]=e:l[b]=e,c[v]=i,"function"==typeof o&&o(i)})),s&&i.addEventListener("destroy",(()=>{n.stopAnimation(e,t)}))})).catch((()=>null))}"function"==typeof o&&(c[v]=u,o(u))}}}}function k(e){return t(a&&!e).then((e=>{if(Array.isArray(e)){var t=e[0],a=e[1];r=t,i=a}else i=e;return i}))}return{init(e){t=e.animatorLoader},checkSettingsAndLoadInWeb:function(e){if(StickersSettings.getAutoplay()){var t=ge("fc_msg"+e),i=geByClass1("sticker_animation",t);n.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(e){if(StickersSettings.getAutoplay()){var t=$(`.msg_id_${e} .sticker_animation`);n.loadAndPlaySticker(t)}},loadStickerInMvkIMAndPlay:function(e,t){var i="_msg"+e;t&&(i="msg_id_"+e);var r=geByClass1("sticker_animation",geByClass1(i));n.loadAndPlayStickerWithTimer(r,500)},loadAutoplayAnimationStickers:function(e){if(i){if(e){if(s)return;s=!0}if(!o){o=!0;var t=geByClass("sticker_animation_autoplay");t&&each(t,(function(e,t){h(t,!1,(function(){v(t,!1)}))})),o=!1}}else k().then((()=>{n.loadAutoplayAnimationStickers(e)}))},loadAndPlaySticker:function(e,t){e&&(i?requestAnimationFrame((()=>{h(e,t,(function(){v(e,t)}))})):k(t).then((()=>{n.loadAndPlaySticker(e,t)})))},loadAndPlayStickerWithTimer:function(e,t){if(e&&!u[e]){t||(t=1e3);var i=ge(e);hasClass(i,"sticker_animation_disabled_timer")||(u[e]=setTimeout((function(){!i&&(i=ge(e),hasClass(i,"sticker_animation_disabled_timer"))||(n.loadAndPlaySticker(i),clearTimeout(u[e]),u[e]=!1)}),t))}},reloadStickers:function(){c={}},touchStartSticker:function(t){t.addEventListener("contextmenu",n.preventContextMenu,!1),e=setTimeout((function(){n.loadAndPlaySticker(t)}),500)},touchEndSticker:function(){e&&clearTimeout(e)},preventContextMenu:function(e){e.preventDefault(),e.stopPropagation()},stopAnimation(e,t){var i=a&&!t,r=g(e);if(r&&r[i?"pause":"stop"](),i){var n=attr(e,"data-uniq-id");removeClass(e,"animation_play"),show(geByClass1("sticker_img",e)),p(e,!1),delete c[n]}}};function y(e){var t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;return t<window.innerHeight&&i>=0&&isVisible(e)}}()},715384:(e,t,i)=>{i.d(t,{StickersSettings:()=>r});var r={autoplay:0,setAutoplay:function(e){this.autoplay=e},getAutoplay:function(){return!!r.autoplay&&!r.isPreventAutoplayByCalls()},isPreventAutoplayByCalls:function(){return!!window.Calls&&window.Calls.isInActiveCall}}},66295:(e,t,i)=>{i.d(t,{StickersAnimation:()=>r.StickersAnimation});i(66992),i(241539),i(788674),i(333948);var r=i(39336);r.StickersAnimation.init({animatorLoader:()=>Promise.all([Promise.all([i.e(76429),i.e(75514),i.e(68592),i.e(28477),i.e(79344)]).then(i.bind(i,680869)).then((e=>e.LottieManager)),Promise.all([i.e(38288),i.e(55489)]).then(i.bind(i,809499)).then((e=>e.lottie))])})},844475:(e,t,i)=>{var r=i(66295),a=i(715384),n=i(236742);window.StickersAnimation=r.StickersAnimation,window.StickersSettings=a.StickersSettings,window.Stickers=n.Stickers;try{window.stManager.done(window.jsc("web/stickers.js"))}catch(e){}}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return o[e].call(i.exports,i,i.exports,l),i.exports}l.m=o,e=[],l.O=(t,i,r,a)=>{if(!i){var n=1/0;for(c=0;c<e.length;c++){for(var[i,r,a]=e[c],o=!0,s=0;s<i.length;s++)(!1&a||n>=a)&&Object.keys(l.O).every((e=>l.O[e](i[s])))?i.splice(s--,1):(o=!1,a<n&&(n=a));if(o){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,r,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);l.r(a);var n={};t=t||[null,i({}),i([]),i(i)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,l.d(a,n),a},l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,i)=>(l.f[i](e,t),t)),[])),l.u=e=>75514===e?"react.2a4d93698b97350293c7.js":28477===e?"79f240c94e0513d166c44bb8a64a95e6.9a39e7f1c21e2915eb30.js":38288===e?"lottie.7d914fa3404556039ac3.js":79344===e?"sticker.5413a9259b10196dbb52.js":55489===e?"lottie-light.19743fa6c7bec04c41d3.js":81937===e?e+".5e2064d44c49cedc17c5.js":void 0,l.miniCssF=e=>e+".cd1e4159749f662b5108.css",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},l.l=(e,t,i,a)=>{if(r[e])r[e].push(t);else{var n,o;if(void 0!==i)for(var s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var c=s[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")=="vk:"+i){n=c;break}}n||(o=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,l.nc&&n.setAttribute("nonce",l.nc),n.setAttribute("data-webpack","vk:"+i),n.src=e),r[e]=[t];var u=(t,i)=>{n.onerror=n.onload=null,clearTimeout(f);var a=r[e];if(delete r[e],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(i))),t)return t(i)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),o&&document.head.appendChild(n)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="/dist/",a=e=>new Promise(((t,i)=>{var r=l.miniCssF(e),a=l.p+r;if(((e,t)=>{for(var i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var a=(o=i[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){var o;if((a=(o=n[r]).getAttribute("data-href"))===e||a===t)return o}})(r,a))return t();((e,t,i,r)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)i();else{var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=s,a.parentNode.removeChild(a),r(l)}},a.href=t,document.head.appendChild(a)})(e,a,t,i)})),n={54346:0},l.f.miniCss=(e,t)=>{n[e]?t.push(n[e]):0!==n[e]&&{79344:1}[e]&&t.push(n[e]=a(e).then((()=>{n[e]=0}),(t=>{throw delete n[e],t})))},(()=>{l.b=document.baseURI||self.location.href;var e={54346:0};l.f.j=(t,i)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise(((i,a)=>r=e[t]=[i,a]));i.push(r[2]=a);var n=l.p+l.u(t),o=new Error;l.l(n,(i=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",o.name="ChunkLoadError",o.type=a,o.request=n,r[1](o)}}),"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,i)=>{var r,a,[n,o,s]=i,d=0;for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(s)var c=s(l);for(t&&t(i);d<n.length;d++)a=n[d],l.o(e,a)&&e[a]&&e[a][0](),e[n[d]]=0;return l.O(c)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var d=l.O(void 0,[76429,68592],(()=>l(844475)));d=l.O(d)})();