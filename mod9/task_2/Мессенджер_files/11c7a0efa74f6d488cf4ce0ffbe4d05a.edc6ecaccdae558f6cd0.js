/*! For license information please see 11c7a0efa74f6d488cf4ce0ffbe4d05a.edc6ecaccdae558f6cd0.js.LICENSE.txt */
(self.webpackChunkvk=self.webpackChunkvk||[]).push([[79542],{710409:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8Z" /></symbol>',12,16,!1,void 0)},671269:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20ChevronRightOutline","chevron_right_outline_20","0 0 20 20",'<symbol viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" id="chevron_right_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.47 4.217a.75.75 0 0 0 0 1.06L12.185 10l-4.716 4.72a.75.75 0 1 0 1.062 1.06l5.245-5.25a.75.75 0 0 0 0-1.061L8.531 4.218a.75.75 0 0 0-1.061-.001z" fill="currentColor" /></symbol>',20,20,!1,void 0)},585561:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20DeleteOutline","delete_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" d="M6.837 4H2.75a.75.75 0 0 0 0 1.5h.545l.907 9.248c.051.523.094.96.157 1.314.066.37.163.711.353 1.028a2.9 2.9 0 0 0 1.247 1.131c.334.158.682.222 1.058.25.36.029.797.029 1.323.029h3.32c.526 0 .964 0 1.323-.028.376-.03.724-.093 1.058-.25a2.9 2.9 0 0 0 1.247-1.132c.19-.317.287-.657.353-1.028.063-.355.106-.79.157-1.314l.907-9.248h.545a.75.75 0 0 0 0-1.5h-4.087a3.25 3.25 0 0 0-6.326 0Zm1.581 0h3.164a1.751 1.751 0 0 0-3.164 0Zm6.78 1.5H4.802l.89 9.072c.054.56.091.938.143 1.228.05.281.104.422.162.52a1.4 1.4 0 0 0 .603.546c.102.048.248.088.533.11.294.024.673.024 1.235.024h3.262c.562 0 .941 0 1.235-.023.285-.023.43-.063.533-.111a1.4 1.4 0 0 0 .603-.547c.058-.097.112-.238.162-.52.052-.29.09-.667.144-1.226l.89-9.073Zm-2.886 2.002a.75.75 0 0 1 .685.81l-.5 6.003a.75.75 0 0 1-1.494-.124l.5-6.003a.75.75 0 0 1 .81-.686Zm-4.624 0a.75.75 0 0 1 .81.686l.5 6.002a.75.75 0 0 1-1.495.125l-.5-6.003a.75.75 0 0 1 .685-.81Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},27346:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon24ChevronCompactRight","chevron_compact_right_24","0 0 16 24",'<symbol fill="none" viewBox="0 0 16 24" xmlns="http://www.w3.org/2000/svg" id="chevron_compact_right_24"><path d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a.998.998 0 0 1 0 1.416l-5.084 5.084a1.002 1.002 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" fill="currentColor" /></symbol>',16,24,!1,void 0)},774877:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon24DocumentOutline","document_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="document_outline_24"><path fill-rule="evenodd" d="M12.473 2c.3 0 .586 0 .866.066a2.4 2.4 0 0 1 .694.288c.245.15.447.353.659.565l4.389 4.39c.212.21.415.413.565.658a2.4 2.4 0 0 1 .288.694c.067.28.066.566.066.866v6.012c0 .947 0 1.713-.05 2.333-.053.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.523.267-1.087.377-1.726.43-.62.05-1.386.05-2.334.05h-3.076c-.948 0-1.714 0-2.334-.05-.64-.053-1.203-.163-1.726-.43a4.4 4.4 0 0 1-1.922-1.922c-.267-.523-.377-1.087-.43-1.726C4 17.252 4 16.486 4 15.538V8.462c0-.948 0-1.714.05-2.334.053-.64.163-1.203.43-1.726A4.4 4.4 0 0 1 6.402 2.48c.523-.267 1.087-.377 1.726-.43C8.748 2 9.514 2 10.462 2h2.011ZM10.5 3.8H12v2.135c0 .53 0 .981.03 1.352.032.39.102.768.286 1.13a2.9 2.9 0 0 0 1.267 1.267c.362.184.741.254 1.13.286.37.03.822.03 1.352.03H18.2v5.5c0 .995 0 1.687-.045 2.226-.043.527-.123.828-.238 1.054a2.6 2.6 0 0 1-1.137 1.137c-.226.115-.527.195-1.055.238-.538.044-1.23.045-2.225.045h-3c-.995 0-1.687 0-2.226-.045-.527-.043-.828-.123-1.054-.238a2.6 2.6 0 0 1-1.137-1.137c-.115-.226-.195-.527-.238-1.055-.044-.538-.045-1.23-.045-2.225v-7c0-.995 0-1.687.045-2.225.043-.528.123-.829.238-1.055A2.6 2.6 0 0 1 7.22 4.083c.226-.115.527-.195 1.054-.238C8.813 3.8 9.505 3.8 10.5 3.8Zm3.3.773L17.427 8.2H16.1c-.575 0-.952 0-1.24-.024-.278-.023-.393-.062-.46-.096a1.1 1.1 0 0 1-.48-.48c-.034-.066-.073-.182-.096-.46A17.426 17.426 0 0 1 13.8 5.9V4.573Z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},650485:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2Zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Z" fill="currentColor" /></g></symbol>',24,24,!1,void 0)},354629:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon32Play","play_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="play_32"><path d="M24.948 14.001c1.154.656 1.732.984 1.925 1.412.17.374.17.8 0 1.174-.194.428-.77.756-1.925 1.412l-12.43 7.061c-1.154.656-1.732.984-2.205.935a1.471 1.471 0 0 1-1.033-.587C9 25.03 9 24.373 9 23.061V8.938c0-1.311 0-1.967.28-2.347.244-.33.62-.543 1.033-.586.473-.05 1.05.279 2.205.935L24.948 14Z" /></symbol>',32,32,!1,void 0)},602314:(e,t,n)=>{"use strict";n.d(t,{IconSettingsContext:()=>o});var r=n(667294);var o=r.createContext({})},951201:(e,t,n)=>{"use strict";n.d(t,{makeIcon:()=>m});var r=n(667294),o=n(887854),i=n.n(o),a=n(602314),u=n(428823),s=n(575059);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h={display:"block"};var v=function(e){var t=e.width,n=e.height,o=e.viewBox,i=e.id,u=e.className,s=void 0===u?"":u,c=e.style,v=void 0===c?{}:c,m=e.fill,g=e.getRootRef,y=e.Component,w=void 0===y?"div":y,x=e.role,C=e["aria-label"],b=e["aria-hidden"],E=p(e,["width","height","viewBox","id","className","style","fill","getRootRef","Component","role","aria-label","aria-hidden"]),k=Math.max(t,n),R=r.useContext(a.IconSettingsContext),A=function(e,t){for(var n=t.classPrefix,r=t.globalClasses,o="",i=0;i<e.length;i++)n&&(o+=" "+(n+e[i])),n&&!r||(o+=" "+e[i]);return o}(["Icon","Icon--".concat(k),"Icon--w-".concat(t),"Icon--h-".concat(n),"Icon--".concat(i)],R);return r.createElement(w,l({role:"presentation"},E,{ref:g,className:"".concat(A," ").concat(s),style:f(d({},v),{width:t,height:n})}),r.createElement("svg",{viewBox:o,width:t,height:n,style:h,role:x,"aria-label":C,"aria-hidden":b},r.createElement("use",{xlinkHref:"#".concat(i),style:{fill:"currentColor",color:m}})))};function m(e,t,n,o,a,c,d,f){var p=!1;function h(){p||((0,u.addSpriteSymbol)(new(i())({id:t,viewBox:n,content:o})),p=!0)}var m=d?(0,s.warnOnce)(e):null,g=function(e){if((0,u.useIsomorphicLayoutEffect)(h,[]),d){var o=f?". Замените на ".concat(f):"";m("Иконка устарела"+o)}return r.createElement(v,l({},e,{viewBox:n,id:t,width:isNaN(e.width)?a:+e.width,height:isNaN(e.height)?c:+e.height}))};return g.mountIcon=h,g.displayName=e,g}},428823:(e,t,n)=>{"use strict";n.d(t,{addSpriteSymbol:()=>l,useIsomorphicLayoutEffect:()=>d});var r,o=n(362548),i=n.n(o),a=n(667294),u=!("undefined"==typeof window||!window.document||!window.document.createElement);if(u){var s="__SVG_SPRITE_NODE__";r=new(i())({attrs:{id:s}});var c=function(){var e=document.getElementById(s);e?r.attach(e):r.mount(),document.removeEventListener("DOMContentLoaded",c)};document.querySelector("body")?c():document.addEventListener("DOMContentLoaded",c)}else r=null;function l(e){r&&r.add(e)}var d=u?a.useLayoutEffect:a.useEffect},575059:(e,t,n)=>{"use strict";function r(e){var t={};return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";t[n]||(console[r]("[@vkontakte/icons][".concat(e,"] ").concat(n)),t[n]=!0)}}n.d(t,{warnOnce:()=>r})},58255:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(111132);function o(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,n)=>{"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>r})},374277:(e,t,n)=>{"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function o(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>o})},759244:()=>{},963328:()=>{},403658:()=>{},861848:()=>{},458327:()=>{},814106:()=>{},170490:()=>{},241676:()=>{},833249:()=>{},126449:()=>{},51496:(e,t,n)=>{"use strict";n.d(t,{nanoid:()=>r});let r=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},429697:(e,t,n)=>{"use strict";n.d(t,{default:()=>p});var r=n(722122),o=n(419756),i=n(841788),a=n(58255),u=n(374277),s=n(667294),c=n(696630),l=n(559391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,u.default)(e,t)}))},f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1];t.removeClasses(o,"exit"),t.addClass(o,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.addClass(o,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.removeClasses(o,i),t.addClass(o,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}(0,i.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&(0,l.forceReflow)(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},r&&d(e,r),o&&d(e,o),i&&d(e,i)},n.render=function(){var e=this.props,t=(e.classNames,(0,o.default)(e,["classNames"]));return s.createElement(c.default,(0,r.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.Component);f.defaultProps={classNames:""},f.propTypes={};const p=f},696630:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var r=n(419756),o=n(841788),i=n(667294),a=n(973935),u=n(806035),s=n(500220),c=n(559391),l="unmounted",d="exited",f="entering",p="entered",h="exiting",v=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=d,r.appearStatus=f):o=p:o=t.unmountOnExit||t.mountOnEnter?l:d,r.state={status:o},r.nextCallback=null,r}(0,o.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==p&&(t=f):n!==f&&n!==p||(t=h)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===f){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&(0,c.forceReflow)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:l})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[a.findDOMNode(this),r],i=o[0],s=o[1],c=this.getTimeouts(),l=r?c.appear:c.enter;!e&&!n||u.default.disabled?this.safeSetState({status:p},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,s),this.safeSetState({status:f},(function(){t.props.onEntering(i,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(i,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!u.default.disabled?(this.props.onExit(r),this.safeSetState({status:h},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],u=o[1];this.props.addEndListener(i,u)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,o=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(s.default.Provider,{value:null},"function"==typeof n?n(e,o):i.cloneElement(i.Children.only(n),o))},t}(i.Component);function m(){}v.contextType=s.default,v.propTypes={},v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},v.UNMOUNTED=l,v.EXITED=d,v.ENTERING=f,v.ENTERED=p,v.EXITING=h;const g=v},500220:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=n(667294).createContext(null)},806035:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={disabled:!1}},559391:(e,t,n)=>{"use strict";n.d(t,{forceReflow:()=>r});var r=function(e){return e.scrollTop}},819423:(e,t,n)=>{"use strict";n.d(t,{ConvoAudiosPlaylist:()=>d,toConvoAudioTrack:()=>f,mapConvoToConvoAudioTrackList:()=>h,isConvoAudioTrack:()=>v,isRestoredConvoAudiosPlaylist:()=>m});var r=n(190484),o=n(111965),i=n(678927),a=n(306610),u=n(5991),s=n(509727),c=n(925151),l=n(21705),d=function(){function e(t){(0,a.default)(this,e),this.list=t.list,this.shuffledList=(0,l.shuffleArray)(this.list),this.meta=t.meta}return(0,u.default)(e,[{key:"getNext",value:function(e,t,n){var r=t?this.shuffledList:this.list;return(0,c.getNextTrackFromPlaylist)(e,r,n)}},{key:"getPrev",value:function(e,t,n){var r=t?this.shuffledList:this.list;return(0,c.getPrevTrackFromPlaylist)(e,r,n)}},{key:"getConvoAudiosList",value:function(){return this.list}},{key:"getPlaylistMeta",value:function(){return this.meta}}]),e}();function f(e,t,n){var r;"Foreign"===(null==n?void 0:n.kind)&&"rootCmid"in n&&n.rootCmid?r={cmid:n.rootCmid,peerId:n.rootPeerId}:null!=n&&n.peerId&&null!=n&&n.cmid&&(r={peerId:n.peerId,cmid:n.cmid});var o=t.thumb,i=(null==o?void 0:o.photo_34)||(null==o?void 0:o.photo_68)||(null==o?void 0:o.photo_135)||(null==o?void 0:o.photo_270)||(null==o?void 0:o.photo_300)||(null==o?void 0:o.photo_600)||(null==o?void 0:o.photo_1200);return{title:t.title,artist:t.artist,trackCode:t.trackCode,fromMessage:r,thumb:i,audioTrack:{id:"".concat(t.ownerId,"_").concat(t.id),url:t.url,progress:e,duration:t.duration}}}function p(e){var t,n=[];if("Normal"!==e.kind&&"Queued"!==e.kind&&"Foreign"!==e.kind)return n;if(Array.isArray(e.attaches.audios)){var r=(0,i.default)(e.attaches.audios);n.push.apply(n,(0,i.default)(r.reverse()))}var o=null===(t=e.attaches.wall)||void 0===t?void 0:t.attaches.audios;if(Array.isArray(o)){var a=(0,i.default)(o);n.push.apply(n,(0,i.default)(a.reverse()))}var u=e.forwardedMessages;Array.isArray(u)&&u.reduceRight((function(e,t){return e.push.apply(e,(0,i.default)(p(t))),e}),n);var s=e.replyMessage;return s&&n.push.apply(n,(0,i.default)(p(s))),n}function h(e){var t,n=[],r=(0,o.default)(s.iterable(e));try{var i=function(){var e=t.value.message,r="Normal"===e.kind,o="Queued"===e.kind;(r||o)&&p(e).filter((function(e){return!!e.url})).forEach((function(t){var r="Normal"===e.kind?e:void 0;n.push(f(0,t,r))}))};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return(0,c.excludeTracksDoubling)(n).reverse()}function v(e){if(e&&"object"===(0,r.default)(e)){var t=e.title,n=e.artist,o=e.audioTrack,i=e.trackCode,a=e.fromMessage,u=e.thumb,s="string"==typeof t,c="string"==typeof n,l=o&&"object"===(0,r.default)(o);if(!s||!c||!l)return!1;var d=e.audioTrack,f=d.url,p=d.id,h=d.duration,v=d.progress;return!!("string"==typeof f&&"string"==typeof p&&"number"==typeof h&&"number"==typeof v)&&!(i&&"string"!=typeof i||u&&"string"!=typeof u||a&&"object"!==(0,r.default)(a)||null!=a&&a.cmid&&"number"!=typeof(null==a?void 0:a.cmid)||null!=a&&a.peerId&&"number"!=typeof(null==a?void 0:a.peerId))}return!1}function m(e){if(e&&"object"===(0,r.default)(e)&&"meta"in e&&"list"in e){var t=e.meta,n=e.list,o=!1,i=!1;if(t&&"object"===(0,r.default)(t)){var a=t.convoPeerId,u=t.type;o="number"==typeof a&&"temp"===u}return n&&Array.isArray(n)&&n.length&&(i=!!n.filter((function(e){return v(e)})).length),o&&i}return!1}},925151:(e,t,n)=>{"use strict";n.d(t,{getNextTrackFromPlaylist:()=>o,getPrevTrackFromPlaylist:()=>i,excludeTracksDoubling:()=>a});var r=n(28991);function o(e,t,n){var o=t.findIndex((function(t){return t.audioTrack.id===e.audioTrack.id})),i=o>=0?t[o+1]:void 0;if(i)return(0,r.default)((0,r.default)({},i),{},{audioTrack:(0,r.default)((0,r.default)({},i.audioTrack),{},{progress:0})});if(!i&&"all"===n){var a=t[0];return a?(0,r.default)((0,r.default)({},a),{},{audioTrack:(0,r.default)((0,r.default)({},a.audioTrack),{},{progress:0})}):void 0}}function i(e,t,n){var o=t.findIndex((function(t){return t.audioTrack.id===e.audioTrack.id})),i=t[o-1];if(i)return(0,r.default)((0,r.default)({},i),{},{audioTrack:(0,r.default)((0,r.default)({},i.audioTrack),{},{progress:0})});if(!i&&"all"===n){var a=t[t.length-1];return a?(0,r.default)((0,r.default)({},a),{},{audioTrack:(0,r.default)((0,r.default)({},a.audioTrack),{},{progress:0})}):void 0}}function a(e){var t=new Set;return e.filter((function(e){return!t.has(e.audioTrack.id)&&(t.add(e.audioTrack.id),!0)}))}},777673:(e,t,n)=>{"use strict";n.d(t,{useComposerDraft:()=>a,ComposerDraftsProvider:()=>s,useChannelComposerDraft:()=>c,ChannelComposerDraftsProvider:()=>d});var r=n(667294),o=n(689018),i=n(416872);function a(e){var t=(0,r.useContext)(u);if(!t)throw new Error("ComposerDraftsProvider не добавлен в дерево Реакта!");return t[e]||o.empty()}var u=r.createContext({}),s=u.Provider;function c(e){var t=(0,r.useContext)(l);if(!t)throw new Error("ChannelComposerDraftsProvider не добавлен в дерево Реакта!");return t[e]||i.empty()}var l=r.createContext({}),d=l.Provider},368455:(e,t,n)=>{"use strict";n.d(t,{ActionsMenu:()=>m,ActionsMenuAction:()=>g,ActionsMenuDropdownAction:()=>y,ActionsMenuSeparator:()=>w});var r=n(334738),o=n(28991),i=n(781253),a=(n(759244),n(667294)),u=n(20700),s=n.n(u),c=n(710409),l=n(760562),d=n(417388),f=n(785893),p=["className","children"],h=["leftIcon","rightIcon","title","type","isLoading","className","onClick"],v=["children","icon","openType","hideOnClick","position","align"],m=function(e){var t=e.className,n=e.children,r=(0,i.default)(e,p);return(0,f.jsx)("div",(0,o.default)((0,o.default)({},r),{},{className:s()("ActionsMenu",t),children:n}))},g=function(e){var t=e.leftIcon,n=e.rightIcon,r=e.title,a=e.type,u=void 0===a?"primary":a,c=e.isLoading,l=e.className,d=e.onClick,p=(0,i.default)(e,h);return(0,f.jsxs)("button",(0,o.default)((0,o.default)({},p),{},{className:s()("ActionsMenuAction",u&&"ActionsMenuAction--".concat(u),c&&"ActionsMenuAction--loading",l),onClick:d,children:[t&&(0,f.jsx)("i",{className:"ActionsMenuAction__icon",children:t}),(0,f.jsx)("span",{className:"ActionsMenuAction__title",children:r}),n&&(0,f.jsx)("i",{className:"ActionsMenuAction__icon",children:n})]}))},y=function(e){var t=e.children,n=e.icon,u=e.openType,p=e.hideOnClick,h=void 0===p||p,y=e.position,w=e.align,x=(0,i.default)(e,v),C=(0,a.useState)(!1),b=(0,r.default)(C,2),E=b[0],k=b[1],R=(0,d.useLayoutData)().mode,A=(0,a.useMemo)((function(){var e="two-column"===R?{position:"right",align:"left"}:{position:"bottom",align:"right"};return y&&(e.position=y),w&&(e.align=w),e}),[R,y,w]);return(0,f.jsx)(l.Dropdown,(0,o.default)((0,o.default)((0,o.default)({content:(0,f.jsx)(m,{className:s()({"ActionsMenu--dropdown":"two-column"===R}),children:t})},"click"===u?{openType:"click"}:{openType:"hover",hideDelay:0}),A),{},{classNames:{trigger:"ActionsMenu--dropdown-trigger"},adaptation:"vertical",onOpen:function(){return k(!0)},onClose:function(){return k(!1)},hideOnClick:h,canOpen:!x.disabled,children:(0,f.jsx)(g,(0,o.default)((0,o.default)({},x),{},{className:E&&"ActionsMenuAction--active",leftIcon:n,rightIcon:(0,f.jsx)(c.default,{})}))}))},w=function(e){var t=e.className;return(0,f.jsx)("div",{role:"separator",className:s()("ActionsMenuAction__separator",t)})}},14646:(e,t,n)=>{"use strict";n.d(t,{AttachAudio:()=>h});var r=n(334738),o=(n(963328),n(667294)),i=n(20700),a=n.n(i),u=n(21705),s=n(784970),c=n(388751),l=n(819423),d=n(124576),f=n(785893),p=function(e,t){var n=Math.floor(t*(1-e));return"-"+(0,u.formatDuration)(n)},h=o.memo((function(e){var t=e.audio,n=e.message;return Boolean(t.contentRestricted)?(0,f.jsx)(g,{audio:t}):(0,f.jsx)(m,{audio:t,message:n})}));function v(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?"-":"";return n+Math.floor(e/60).toString().split("").fill("0").join("")+":00"}var m=o.memo((function(e){var t=e.audio,n=e.message,i=(0,s.useBrowserEnv)().player,a=(0,o.useContext)(c.ConvoAudiosPlaylistContext),u=(0,o.useState)("stopped"),d=(0,r.default)(u,2),p=d[0],h=d[1],v=(0,o.useState)(0),m=(0,r.default)(v,2),g=m[0],w=m[1],x=(0,o.useRef)("".concat(t.ownerId,"_").concat(t.id)),C=(0,o.useCallback)((function(e){var t=e.currentTrackEntity,n=e.status;if(null!=t&&t.audioTrack&&t.audioTrack.id===x.current){var r=t.audioTrack.progress;h(n),w(r)}}),[]);(0,o.useEffect)((function(){return i.subscribe("stateupdated",C),function(){i.unsubscribe("stateupdated",C)}}),[t,C,i]),(0,o.useEffect)((function(){C(i.getState())}),[]);var b=(0,o.useCallback)((function(e){if(t.url){if("playing"===p)i.pause();else{var r=a(),o="Foreign"===(null==n?void 0:n.kind)||"Normal"===(null==n?void 0:n.kind)?n:void 0;i.play((0,l.toConvoAudioTrack)(g,t,o),r)}e.preventDefault()}}),[t,p,i,a,g,n]);return(0,f.jsx)(y,{progress:g,artist:t.artist,title:t.title,duration:t.duration,status:p,onClick:b})}));function g(e){var t=e.audio,n=(0,d.useRouter)().navigate;return(0,f.jsx)(y,{progress:0,artist:t.artist,title:t.title,duration:t.duration,status:"stopped",className:"AttachAudio__restricted",onClick:function(){n({kind:"AudioRestrictionRuntimeRoute",audio:t})}})}var y=function(e){var t=e.progress,n=e.duration,r=e.artist,o=e.title,i=e.status,s=e.className,c=e.onClick;return(0,f.jsxs)("div",{className:a()("AttachAudio",s,{"AttachAudio--active":"playing"===i||"paused"===i,"AttachAudio--playing":"playing"===i}),children:[(0,f.jsx)("button",{className:"AttachAudio__play",onClick:c,children:(0,f.jsx)("div",{className:a()("AttachAudio__playIcon","playing"===i&&"AttachAudio__playIcon--playing"),children:(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:8,height:10,fill:"currentColor",children:["playing"!==i&&(0,f.jsx)("path",{d:"M1.54 9.4A1 1 0 010 8.58V1.43A1 1 0 011.54.59l5.9 3.82a.7.7 0 010 1.18L1.54 9.4z"}),"playing"===i&&(0,f.jsx)("path",{d:"M.6 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H.6zm5 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H5.6z"})]})})}),(0,f.jsx)("div",{className:"AttachAudio__title",children:o}),(0,f.jsx)("div",{className:"AttachAudio__artist",children:r}),(0,f.jsx)("div",{className:"AttachAudio__duration","data-filler":v(n),children:(0,f.jsx)("div",{className:"AttachAudio__durationIn",children:"playing"===i||"paused"===i?p(t,n):(0,u.formatDuration)(n)})})]})}},55011:(e,t,n)=>{"use strict";n.d(t,{AttachDoc:()=>h});var r=n(334738),o=(n(403658),n(667294),n(151225)),i=n(774877),a=n(940637),u=n(21705),s=n(20700),c=n.n(s),l=n(784970),d=n(887075),f=n(333102),p=n(785893),h=function(e){var t=e.doc,n=e.variant,s=void 0===n?"inline":n,h=e.isInBubble,v=void 0!==h&&h,m=e.forwardLevel,g=void 0===m?0:m,y=e.isOut,w=void 0!==y&&y,x=e.className,C=(0,l.usePixelDensity)(),b=(0,d.getExpectedAttachWidth)(C,v,g,232),E=(0,r.default)(b,2)[1],k=o.preview(t,E),R=t.ext.toUpperCase()+" · "+(0,u.formatFileSize)(t.size);return"preview"===s&&t.image?(0,p.jsx)(f.AttachDocPreview,{doc:t,meta:R,isInBubble:v,forwardLevel:g}):(0,p.jsxs)(a.ExternalLink,{href:t.url,className:c()("AttachDoc",x),download:!0,children:[(0,p.jsx)("figure",{className:c()("AttachDoc__icon",{"AttachDoc__icon--isOut":w}),children:k?(0,p.jsx)("img",{src:k.url,alt:t.title}):(0,p.jsx)(i.default,{})}),(0,p.jsx)("div",{className:"AttachDoc__title",children:t.title}),(0,p.jsx)("div",{className:"AttachDoc__meta",children:R})]})}},333102:(e,t,n)=>{"use strict";n.d(t,{AttachDocPreview:()=>f});var r=n(334738),o=(n(861848),n(667294)),i=n(151225),a=n(940637),u=n(982472),s=n(354629),c=n(784970),l=n(887075),d=n(785893),f=function(e){var t=e.doc,n=e.meta,f=e.isInBubble,p=void 0!==f&&f,h=e.forwardLevel,v=void 0===h?0:h,m=(0,o.useState)(!1),g=(0,r.default)(m,2),y=g[0],w=g[1],x=(0,c.usePixelDensity)(),C="gif"===t.ext,b=(0,l.getExpectedAttachWidth)(x,p,v,232),E=(0,r.default)(b,2),k=E[0],R=E[1],A=i.preview(t,R);if(!A)return null;var M=Math.min(A.width,k),O=Math.ceil(A.height/A.width*M);return(0,d.jsxs)(a.ExternalLink,{href:t.url,className:"AttachDocPreview",style:{width:M,height:O},download:!C,onClick:C?function(e){w((function(e){return!e})),e.preventDefault()}:void 0,target:C?"_self":"_blank",children:[C&&!y&&(0,d.jsx)("div",{className:"AttachDocPreview__play",children:(0,d.jsx)(s.default,{})}),(0,d.jsx)("img",{src:y?t.url:A.url,alt:t.title}),(0,d.jsx)(u.ComposerAttachPreviewMeta,{rounded:!0,top:!0,left:!0,children:n})]})}},211929:(e,t,n)=>{"use strict";n.d(t,{AttachVideos:()=>v,getDuration:()=>m});var r=n(28991),o=(n(458327),n(667294)),i=n(151225),a=n(20700),u=n.n(a),s=n(354629),c=n(21705),l=n(940637),d=n(887075),f=n(261513),p=n(825834),h=n(785893),v=function(e){var t=e.videos,n=e.forwardLevel,a=void 0===n?0:n,c=e.additionalLinkPayload,v=e.onWidthChange,g=(0,d.getAttachForwardIndent)(a),y=(0,f.useImagesLayout)(),w=y.width,x=y.minHeight,C=y.maxSingleHeight,b=y.preferredRatio,E=w-g,k=1===t.length,R=(0,o.useMemo)((function(){return t.reduce((function(e,t){return e+"__"+t.id}),"".concat(E,"__").concat(x,"__").concat(b))}),[t,E,x,b]),A=(0,o.useMemo)((function(){var e=t.reduce((function(e,t){var n=i.preview(t,E);return n&&e.push((0,r.default)((0,r.default)({},n),{},{videoAttach:t})),e}),[]);return e.length?(0,p.computeAttachePhotosLayout)(b,E,{minHeight:x,maxSingleHeight:C},e):null}),[t,x,C,b,E]),M=(0,o.useMemo)((function(){var e;return null==A||null===(e=A[0])||void 0===e?void 0:e.reduce((function(e,t){return e+t.width}),0)}),[A]);return(0,o.useEffect)((function(){null==v||v(M)}),[v,M]),A?(0,h.jsx)("div",{className:"AttachVideos AttachVideos--inBubble","data-width":M,style:{maxWidth:k?"max-content":E},children:A.map((function(e,n){return(0,h.jsx)("div",{className:"AttachVideos__layoutRow",children:e.map((function(e){var n,r,o=e.width,i=e.height,a=e.url,d=e.videoAttach,f=d.id,p=d.duration,v=d.platform,g=d.files,y=d.restriction,w=1===(null==y?void 0:y.blur),x=0===(null==y?void 0:y.can_play),C=m(p,!(null==g||!g.external))||v;return(0,h.jsxs)(l.Link,{to:{kind:"AttachMediaProxyRoute",attach:d,source:c},className:"AttachVideos__link",children:[(0,h.jsx)("img",{style:{width:o,height:i},src:a,alt:"",className:u()("AttachVideos__img",{AttachVideos__previewBackdrop:w||x})}),!w&&(0,h.jsxs)(h.Fragment,{children:[t.length<=3&&(0,h.jsx)("div",{className:"AttachVideos__videoPlay",children:(0,h.jsx)(s.default,{})}),C&&(0,h.jsx)("div",{className:"AttachVideos__videoInfo",children:C})]}),(w||x)&&(0,h.jsxs)("div",{className:"AttachVideos__videoRestrictionWrap",children:[(0,h.jsx)("div",{className:"AttachVideos__videoIconRestriction",style:{backgroundImage:"url('".concat(null==y||null===(n=y.card_icon)||void 0===n||null===(r=n.slice(-1).pop())||void 0===r?void 0:r.url,"')"),filter:"invert(100%)"}}),void 0!==(null==y?void 0:y.title)&&(0,h.jsx)("div",{children:y.title})]})]},f)}))},"".concat(n,"__").concat(R))}))}):null};function m(e,t){return void 0===e?"":!t||t&&e?(0,c.formatDuration)(e):""}},982472:(e,t,n)=>{"use strict";n.d(t,{ComposerAttachPreviewMeta:()=>u});var r=n(28991),o=(n(814106),n(667294),n(20700)),i=n.n(o),a=n(785893),u=function(e){var t=e.children,n=e.rounded,o=e.offsetLength,u=void 0===o?5:o,s=e.top,c=e.right,l=e.bottom,d=e.left,f=["ComposerAttachPreviewMeta",{"ComposerAttachPreviewMeta--rounded":n}],p=u+"px",h=(0,r.default)((0,r.default)((0,r.default)((0,r.default)({},s&&{top:p}),c&&{right:p}),l&&{bottom:p}),d&&{left:p});return(0,a.jsx)("div",{className:i()(f),style:h,children:t})}},261513:(e,t,n)=>{"use strict";n.d(t,{ImagesLayoutProvider:()=>i,useImagesLayout:()=>a});var r=n(667294),o=r.createContext(void 0),i=o.Provider,a=function(){var e=(0,r.useContext)(o);if(!e)throw Error("Все аттачи фото должны сопровождаться контекстом размеров");return e}},760562:(e,t,n)=>{"use strict";n.d(t,{Dropdown:()=>w});var r=n(28991),o=n(896156),i=n(334738),a=n(781253),u=(n(170490),n(667294)),s=n(429697),c=n(39143),l=n(20700),d=n.n(l),f=n(21705),p=n(784970),h=n(417388),v=n(51496),m=n(785893),g=["openType","delay","hideDelay","classNames","content","children","hideOnClick","canOpen","open","onOpen","onClose","forceUpdateContent"],y=(0,u.createContext)(void 0),w=function(e){var t,n=e.openType,l=void 0===n?"hover":n,w=e.delay,x=e.hideDelay,C=void 0===x?150:x,b=e.classNames,E=void 0===b?{}:b,k=e.content,R=e.children,A=e.hideOnClick,M=e.canOpen,O=void 0===M||M,_=e.open,j=void 0!==_&&_,P=e.onOpen,N=e.onClose,S=e.forceUpdateContent,T=(0,a.default)(e,g),I=(0,u.useState)(new Set),L=(0,i.default)(I,2),D=L[0],B=L[1],U=(0,u.useRef)((0,v.nanoid)(5)),F=(0,u.useCallback)((function(e,t){B((function(n){var r=new Set(n);return t?r.add(e):r.delete(e),r}))}),[B]),H=D.size>0,V=(0,p.usePrevious)(H),z=(0,p.usePrevious)(j),G=(0,u.useState)(k),$=(0,i.default)(G,2),q=$[0],W=$[1],Z=(0,h.useDeviceData)().isTouchOnly&&"hover"===l?"click":l,K=function(e){var t=e.canOpen,n=e.open,r=e.openType,o=e.delay,a=e.hideDelay,s=e.childOpen,c=e.id,l=(0,u.useState)("closed"),d=(0,i.default)(l,2),p=d[0],h=d[1],v=(0,u.useRef)(null),m=(0,u.useRef)(null),g=(0,u.useContext)(y),w=(0,u.useCallback)((function(e){h((function(t){var n;switch(n="function"==typeof e?e(t):e){case"opening":case"opened":null==g||g.setChildOpen(c,!0);break;case"closing":case"closed":null==g||g.setChildOpen(c,!1);break;default:(0,f.exhaustivenessCheck)(n)}return n}))}),[g,c]),x=function(e){var t=e.open,n=e.canOpen,r=e.delay,o=e.hideDelay,i=e.openType,a=e.displayState,s=e.setDisplayState,c=e.$content,l=e.$trigger,d=e.childOpen,f=(0,u.useRef)(null),p=(0,u.useRef)(null),h=(0,u.useRef)(null),v=(0,u.useRef)(a);v.current=a;var m=(0,u.useRef)(d);m.current=d;var g=(0,u.useCallback)((function(e){e.current&&(window.clearTimeout(e.current),e.current=null)}),[]),y=(0,u.useCallback)((function(){h.current&&(window.cancelAnimationFrame(h.current),h.current=null)}),[]),w=(0,u.useRef)(void 0===t);w.current=void 0===t;var x=(0,u.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("hover"===i){g(f);var n="closed"===v.current||"closing"===v.current;if(!p.current&&!n){w.current=t;var r=function(){s((function(e){return"opened"===e?"closing":"closed"})),g(p)};e&&"opened"===v.current?p.current=window.setTimeout(r,e):r()}}}),[i,g,s,o]);(0,u.useLayoutEffect)((function(){f.current&&(n||g(f))}),[g,f,n]);var C=(0,u.useCallback)((function(){if("hover"===i&&n){g(p);var e="opened"===v.current||"opening"===v.current;if(!f.current&&!e){w.current=!0;var t=function(){s((function(e){return"closed"===e?"opening":"opened"})),g(f)};r&&"closed"===v.current?f.current=window.setTimeout(t,r):t()}}}),[r,n,i,s,g]),b=(0,u.useCallback)((function(){var e=function(){var e,t;null!==(e=l.current)&&void 0!==e&&e.matches(":hover")||null!==(t=c.current)&&void 0!==t&&t.matches(":hover")||m.current?("closing"!==v.current||w.current)&&C():x()};y(),h.current=window.requestAnimationFrame(e)}),[c,l,y,x,C]);return(0,u.useEffect)((function(){return"hover"===i&&"closed"!==a&&(b(),document.addEventListener("mousemove",b,{passive:!0}),document.addEventListener("wheel",b,{passive:!0})),function(){document.removeEventListener("mousemove",b),document.removeEventListener("wheel",b)}}),[a,b,i,y,d]),(0,u.useEffect)((function(){return function(){g(f),g(p),y()}}),[]),(0,u.useEffect)((function(){!1===t&&(document.removeEventListener("mousemove",b),document.removeEventListener("wheel",b))}),[t,b,g,y]),{onMouseOver:C,hideOnHover:x}}({open:n,canOpen:t,delay:o,hideDelay:a,openType:r,displayState:p,setDisplayState:w,$content:v,$trigger:m,childOpen:s}),C=x.hideOnHover,b=x.onMouseOver,E=function(e){var t=e.$content,n=e.$trigger,r=e.openType,o=e.setDisplayState,i=e.canOpen,a=(0,u.useCallback)((function(e){"click"!==r&&"contextmenu"!==r&&"longtouch"!==r||(null==e||e.stopPropagation(),"contextmenu"===r&&(null==e||e.preventDefault()),o((function(e){switch(e){case"opening":return"closed";case"closed":return i?"opening":"closed";case"opened":case"closing":return"closing";default:return(0,f.exhaustivenessCheck)(e)}})))}),[r,o,i]);return(0,u.useEffect)((function(){if("longtouch"===r){var e=n.current;if(e){var t,o=function(){t&&(window.clearTimeout(t),t=void 0)},i=function(){o();var t=function t(n){e.removeEventListener("touchend",t,!0),n.preventDefault(),n.stopPropagation()};e.addEventListener("touchend",t,{capture:!0,once:!0}),a()},u=function(){o(),t=window.setTimeout(i,500)};return e.addEventListener("touchstart",u,{passive:!0}),e.addEventListener("touchcancel",o,!0),e.addEventListener("touchend",o,!0),e.addEventListener("touchmove",o,{passive:!0}),function(){o(),e.removeEventListener("touchstart",u),e.removeEventListener("touchcancel",o,!0),e.removeEventListener("touchend",o,!0),e.removeEventListener("touchmove",o)}}}}),[n,a,r]),(0,u.useEffect)((function(){var e=function(e){e.stopPropagation(),("click"===r||"contextmenu"===r||"longtouch"===r)&&t.current&&e.target instanceof Node&&!t.current.contains(e.target)&&a()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[t]),{onClick:a}}({$content:v,$trigger:m,openType:r,setDisplayState:w,canOpen:t}).onClick;(0,u.useLayoutEffect)((function(){w((function(e){return n&&t||"closed"===e?t&&n&&"opened"!==e?"opening":e:v.current?"closing":"closed"}))}),[n,t,w]);var k=(0,u.useCallback)((function(){w("opened")}),[w]),R=(0,u.useCallback)((function(){w("closed")}),[w]),A=(0,u.useCallback)((function(e,t){E(),C(e,t)}),[C,E]);return{displayState:p,$content:v,$trigger:m,onClick:E,onHover:b,handleHide:A,handleOpened:k,handleClosed:R}}({canOpen:O,open:j,openType:Z,delay:w,hideDelay:C,childOpen:H,id:U.current}),Y=K.displayState,J=K.$content,X=K.$trigger,Q=K.onClick,ee=K.onHover,te=K.handleHide,ne=K.handleOpened,re=K.handleClosed,oe=(0,u.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),A&&te(0,!1)}),[A,te]);(0,u.useEffect)((function(){"opened"===Y&&(null==P||P()),"closed"===Y&&(null==N||N())}),[Y]),(0,u.useEffect)((function(){var e=!H&&V,t=!j&&z;!S&&(["closing","opening"].includes(Y)||e||t)||W(k)}),[H,k,Y,V,S,j,z]);return(0,m.jsx)("div",{className:d()("DropdownReforged",E.wrapper,(t={},(0,o.default)(t,E.wrapperOpened||"DropdownReforged--opened","opened"===Y),(0,o.default)(t,E.wrapperClosed||"DropdownReforged--closed","closed"===Y),t)),children:(0,m.jsx)(y.Provider,{value:(0,u.useMemo)((function(){return{setChildOpen:F}}),[F]),children:(0,m.jsx)(c.Popper,(0,r.default)((0,r.default)({ref:X},T),{},{portalClassName:E.portal,onMouseEnter:ee,open:"closed"!==Y,content:(0,m.jsx)(s.default,{nodeRef:J,in:"opening"===Y||"opened"===Y,addEndListener:function(e){var t;return null===(t=J.current)||void 0===t?void 0:t.addEventListener("transitionend",e,!1)},mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"DropdownReforged__contentWrapper-",onEntered:ne,onExited:re,children:(0,m.jsx)("div",{ref:J,className:d()("DropdownReforged__contentWrapper",E.contentWrapper),onClickCapture:function(e){H||A&&"closing"===Y&&(e.preventDefault(),e.stopPropagation())},onClick:oe,children:q})}),children:(0,m.jsx)("div",{className:d()("DropdownReforged__trigger",E.trigger),onMouseOver:ee,onMouseEnter:ee,onClick:"click"===Z?Q:void 0,onContextMenu:"contextmenu"===Z?Q:function(e){e.preventDefault()},children:R})}))})})}},656151:(e,t,n)=>{"use strict";n.d(t,{LayerProvider:()=>a,useLayer:()=>u});var r=n(667294),o=(n(973935),n(785893)),i=(0,r.createContext)({}),a=function(e){var t=e.layer,n=e.children;return(0,o.jsx)(i.Provider,{value:{layer:t},children:n})},u=function(){return(0,r.useContext)(i).layer||void 0}},940637:(e,t,n)=>{"use strict";n.d(t,{Link:()=>f,ExternalLink:()=>p});var r=n(28991),o=n(781253),i=n(667294),a=n(784970),u=n(21705),s=n(526067),c=n(785893),l=["to","children","onNavigate","stopPropagation","disabled"],d=["children","href","target","disabled","onClick"],f=(0,i.forwardRef)((function(e,t){var n=e.to,i=e.children,u=e.onNavigate,d=e.stopPropagation,f=void 0===d||d,h=e.disabled,v=(0,o.default)(e,l),m=(0,a.useBrowserEnv)().router,g="AttachMediaProxyRoute"===n.kind?(0,r.default)((0,r.default)({},n),{},{tab:m.currentRoute.tab}):n,y=m.toUrl(g),w=s.IRouter.isProxyRoute(n)?m.fromProxyRoute(n):n,x=function(e){f&&e.stopPropagation(),v.onClick?v.onClick(e):(m.openLink(e,n),null==u||u())};return!y||h?(0,c.jsx)("span",(0,r.default)((0,r.default)({},v),{},{ref:t,children:i})):w?(0,c.jsx)("a",(0,r.default)((0,r.default)({},v),{},{href:y,ref:t,onClick:x,children:i})):(0,c.jsx)(p,(0,r.default)((0,r.default)({},v),{},{href:y,ref:t,onClick:x,children:i}))})),p=(0,i.forwardRef)((function(e,t){var n=e.children,i=e.href,u=e.target,s=e.disabled,l=e.onClick,f=(0,o.default)(e,d),p=(0,a.useBrowserEnv)().vkDomain,v=(0,a.useCombinedRefs)(t);return s?(0,c.jsx)("span",(0,r.default)((0,r.default)({},f),{},{ref:v,children:n})):(0,c.jsx)("a",(0,r.default)((0,r.default)({},f),{},{ref:v,onClick:l,href:h(p,i),target:u||"_blank",rel:"noopener noreferrer",children:n}))}));function h(e,t){var n=e.replace(".","\\."),r=(0,u.safeDecodeURI)(t),o=/^\/[^/]/.test(r)||new RegExp("^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?(".concat(n,"|vk\\.me|vk\\.cc)(\\/.*)?")).test(r);return function(e){return/^mailto:/.test(e)}(t)||o?t:function(e,t){return"https://".concat(t,"/away.php?to=").concat(encodeURIComponent(e),"&utf=1")}(t,e)}},707731:(e,t,n)=>{"use strict";n.d(t,{ModalsProvider:()=>c,useModalContext:()=>l});var r=n(334738),o=n(667294),i=n(21705),a=n(210746),u=n(785893),s=(0,o.createContext)(null),c=function(e){var t=e.children,n=e.modals,c=e.stacks,l=(0,o.useCallback)((function(e){var t=!0;if(Object.values(c).forEach((function(n){var r=n.currentElement,o=0;if((null==r?void 0:r.groupId)===e){for(t=!1;(null===(i=n.currentElement)||void 0===i?void 0:i.groupId)===e;){var i;o+=1,n.goBack()}n.pop(o)}})),t)throw Error("Пытаетесь закрыть группу модалок, которая закрыта")}),[c]),d=(0,o.useCallback)((function(e,t){var r=n.getModalParams(e),o=r.groupId,i=r.isSubModal,a=c[t];if(null!==a.findIndex(e))throw new Error("Пытаетесь открыть модалку, которая открыта");a.push({modalId:e,groupId:o,isSubModal:i})}),[c,n]),f=(0,o.useCallback)((function(e,t){var n=c[t],r=n.currentElement;if((null==r?void 0:r.modalId)!==e)throw Error("Пытаетесь закрыть модалку, которая закрыта");n.pop()}),[c]),p=(0,o.useCallback)((function(e,t){c[t].forcedRemove((function(t){return t.modalId===e}))}),[c]),h=(0,o.useCallback)((function(e,t){return c[t].findIndex(e)}),[c]),v=(0,o.useState)({rightPanel:[],popup:[]}),m=(0,r.default)(v,2),g=m[0],y=m[1];(0,o.useLayoutEffect)((function(){var e=Object.keys(c).map((function(e){return c[e].subscribe((function(t){var n=t.action,r=t.payload;switch(n){case"add":y((0,a.default)((function(n){n[e]=t.payload.isSubModal?n[e].filter((function(e){return e!==r.modalId})):[],n[e].push(r.modalId)})));break;case"remove":y((0,a.default)((function(t){t[e]=t[e].filter((function(e){return!r.find((function(t){return e===t.modalId}))}))})));break;default:(0,i.exhaustivenessCheck)(n)}}))}));return function(){return e.forEach((function(e){return e()}))}}),[c]);var w=(0,o.useCallback)((function(e){return c[e].size}),[c]),x=(0,o.useMemo)((function(){return{openedModals:g,openModal:d,closeModal:f,closeModalForced:p,closeGroup:l,getModalGroup:n.getModalGroup,createModal:n.createModal,createGroup:n.createGroup,getStackSize:w,findIndexInStack:h}}),[g,d,f,p,l,n.getModalGroup,n.createModal,n.createGroup,w,h]);return(0,u.jsx)(s.Provider,{value:x,children:t})};function l(){var e=(0,o.useContext)(s);if(!e)throw new Error("ModalContext не добавлен в дерево Реакта!");return e}},838851:(e,t,n)=>{"use strict";n.d(t,{OptimizedSpinner:()=>l});var r=n(28991),o=(n(241676),n(667294)),i=n(20700),a=n.n(i),u=n(86894),s=n(254632),c=n(785893),l=function(e){var t=e.className,n=e.size,i=void 0===n?"small":n,l=e.intersectionOptions,d=e.onIntersection,f=(0,s.useInView)((0,r.default)((0,r.default)({},l),{},{threshold:.01})),p=f.ref,h=f.inView;return(0,o.useEffect)((function(){h&&d&&d()}),[h]),(0,c.jsx)("div",{ref:p,className:a()("OptimizedSpinner",t),children:h&&(0,c.jsx)(u.Spinner,{size:i})})}},388751:(e,t,n)=>{"use strict";n.d(t,{ConvoAudiosPlaylistContext:()=>a,ConvoAudiosPlaylistProvider:()=>u});var r=n(667294),o=n(819423),i=n(785893),a=r.createContext((function(){})),u=function(e){var t=e.convo,n=e.children,u=(0,r.useRef)(t);u.current=t;var s=(0,r.useCallback)((function(){var e=(0,o.mapConvoToConvoAudioTrackList)(u.current),t={type:"temp",convoPeerId:u.current.peerId};return new o.ConvoAudiosPlaylist({list:e,meta:t})}),[]);return(0,i.jsx)(a.Provider,{value:s,children:n})}},39143:(e,t,n)=>{"use strict";n.d(t,{Popper:()=>v});var r=n(28991),o=n(334738),i=n(781253),a=(n(833249),n(667294)),u=n(20700),s=n.n(u),c=n(826954),l=n(784970),d=n(887075),f=n(656151),p=n(785893),h=["open","position","mode","align","adaptation","content","portalClassName","children","portalTarget"],v=a.forwardRef((function(e,t){var n,u=e.open,v=void 0===u||u,m=e.position,g=void 0===m?"auto":m,y=e.mode,w=void 0===y?"side":y,x=e.align,C=void 0===x?"auto":x,b=e.adaptation,E=e.content,k=e.portalClassName,R=e.children,A=e.portalTarget,M=(0,i.default)(e,h),O=(0,f.useLayer)(),_=(0,a.useState)(null),j=(0,o.default)(_,2),P=j[0],N=j[1],S=(0,l.useCombinedRefs)(t),T=(0,a.useState)(null),I=(0,o.default)(T,2),L=I[0],D=I[1],B=(0,a.useState)(null),U=(0,o.default)(B,2),F=U[0],H=U[1],V=(0,a.useState)(null),z=(0,o.default)(V,2),G=z[0],$=z[1],q=(0,r.default)((0,r.default)({},R.props),{},{ref:S}),W=(0,a.useCallback)((function(e){e&&N(e)}),[]);return(0,a.useLayoutEffect)((function(){if(S.current){var e=function(e,t,n,o,i,a,u,s){var c;if(!a)return[null,null,null];var l="auto",f=["top","bottom"],p=["left","right"],h="fixed";if(!e)return[{top:0,left:0,width:0,height:0,position:h},i===l?"left":i,o===l?"bottom":o];var v=e.getBoundingClientRect(),m=window,g=m.innerWidth,y=m.innerHeight,w=window.scrollY||document.documentElement.scrollTop,x=window.scrollX||document.documentElement.scrollLeft;s&&(v=(0,d.getOffsetRect)(e,s),g=s.clientWidth,y=s.clientHeight,w=s.scrollTop,x=s.scrollLeft,h="absolute");var C=null==t?void 0:t.getBoundingClientRect(),b=(null==C?void 0:C.width)||0,E=(null==C?void 0:C.height)||0,k=b?Math.max(v.width,b):void 0,R=E?Math.max(v.height,E):void 0;if(o===l){var A=v.top-w;o=w+y-v.top-v.height>A?"bottom":"top"}if(i===l){var M=v.left+.5*v.width,O=x+2*g/3;i=M>=x+g/3&&M<=O?"center":M>O?"right":"left"}var _=d.browser.safari_mobile&&(null===(c=window.visualViewport)||void 0===c?void 0:c.pageTop)||0,j=v.left,P=v.top+_,N=j+v.width,S=P+v.height,T=.5*v.width,I=.5*b,L=.5*v.height,D=.5*E,B=v.width<b,U=v.height<E,F=P<E,H=S+E>y+w,V=s&&P-w<E,z=S<E,G=P+L<D,$=P+E>y+w,q=P+L+D>y+w,W=N<b,Z=N+b>g+x,K=j+T<I,Y=j+T+I>g+x,J="horizontal"===u,X="vertical"===u;E&&b&&(X||(("top"===o&&F||"center"===i&&G||p.includes(i)&&z)&&(o="bottom"),("bottom"===o&&H||"center"===i&&q||p.includes(i)&&$)&&(o="top")),J||(f.includes(o)&&(p.includes(i)&&(W&&(i="left"),Z&&(i="right")),"center"===i&&(Y&&(i="right"),K&&(i="left"))),p.includes(o)&&(W&&(o="right",i="center"===i?i:"left"),Z&&(o="left",i="center"===i?i:"right"))));if("side"===n){var Q={};switch(o){case"top":Q={width:k,top:P-E};break;case"bottom":Q={width:k,top:S};break;case"left":Q={height:R,left:j-b};break;case"right":Q={height:R,left:N}}if(f.includes(o)&&B&&("right"===i&&(Q.left=N-b),"center"===i&&(Q.left=j+T-I),J&&(("center"===i&&K||"right"===i&&W)&&(Q.left=0),("center"===i&&Y||"left"===i&&Z)&&(Q.left=g-b+x))),p.includes(o)&&U){switch(i){case"center":Q.top=P+L-D;break;case"top":Q.top=P-E+v.height}X&&(("center"===i&&G||p.includes(i)&&z)&&(Q.top=0),V&&"center"===i&&(Q.top=w),("center"===i&&q||p.includes(i)&&$)&&(Q.top=y-E+w))}return[(0,r.default)((0,r.default)({top:P,left:j},Q),{},{position:h}),i,o]}switch(o){case"top":j+=.5*v.width;break;case"right":j+=v.width,P+=.5*v.height;break;case"bottom":j+=.5*v.width,P+=v.height;break;case"left":P+=.5*v.height}return[{top:P,left:j,width:b,height:E,position:h},i,o]}(S.current,P,w,g,C,v,b,null!=A&&A.current?A.current:void 0),t=(0,o.default)(e,3),n=t[0],i=t[1],a=t[2];D(n),H(i),$(a)}}),[E,w,g,C,S,v,P,A,b]),(0,p.jsxs)(p.Fragment,{children:[a.cloneElement(R,q),v&&(0,p.jsx)(c.Portal,(0,r.default)((0,r.default)({},M),{},{ref:W,className:s()("MEPopper","MEConfig",F&&"MEPopper--align".concat((n=F,n.length>0?n.slice(0,1).toUpperCase()+n.slice(1):"")),G&&"MEPopper--".concat(G)),"data-align":F,"data-position":G,portalClassName:k,style:L||void 0,portalTarget:(null==A?void 0:A.current)||O,children:E}))]})}))},826954:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>f});var r=n(28991),o=n(678927),i=n(334738),a=n(781253),u=n(667294),s=n(973935),c=n(784970),l=n(785893),d=["children","portalClassName","portalTarget"],f=(0,u.forwardRef)((function(e,t){var n=e.children,f=e.portalClassName,p=e.portalTarget,h=(0,a.default)(e,d),v=(0,u.useState)(null),m=(0,i.default)(v,2),g=m[0],y=m[1],w=(0,c.usePrevious)(f);return(0,u.useEffect)((function(){if(g){var e,t;if(w)(e=g.classList).remove.apply(e,(0,o.default)(w.split(" ")));if(f)(t=g.classList).add.apply(t,(0,o.default)(f.split(" ")))}}),[g,f,w]),(0,u.useLayoutEffect)((function(){if(null!==p){var e=function(e,t){var n,r=document.createElement("div");e&&(n=r.classList).add.apply(n,(0,o.default)(e.split(" ")));return(t||document.body).appendChild(r)}(f,p);return y(e),function(){e.remove()}}}),[p]),g?s.createPortal((0,l.jsx)("div",(0,r.default)((0,r.default)({},h),{},{ref:t,children:n})),g):null}))},635544:(e,t,n)=>{"use strict";n.d(t,{Provider:()=>f});var r=n(28991),o=n(667294),i=n(314432),a=n(784970),u=n(707731),s=n(124576),c=n(777673),l=n(16032),d=n(785893),f=function(e){var t=e.children,n=e.env,f=e.featureFlags,p=e.state,h=e.dispatch,v=e.owner,m=e.appSource,g=(0,o.useCallback)((function(e){h((0,r.default)({type:"CacheUpdateReceived"},e))}),[h]),y=(0,o.useMemo)((function(){return(0,r.default)({viewer:i.safeGet(p.peers,p.viewer.id)},p.viewer)}),[p.peers,p.viewer]),w=(0,o.useMemo)((function(){return{popup:n.modals.stack,rightPanel:new l.Stack}}),[n.modals.stack]);return(0,d.jsx)(a.BrowserEnvProvider,{value:n,children:(0,d.jsx)(s.RouterProvider,{children:(0,d.jsx)(u.ModalsProvider,{modals:n.modals.system,stacks:w,children:(0,d.jsx)(a.DispatchProvider,{value:h,children:(0,d.jsx)(a.FeatureFlagsProvider,{value:f,children:(0,d.jsx)(a.HelpHintsProvider,{value:p.helpHints,children:(0,d.jsx)(a.OnlinesProvider,{value:p.onlines,children:(0,d.jsx)(a.TypingsProvider,{value:p.typings,children:(0,d.jsx)(a.PeersProvider,{value:p.peers,children:(0,d.jsx)(a.OwnerProvider,{value:v,children:(0,d.jsx)(a.ConvosProvider,{value:p.convos,children:(0,d.jsx)(a.ChannelsProvider,{value:p.channels,children:(0,d.jsx)(a.ConvosSearchIndexProvider,{value:p.convosSearchIndex,children:(0,d.jsx)(a.ViewerProvider,{value:y,children:(0,d.jsx)(a.InsertIntoCacheProvider,{value:g,children:(0,d.jsx)(c.ComposerDraftsProvider,{value:p.composerDrafts,children:(0,d.jsx)(c.ChannelComposerDraftsProvider,{value:p.channelComposerDrafts,children:(0,d.jsx)(a.AppSourceProvider,{value:m,children:(0,d.jsx)(a.VideoMessageShapesProvider,{value:p.videoMessageShapes,children:t})})})})})})})})})})})})})})})})})})})}},124576:(e,t,n)=>{"use strict";n.d(t,{RouterProvider:()=>c,useRouter:()=>l,useConvoRoute:()=>d});var r=n(334738),o=n(784970),i=n(526067),a=n(667294),u=n(785893),s=(0,a.createContext)({}),c=function(e){var t=e.children,n=(0,o.useBrowserEnv)().router,c=(0,a.useState)(n.currentRoute),l=(0,r.default)(c,2),d=l[0],f=l[1],p=(0,a.useState)(n.modalRoute?[n.modalRoute]:[]),h=(0,r.default)(p,2),v=h[0],m=h[1];(0,a.useLayoutEffect)((function(){var e=n.subscribe((function(e,t){m((function(n){var r=[];if(i.IRouter.isModalRoute(e))switch(t){case"PUSH":r=n.concat(e);break;case"POP":r=n.slice(0,-1),0===n.length&&r.push(e);break;case"REPLACE":r=n.splice(-1,1,e)}return r})),f(e)}));return function(){return e()}}),[n]);var g=v.slice(-1)[0];return(0,u.jsx)(s.Provider,{value:{router:n,route:d,fromUrl:n.fromUrl,toUrl:n.toUrl,toRoute:n.fromProxyRoute,modalRoute:g||null,modalRoutes:v,screenRoute:n.screenRoute,runtimeRoute:n.runtimeRoute},children:t})},l=function(){var e=(0,a.useContext)(s),t=e.route,n=e.router,r=e.screenRoute,o=e.modalRoute,i=e.runtimeRoute,u=e.modalRoutes,c=e.toUrl,l=e.toRoute,d=e.fromUrl;return{route:t,screenRoute:r,modalRoute:o,runtimeRoute:i,modalRoutes:u,navigate:n.push,back:n.back,forward:n.forward,replace:n.replace,fromUrl:d,toUrl:c,toRoute:l}},d=function(){var e=l().screenRoute;if("ConvoRoute"!==e.kind)throw Error("Используйте хук только внутри роута Convo");return e}},708787:(e,t,n)=>{"use strict";n.d(t,{Tooltip:()=>h});var r=n(28991),o=n(334738),i=n(781253),a=(n(126449),n(667294)),u=n(20700),s=n.n(u),c=n(39143),l=n(784970),d=n(417388),f=n(785893),p=["children","content","position","align","open","onOpen","onClose","delay","backgroundColor","pointerEvents","showOnTouch"],h=function(e){var t=e.children,n=e.content,u=e.position,h=void 0===u?"auto":u,v=e.align,m=void 0===v?"auto":v,g=e.open,y=void 0!==g&&g,w=e.onOpen,x=e.onClose,C=e.delay,b=void 0===C?50:C,E=e.backgroundColor,k=e.pointerEvents,R=void 0===k?"none":k,A=e.showOnTouch,M=void 0!==A&&A,O=(0,i.default)(e,p),_=(0,l.useFeatureFlags)(),j=(0,d.useDeviceData)(),P=(0,a.useState)(y?"opened":"closed"),N=(0,o.default)(P,2),S=N[0],T=N[1],I=E||"rgba(0, 0, 0, 0.72)",L=(0,a.useRef)(null),D=(0,a.useRef)(null),B=(0,a.useRef)(null),U=function(){D.current&&clearTimeout(D.current),B.current&&clearTimeout(B.current),D.current=B.current=null},F=(0,a.useCallback)((function(){T("closed"),x&&x()}),[x]),H=(0,a.useCallback)((function(){"opened"===S?(T("is_closing"),B.current=window.setTimeout(F,200)):F()}),[S,F]),V=(0,a.useCallback)((function(){U(),D.current=window.setTimeout((function(){T("opened"),w&&w()}),b)}),[b,w]),z=(0,a.useCallback)((function(){U(),D.current=window.setTimeout(H,0)}),[H]);(0,a.useEffect)((function(){var e=L.current;return e&&(e.addEventListener("mouseenter",V),e.addEventListener("mouseleave",z)),function(){e&&(e.removeEventListener("mouseenter",V),e.removeEventListener("mouseleave",z))}}),[V,z]),(0,a.useEffect)((function(){return U}),[]),(0,l.useDidUpdate)((function(){y?V():z()}),[y]);var G=(0,f.jsx)("div",{className:s()("METooltip",{"METooltip--removed":"is_closing"===S}),style:{"--tooltip_dark_background":I,pointerEvents:R},children:n});return _.me_fc_tooltips?!M&&j.isTouchOnly?t:(0,f.jsx)(c.Popper,(0,r.default)((0,r.default)({content:G,position:h,align:m,open:"closed"!==S,ref:L,portalClassName:"MEConfig"},O),{},{children:t})):t}},825834:(e,t,n)=>{"use strict";n.d(t,{computeAttachePhotosLayout:()=>f});var r=n(678927),o=n(111965),i=n(28991);function a(e,t){var n=e/t.reduce((function(e,t){return e+t.width}),0),r=t.map((function(e){var t=e.height,r=e.width;return(0,i.default)((0,i.default)({},e),{},{height:t*n,width:r*n})}));return r}function u(e,t){var n=t.height,r=t.width,o=e/n;return(0,i.default)((0,i.default)({},t),{},{height:e,width:r*o})}function s(e){var t,n=0,r=0,i=e[0],a=(0,o.default)(i);try{for(a.s();!(t=a.n()).done;){r+=t.value.width}}catch(e){a.e(e)}finally{a.f()}var u,s=(0,o.default)(e);try{for(s.s();!(u=s.n()).done;){var c=u.value;c[0]&&(n+=c[0].height)}}catch(e){s.e(e)}finally{s.f()}return r/n}function c(e,t){var n=t[0],o=[].concat((0,r.default)(t),[e]).sort((function(e,t){return e-t})),i=o.findIndex((function(t){return t===e})),a=o[i-1],u=o[i+1];if(!a&&u)n=u;else if(!u&&a)n=a;else if(u&&a){if(e>=1&&a<.75)return u;n=u/e>e/a?a:u}return n}function l(e,t){return e.map((function(e){var n=c(e.width/e.height,t);return e.width>e.height?(0,i.default)((0,i.default)({},e),{},{width:n*e.height}):(0,i.default)((0,i.default)({},e),{},{height:e.width/n})}))}function d(e,t,n){var r=t.minHeight;return n.reduce((function(t,n,o,i){var a=t[t.length-1],s=u(r,n),c=s.width,l=a?a.reduce((function(e,t){return e+t.width}),0):0;return(c+l<=e||o===i.length-1)&&a?a.push(s):t.push([s]),t}),[]).map((function(t){return a(e,t)})).map((function(t){if(1===t.length&&t[0]){var n=t[0],r=n.width>n.height;return[(0,i.default)((0,i.default)({},n),{},{width:e,height:r?n.height>e/2?e/2:n.height:e})]}return t}))}function f(e,t,n,r){var i=n.maxSingleHeight,f=[],p={},h=[9/16,3/4,1,4/3,16/9],v=function(e,t){for(var n=function(e,t,n){var r=[t],o=e;do{(o=r[r.length-1]-t*n)<e&&(o=e),r.push(o)}while(o!==e);return r}(t.minHeight,e,.05),r=[],o=0;o<n.length;o++){var i=n[o];i&&r.push({minHeight:i})}return r}(t,n),m=l(r,h),g=r[0];if(1===r.length&&g)return function(e,t,n,r){if(l([n],t)[0]){if(n.width>=n.height)return[a(e,[n])];var o=r||16/9*e,i=a(e,[n])[0];return i&&i.height<o?[[i]]:[[u(o,n)]]}return[[n]]}(t,h,g,i);var y,w,x=(0,o.default)(v);try{for(x.s();!(y=x.n()).done;){var C=d(t,y.value,m),b=s(C);f.push(b),p[b]=C}}catch(e){x.e(e)}finally{x.f()}if(f.length){var E=c(e,f);w=E&&p[E]}return w||d(t,n,r)}},887075:(e,t,n)=>{"use strict";n.d(t,{getOffsetRect:()=>c,browser:()=>d,isMac:()=>f,getAttachForwardIndent:()=>p,getExpectedAttachWidth:()=>h,enRuKeysMap:()=>v,getPeersInlineNames:()=>m,getOrganiserUid:()=>g,getSafeCount:()=>y,formatPhoneNumber:()=>w});var r=n(692137),o=n(896156),i=n(887757),a=n.n(i),u=(n(667294),n(21705)),s=n(785893);function c(e,t){if("undefined"==typeof window||!(e instanceof HTMLElement))return{top:0,left:0,width:0,height:0};var n=e.getBoundingClientRect(),r=null==t?void 0:t.getBoundingClientRect(),o=document.body,i=document.documentElement,a=t?t.scrollTop:window.pageYOffset||i.scrollTop||o.scrollTop,u=(t?t.scrollLeft:window.pageXOffset)||i.scrollLeft||o.scrollLeft,s=i.clientTop||o.clientTop||0,c=i.clientLeft||o.clientLeft||0;return{top:n.top-((null==r?void 0:r.top)||0)+a-s,left:n.left-((null==r?void 0:r.left)||0)+u-c,width:n.width,height:n.height}}var l=navigator.userAgent.toLowerCase(),d={version:(l.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[/: ]([\d.]+)/)||[0,"0"])[1],safari:!/chrome/i.test(l)&&/webkit|safari|khtml/i.test(l),safari_mobile:/iphone|ipod|ipad/i.test(l),ios:/.+(ipod|ipad|iphone.*os)/i.test(l),touch:window.matchMedia("(pointer: coarse)").matches,voiceRecordingSupported:Boolean(window.navigator.mediaDevices&&"getUserMedia"in window.navigator.mediaDevices&&(window.AudioContext||window.webkitAudioContext))},f="userAgentData"in window.navigator&&"platform"in window.navigator.userAgentData?0===window.navigator.userAgentData.platform.indexOf("mac"):0===window.navigator.platform.indexOf("Mac"),p=function(e){return e>0?22+10*(e-1):0};function h(e,t,n,r){var o=r+(t?0:8)-p(n);return[o,o*(e?"undefined"!=typeof window?window.devicePixelRatio:2:1)]}var v=(0,o.default)({q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":"."},f?"\\":"`","ё"),m=function(e,t,n,r){var o=[];return e.forEach((function(i,a){o.push(n(i),function(n){return n===e.length-1?"":t===e.length&&n===e.length-2?" ".concat(r.use("me_chat_members_last_divider")," "):", "}(a))})),t>e.length&&(0===e.length?o.push(r.use("me_chat_members_count",{num:t-e.length})):o.push(r.use("me_chat_members_count_lots",{num:t-e.length,values:{names:""}}))),o.length>0?(0,s.jsx)(s.Fragment,{children:o}):null};function g(e){switch(e.kind){case"filters":return e.filter;case"folders":return e.id;default:(0,u.exhaustivenessCheck)(e)}}var y=function(e){return Math.min(1e3,e)};function w(e){return x.apply(this,arguments)}function x(){return(x=(0,r.default)(a().mark((function e(t){var r,o,i,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(98755).then(n.bind(n,198755));case 2:return s=e.sent,c=s.parsePhoneNumber,l=c(t.replace(/^(\+|)+/,"+")),e.abrupt("return",{isValid:l.valid,international:null!==(r=null===(o=l.number)||void 0===o?void 0:o.international)&&void 0!==r?r:t,national:null!==(i=null===(u=l.number)||void 0===u?void 0:u.national)&&void 0!==i?i:t});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},416872:(e,t,n)=>{"use strict";n.d(t,{empty:()=>a,VISIBILITY:()=>u,TOPICS:()=>s,DONUT_DELAY:()=>c,SEND_OPTIONS:()=>l,validateRequiredFields:()=>d});var r=n(28991),o=n(334738),i=n(716352);function a(){return{text:"",attaches:{},uploadsTrackIds:new Set,visibility:"all",donutDelay:-1,topic:"no_theme",sendOptions:{selected:[],disabled:[]},resetSendOptions:[]}}var u=["all","donut"],s=[["no_theme",0],["art",1],["it",7],["games",12],["music",16],["photo",19],["science",21],["sport",23],["tourism",25],["cinema",26],["humor",32],["style",43]],c=[-1,1,2,3,4,5,6,7],l=["close_comments","signed","mute_notifications","mark_as_ads"];function d(e){var t=a();return Object.entries(e).reduce((function(e,n){var a=(0,o.default)(n,2),u=a[0],s=a[1],c=i.resolveId(+u);return e[c]=s,s.uploadsTrackIds instanceof Set||(e[c]=(0,r.default)((0,r.default)({},s),{},{uploadsTrackIds:t.uploadsTrackIds})),e}),{})}},689018:(e,t,n)=>{"use strict";n.d(t,{empty:()=>s,DEFAULT_FORWARD_AUTHOR_HIDDEN:()=>c,isEmpty:()=>l,hasActiveUploads:()=>d,getNormalForward:()=>f,validateRequiredFields:()=>p});var r=n(28991),o=n(334738),i=n(678927),a=n(314432),u=n(21705);function s(){return{text:"",attaches:{},uploadsTrackIds:new Set}}var c=!1;function l(e,t){var n=0!==Object.keys(e.attaches).length;return 0===t.length&&!e.forward&&!n&&!d(e)}function d(e){return 0!==e.uploadsTrackIds.size}function f(e,t){if(e.forward&&e.forward.kind===t){var n=(0,i.default)(e.forward.items).filter((function(e){return"Normal"===e.kind}));return(0,u.isNonEmptyArray)(n)?n:void 0}}function p(e){var t=s();return Object.entries(e).reduce((function(e,n){var i=(0,o.default)(n,2),u=i[0],s=i[1];if("kind"in s)return e;var c=a.resolveId(+u);return e[c]=s,s.uploadsTrackIds instanceof Set||(e[c]=(0,r.default)((0,r.default)({},s),{},{uploadsTrackIds:t.uploadsTrackIds})),e}),{})}},526067:(e,t,n)=>{"use strict";n.d(t,{IRouter:()=>r});var r,o=n(21705);!function(e){var t;!function(e){e[e.Message=0]="Message",e[e.Post=1]="Post",e[e.Composer=2]="Composer",e[e.Comment=3]="Comment",e[e.ChannelComposer=4]="ChannelComposer"}(t||(t={})),e.RouteSourceKind=t;e.globalParamsKeys=["tab","folder","createPoll"],e.convoRouteExtraParamsKeys=["settings","contacts","createChat"],e.withExtraConvoParams=function(e){return"MainRoute"===e.kind||"ConvoRoute"===e.kind||"ChannelRoute"===e.kind||"ChannelsListRoute"===e.kind},e.isModalRoute=function(e){switch(e.kind){case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":return!0;case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":return!1;default:(0,o.exhaustivenessCheck)(e)}},e.isProxyRoute=function(e){switch(e.kind){case"AttachProxyRoute":case"AttachMediaProxyRoute":return!0;case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":return!1;default:(0,o.exhaustivenessCheck)(e)}},e.isRuntimeRoute=function(e){switch(e.kind){case"ModalMessageRuntimeRoute":case"EmptyRuntimeRoute":case"AudioRestrictionRuntimeRoute":return!0;case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":return!1;default:(0,o.exhaustivenessCheck)(e)}}}(r||(r={}))},16032:(e,t,n)=>{"use strict";n.d(t,{Stack:()=>u,Modals:()=>s,resolveId:()=>c});var r=n(306610),o=n(5991),i=n(896156),a=n(51496),u=function(){function e(){var t,n=this;(0,r.default)(this,e),(0,i.default)(this,"index",0),(0,i.default)(this,"pop",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=n.history.splice(-e,e);n.onItemsRemove(t)})),(0,i.default)(this,"forcedRemove",(function(e){var t=n.history.reduce((function(t,n){return e(n)?t.toRemove.push(n):t.actualHistory.push(n),t}),{actualHistory:[],toRemove:[]});n.history=t.actualHistory,n.onItemsRemove(t.toRemove)})),this.history=[],this.listeners=(t=[],{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}})}return(0,o.default)(e,[{key:"push",value:function(e){this.history.push(e),this.index=this.history.length-1,this.listeners.call({action:"add",payload:e})}},{key:"goBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.index-=e}},{key:"subscribe",value:function(e){return this.listeners.push(e)}},{key:"lastElement",get:function(){return this.history[this.history.length-1]||null}},{key:"currentElement",get:function(){return this.history[this.index]||null}},{key:"findIndex",value:function(e){var t=this.history.findIndex((function(t){return t.modalId===e}));return-1!==t?t:null}},{key:"size",get:function(){return this.history.length}},{key:"onItemsRemove",value:function(e){this.index=this.history.length-1,this.listeners.call({action:"remove",payload:e}),this.lastElement&&this.listeners.call({action:"add",payload:this.lastElement})}}]),e}();var s=function(){function e(){var t=this;(0,r.default)(this,e),(0,i.default)(this,"createGroup",(function(){var e=(0,a.nanoid)(),n={id:e,group:[]};return t.system.groups.set(e,n),{data:n,remove:t.removeGroup.bind(t,e)}})),(0,i.default)(this,"createModal",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=t.system.groups.get(e);if(!o)throw Error("Нет такого стека");var i=r||(0,a.nanoid)();return o.group.push({id:i}),t.system.modals.set(i,{groupId:o.id,isSubModal:n}),{id:i,remove:t.removeModal.bind(t,i)}})),(0,i.default)(this,"getModalGroup",(function(e){var n=t.system.groups.get(e);if(!n)throw Error("Передан Id несуществующей группы модалок");return n})),(0,i.default)(this,"getModalParams",(function(e){var n=t.system.modals.get(e);if(!n)throw Error("Попытка получить несуществующую модалку");return n})),this.system={modals:new Map,groups:new Map}}return(0,o.default)(e,[{key:"removeGroup",value:function(e){this.system.groups.delete(e)}},{key:"removeModal",value:function(e){var t=this.getModalParams(e).groupId,n=this.system.groups.get(t);if(void 0!==n){var r=n.group,o=r.findIndex((function(t){return t.id===e}));r.splice(o,1)}this.system.modals.delete(e)}}]),e}();function c(e){return e}},20700:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var a=o.apply(null,n);a&&e.push(a)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},367075:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(t);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}var a=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,n){return!Object.is(e,t[n])}))},u={error:null},s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state=u,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}i(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(u)},n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},n.componentDidUpdate=function(e,t){var n,r,o=this.state.error,i=this.props.resetKeys;null!==o&&null!==t.error&&a(e.resetKeys,i)&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,i),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,o=t.FallbackComponent,i=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(i))return i;if("function"==typeof n)return n(a);if(o)return r.createElement(o,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.Component);function c(e,t){var n=function(n){return r.createElement(s,t,r.createElement(e,n))},o=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+o+")",n}function l(e){var t=r.useState(null),n=t[0],o=t[1];if(null!=e)throw e;if(null!=n)throw n;return o}e.ErrorBoundary=s,e.useErrorHandler=l,e.withErrorBoundary=c,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(667294))},362548:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var t=e((function(e,t){!function(t,n){e.exports=n()}(0,(function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?i(t(n),n,r):n}function r(t,r,o){var a=t.slice();return r.forEach((function(r,u){void 0===a[u]?a[u]=n(r,o):e(r)?a[u]=i(t[u],r,o):-1===t.indexOf(r)&&a.push(n(r,o))})),a}function o(t,r,o){var a={};return e(t)&&Object.keys(t).forEach((function(e){a[e]=n(t[e],o)})),Object.keys(r).forEach((function(u){e(r[u])&&t[u]?a[u]=i(t[u],r[u],o):a[u]=n(r[u],o)})),a}function i(e,t,i){var a=Array.isArray(t),u=(i||{arrayMerge:r}).arrayMerge||r;return a?Array.isArray(e)?u(e,t,i):n(t,i):o(e,t,i)}return i.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return i(e,n,t)}))},i}))}));function r(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map((function(e){e(n)})),(e["*"]||[]).map((function(e){e(t,n)}))}}}var o=e((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),i=function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},a=o.svg,u=o.xlink,s={};s[a.name]=a.uri,s[u.name]=u.uri;var c,l=function(e,n){void 0===e&&(e="");var r=t(s,n||{});return"<svg "+i(r)+">"+e+"</svg>"},d=o.svg,f=o.xlink,p={attrs:(c={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},c[d.name]=d.uri,c[f.name]=f.uri,c)},h=function(e){this.config=t(p,e||{}),this.symbols=[]};h.prototype.add=function(e){var t=this.symbols,n=this.find(e.id);return n?(t[t.indexOf(n)]=e,!1):(t.push(e),!0)},h.prototype.remove=function(e){var t=this.symbols,n=this.find(e);return!!n&&(t.splice(t.indexOf(n),1),n.destroy(),!0)},h.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},h.prototype.has=function(e){return null!==this.find(e)},h.prototype.stringify=function(){var e=this.config.attrs,t=this.symbols.map((function(e){return e.stringify()})).join("");return l(t,e)},h.prototype.toString=function(){return this.stringify()},h.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var v=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};v.prototype.stringify=function(){return this.content},v.prototype.toString=function(){return this.stringify()},v.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var m=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},g=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return m(l(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(v),y={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},w=function(e){return Array.prototype.slice.call(e,0)},x={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},C=function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)},b=function(e){var t=[];return w(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})),t},E=function(e){return(e||window.location.href).split("#")[0]},k=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,r){C(e,{oldUrl:r,newUrl:n})}))}])},R="linearGradient, radialGradient, pattern, mask, clipPath",A=function(e,t){return void 0===t&&(t=R),w(e.querySelectorAll("symbol")).forEach((function(e){w(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e};function M(e,t){return w(e).reduce((function(e,n){if(!n.attributes)return e;var r=w(n.attributes),o=t?r.filter(t):r;return e.concat(o)}),[])}var O=o.xlink.uri,_="xlink:href",j=/[{}|\\\^\[\]`"<>]/g;function P(e){return e.replace(j,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}function N(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(e,t,n){return w(e).forEach((function(e){var r=e.getAttribute(_);if(r&&0===r.indexOf(t)){var o=r.replace(t,n);e.setAttributeNS(O,_,o)}})),e}var T=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],I=T.map((function(e){return"["+e+"]"})).join(","),L=function(e,t,n,r){var o=P(n),i=P(r);M(e.querySelectorAll(I),(function(e){var t=e.localName,n=e.value;return-1!==T.indexOf(t)&&-1!==n.indexOf("url("+o)})).forEach((function(e){return e.value=e.value.replace(new RegExp(N(o),"g"),i)})),S(t,o,i)},D={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"};return function(e){function n(n){var o=this;void 0===n&&(n={}),e.call(this,t(y,n));var i=r();this._emitter=i,this.node=null;var a=this.config;if(a.autoConfigure&&this._autoConfigure(n),a.syncUrlsWithBaseTag){var u=document.getElementsByTagName("base")[0].getAttribute("href");i.on(D.MOUNT,(function(){return o.updateUrls("#",u)}))}var s=this._handleLocationChange.bind(this);this._handleLocationChange=s,a.listenLocationChangeEvent&&window.addEventListener(a.locationChangeEvent,s),a.locationChangeAngularEmitter&&k(a.locationChangeEvent),i.on(D.MOUNT,(function(e){a.moveGradientsOutsideSymbol&&A(e)})),i.on(D.SYMBOL_MOUNT,(function(e){a.moveGradientsOutsideSymbol&&A(e.parentNode),(x.isIE()||x.isEdge())&&b(e)}))}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var o={isMounted:{}};return o.isMounted.get=function(){return!!this.node},n.prototype._autoConfigure=function(e){var t=this.config;void 0===e.syncUrlsWithBaseTag&&(t.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(t.locationChangeAngularEmitter=void 0!==window.angular),void 0===e.moveGradientsOutsideSymbol&&(t.moveGradientsOutsideSymbol=x.isFirefox())},n.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},n.prototype.add=function(t){var n=this,r=e.prototype.add.call(this,t);return this.isMounted&&r&&(t.mount(n.node),this._emitter.emit(D.SYMBOL_MOUNT,t.node)),r},n.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(D.SYMBOL_MOUNT,e.node)})),w(r.querySelectorAll("symbol")).forEach((function(e){var t=g.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(D.MOUNT,r),r},n.prototype.destroy=function(){var e=this,t=e.config,n=e.symbols,r=e._emitter;n.forEach((function(e){return e.destroy()})),r.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},n.prototype.mount=function(e,t){void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1);var n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e,o=n.render();return this.node=o,t&&r.childNodes[0]?r.insertBefore(o,r.childNodes[0]):r.appendChild(o),this._emitter.emit(D.MOUNT,o),o},n.prototype.render=function(){return m(this.stringify())},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},n.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return L(this.node,n,E(e)+"#",E(t)+"#"),!0},Object.defineProperties(n.prototype,o),n}(h)}()},887854:function(e,t,n){e.exports=function(){"use strict";var e=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var t=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n};function r(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var o=r((function(e,t){!function(t,n){e.exports=n()}(0,(function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?i(t(n),n,r):n}function r(t,r,o){var a=t.slice();return r.forEach((function(r,u){void 0===a[u]?a[u]=n(r,o):e(r)?a[u]=i(t[u],r,o):-1===t.indexOf(r)&&a.push(n(r,o))})),a}function o(t,r,o){var a={};return e(t)&&Object.keys(t).forEach((function(e){a[e]=n(t[e],o)})),Object.keys(r).forEach((function(u){e(r[u])&&t[u]?a[u]=i(t[u],r[u],o):a[u]=n(r[u],o)})),a}function i(e,t,i){var a=Array.isArray(t),u=(i||{arrayMerge:r}).arrayMerge||r;return a?Array.isArray(e)?u(e,t,i):n(t,i):o(e,t,i)}return i.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return i(e,n,t)}))},i}))})),i=r((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),a=function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},u=i.svg,s=i.xlink,c={};c[u.name]=u.uri,c[s.name]=s.uri;var l=function(e,t){void 0===e&&(e="");var n=o(c,t||{});return"<svg "+a(n)+">"+e+"</svg>"},d=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},n.createFromExistingNode=function(e){return new n({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},n.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},n.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},n.prototype.render=function(){var e=this.stringify();return t(l(e)).childNodes[0]},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(n.prototype,r),n}(e);return d}()}}]);try{stManager.done("dist/11c7a0efa74f6d488cf4ce0ffbe4d05a.edc6ecaccdae558f6cd0.js")}catch(e){}