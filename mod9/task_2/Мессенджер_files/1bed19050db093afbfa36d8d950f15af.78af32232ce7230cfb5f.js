(self.webpackChunkvk=self.webpackChunkvk||[]).push([[61317],{367516:(_,e,t)=>{"use strict";t.d(e,{cutTextToHighlight:()=>o});t(682772),t(294986),t(573210),t(454747);var r="cutTextToHighlight",s=15;function o(_){var e=null;document.querySelectorAll(`${_}:not(.cutTextToHighlight)`).forEach((_=>{if(_.classList.add(r),null===e){var t=getComputedStyle(_).font;e=function(_){var e=document.createElement("canvas").getContext("2d");function t(_){var t=e.measureText(_).width;return Math.ceil(t)}return e.font=_,t}(t)}_.innerHTML=function(_,e,t){void 0===t&&(t="…");var r=_.querySelector(".highlight");if(!r)return _.innerHTML;var o=_.innerHTML.indexOf('<em class="highlight">');if(r.offsetLeft+r.offsetWidth<=_.offsetWidth-s)return _.innerHTML;if(r.offsetWidth<_.offsetWidth-s){for(var i=0,a="",c=o;c>0&&i+r.offsetWidth<=_.offsetWidth;){var l=_.innerHTML.lastIndexOf(" ",c-1);if(-1===l&&(l=0),!((i=e(t+(a=_.innerHTML.substring(l,c)+a).trim()))+r.offsetWidth<=_.offsetWidth-s))break;c=l}o=c}if(o>0)return t+_.innerHTML.substring(o).trim();return _.innerHTML}(_,e)}))}},709987:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{searcher:()=>searcher,iSearch:()=>iSearch});var core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(682772),core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(66992),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(702707),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(241539),core_js_modules_es_set__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(470189),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(804723),core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(573210),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(454747),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(333948),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(342269),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(840060),_web_lib_market__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(489017),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(549357),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(798262),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(274642),_web_lib_fx__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(631351),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(927766),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(152278),_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(315882),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(769488),_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(873589),_web_lib_ui__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(897449),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(146143),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(70162),_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(733164),_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(367516),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(290846),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(283536),_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(699995),_web_search_init__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(601757);function _createForOfIteratorHelperLoose(_,e){var t="undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(t)return(t=t.call(_)).next.bind(t);if(Array.isArray(_)||(t=_unsupportedIterableToArray(_))||e&&_&&"number"==typeof _.length){t&&(_=t);var r=0;return function(){return r>=_.length?{done:!0}:{done:!1,value:_[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var t=Object.prototype.toString.call(_).slice(8,-1);return"Object"===t&&_.constructor&&(t=_.constructor.name),"Map"===t||"Set"===t?Array.from(_):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=_[t];return r}var sectionAuto="auto",sectionAudio="audio",sectionVideo="video",sectionClips="clips",sectionStatuses="statuses",sectionPeople="people",sectionCommunities="communities",sectionMiniApps="mini_apps",sectionQuick="quick",moduleEmpty=void 0,moduleFriends="friends",moduleGroupsCatalog="groups_catalog",moduleGroupsRecommendations="groups_recommendations",paramQuery="c[q]",paramSection="c[section]",paramCategory="c[category]",paramSort="c[sort]",paramPhoto="c[photo]",paramInvite="c[invite]",paramSkipCatalog="c[skip_catalog]",paramHd="c[hd]",paramGroupsRecommendationsModel="c[need_groups_recommendations_model]",paramFrom="c[from]",paramBlockPosition="c[block_position]",searcher={initSearchStatusFilters:_web_search_init__WEBPACK_IMPORTED_MODULE_29__.initSearchStatusFilters,init(_){var e=globalHistory.length;e&&globalHistory[e-1]&&globalHistory[e-1].loc.indexOf("search")?cur.search_return_to=globalHistory[e-1].loc:cur.search_return_to="/",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)("header");var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_query");if(!(t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.data)(t,"opts")||{}).isNew){var r=window.iSearch;r.destroy(),vk.id&&r.init(t,_)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.elfocus)(t),"search"===nav.objLoc[0]&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(cur,{oid:_.user_id,module:"search"}),cur.nav.push(((_,e,t)=>{if(void 0!==_[0]||cur.searchLoc&&void 0!==_.act)return clearTimeout(cur.setLocTO),void(nav.strLoc!==cur.loc&&cur.loc&&hab.setLoc(cur.loc));if(cur.searchLoc){var r=!1;for(var s in t)if("c["===s.substr(0,2)){r=!0;break}if(cur.onLocationChange&&cur.onLocationChange(r),!r)return!0}var o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.clone)(t);delete o[0];var i=o[paramSection]||o.section||sectionQuick;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_menu")&&uiRightMenu&&uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)(`search_menu_${i}`,"search_menu")),searcher.setSection(i),searcher.sendSearchReq(o,!0),!1}))),cur.options||(cur.options={reply_names:{}}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(cur.options,_),searcher.applyOptions(_),t.ignoreFixed=cur.section==sectionStatuses,window.scrollTop=document.body.scrollTop=pageNode.scrollTop=htmlNode.scrollTop=0,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.addEvent)(window,"resize",searcher.onResize),setTimeout(searcher.scrollCheck,50),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_12__.checkPageBlocks,200);var s=window.audioPlayer;s&&s.showCurrentTrack&&s.showCurrentTrack(),cur._back={text:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.getLang)("search_back_to"),show:[()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)("header");var e=globalHistory.length;e&&globalHistory[e-1]&&globalHistory[e-1].loc.indexOf("search")&&(cur.search_return_to=globalHistory[e-1].loc),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.addEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.addEvent)(window,"resize",searcher.onResize);var t=window.iSearch;t.destroy(),vk.id&&t.init((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_query"),_)}],hide:[()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.removeEvent)(window,"scroll",searcher.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.removeEvent)(window,"resize",searcher.onResize),window.iSearch.destroy()}]},cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_25__.cutTextToHighlight)(".labeled__searchServicesDesc"),this.logSearch(cur.params,_)},sendSearchReq(_,e){if(cur.searchReq)try{cur.searchReq.abort()}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.debugLog)(_)}e&&!_.offset&&(vk.no_ads=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.inArray)(_[paramSection],[sectionAudio]),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(_,{uf:1})),void 0!==cur.useRec&&(_.rec=cur.useRec,delete cur.useRec),_.edit=nav.objLoc.edit,_.sign=nav.objLoc.sign,_.all=nav.objLoc.all,_.change=1,cur.searchLoc&&(_.search_loc=cur.searchLoc),void 0!==cur.topType&&(_.type=cur.topType,delete cur.topType);var t=window.iSearch;t&&t.select&&(t.select.hide(),delete cur.setISearch),cur.loadingMedia||(uiSearch.showProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_query").ignoreFixed=_[paramSection]==sectionStatuses),nav.objLoc.from&&(_.from=nav.objLoc.from);var r=this.removeLogClickHandlers,s=this.logSearch;_.act="search_request",_.module=cur.module;var o=+new Date;cur.searchReq=ajax.post("al_search.php",_,{onDone(t,i,a,c){window.cur.onSearchOrSectionChange&&window.cur.onSearchOrSectionChange.forEach((_=>_())),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)(document.querySelector(".search_seo_info"));var l=_.uf&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("results_wrap")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("results_wrap"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("results"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("friends_filters_block")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("friends_filters_block"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("filter_form");if(l.innerHTML=i||"",e&&(n&&(n.innerHTML=a||""),l.setAttribute("style",c),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.elfocus)("search_query")),t.loc){var E=`${locProtocol}//${location.host}/${t.loc}`,u=document.URL===E?"":document.URL;setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_27__.updateCounters.pbind(E,u),10)}searcher.applyOptions(t,e),uiSearch.hideProgress("search_query"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.show)("search_clear_params");var d=window.audioPlayer;d&&d.showCurrentTrack&&d.showCurrentTrack(),cur.onSearchFinish&&cur.onSearchFinish(),(0,_web_lib_market__WEBPACK_IMPORTED_MODULE_11__.shortCurrency)(),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_12__.checkPageBlocks,200),cur.onSearchDone&&cur.onSearchDone(),r();var h=+new Date-o;t.query_duration=t.query_duration||h,s(_,t)},onFail:()=>(uiSearch.hideProgress("search_query"),!0),showProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!0},hideProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)(`filter_${cur.section}`),"loading"),cur.isSearchLoading=!1,cur.loadingMedia=!1},ads:!(!e||_.offset)})},showMore(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("ui_search_load_more"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_more_results");if(_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.isVisible)(_)&&!cur.isSearchLoading)if(e&&searcher.appendElements(e),cur.has_more){cur.disableAutoMore=!1,cur.isSearchLoading=!0,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_21__.lockButton)(_);var t=searcher.getSectionParams();t.offset=cur.offset,t.real_offset=cur.real_offset,t.next_from=cur.next_from,t.query_id=cur.query_id,t.edit=nav.objLoc.edit,t.sign=nav.objLoc.sign,t.all=nav.objLoc.all,t.act="show_more",t.module=cur.module,cur.section===sectionCommunities&&(t.random_seed=cur.random_seed,t.force_group_id=cur.force_group_id),ajax.post("al_search.php",t,{onDone(e,t){cur.isSearchLoading=!1,t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("no_results")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.re)("no_results"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("results").insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ce)("div",{innerHTML:t,id:"search_more_results"}),_),cur.module===moduleGroupsCatalog&&(0,_shared_search_cutTextToHighlight_cutTextToHighlight__WEBPACK_IMPORTED_MODULE_25__.cutTextToHighlight)(".labeled__searchServicesDesc")),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_21__.unlockButton)(_),searcher.applyOptions(e),searcher.scrollCheck()},cache:t[paramSection]!==sectionAudio||t[paramQuery]?1:0})}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)(_);else e&&searcher.appendElements(e)},switchSection(_,e,t){if(t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.checkEvent)(t))return!0;this.removeLogClickHandlers(),e=e||{},_!==sectionCommunities&&_!==sectionMiniApps||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(paramCategory,0),cur.filtersShown=!1);var r=searcher.getSectionParams(_);if(_!==sectionAuto&&_!==sectionQuick&&e.updateStats&&(r.swt=1),e.tab&&(r.tab=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_menu")&&uiRightMenu){var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)(`search_menu_${_}`,"search_menu");s&&uiRightMenu.switchMenu(s)}return searcher.setSection(_),searcher.sendSearchReq(r,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollToTop)(),!1},removeLogClickHandlers(){(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchAuto),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchPeople),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchStatuses),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchCommunities),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchAudio),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchVideo),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchClips),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceFriendsFind),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceGroupsCatalog)},logSearch(_,e){var t=_[paramQuery];if(t&&0!==(t=t.trim()).length){var r,s=cur.section,o=cur.module,i=cur.query_id,a=e.event_bits,c=e.event_bits_auto_blocks||[],l=e.query_duration,n=e.model_name,E=e.model_name_auto_blocks||[],u=e.is_anonym,d=e.sort,h=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("no_results")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_auto_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_auto_rows").children.length>0;switch(s){case sectionAuto:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchAuto,searcher.logSearchAutoBlocks(r,t,i,a,c,E,u,d);break;case sectionAudio:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchAudio;break;case sectionVideo:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchVideo;break;case sectionClips:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchClips;break;case sectionStatuses:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchStatuses;break;case sectionPeople:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchPeople;break;case sectionCommunities:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchCommunities;break;default:return}switch(o){case moduleFriends:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceFriendsFind;break;case moduleGroupsCatalog:r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceGroupsCatalog}o===moduleEmpty&&s===sectionPeople&&(r=_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceFriendsFind),r!==_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.serviceSearchAuto&&(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.saveSearchAttemptStats)(r,0,h,t,i,a,l,n,"","",u,0,null,d)}},logSearchAutoBlocks(_,e,t,r,s,o,i,a){var c=0,l=new Set([_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchAudio,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchPeople,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchGroups,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchVideo,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchClips,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchMarket,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchClassifieds,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchMiniApps]),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_auto_rows");if(n)for(var E={search_audio_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchAudio,search_people_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchPeople,search_communities_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchGroups,search_video_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchVideo,search_clips_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchClips,search_market_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchMarket,search_classifieds_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchClassifieds,search_mini_apps_media:_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.blockNameSearchMiniApps},u=0;u<n.children.length;++u){for(var d,h=n.children[u],b=null,m=_createForOfIteratorHelperLoose(h.classList);!(d=m()).done;){var P=d.value;if(E.hasOwnProperty(P)){b=E[P];break}}if(b){l.delete(b);var M=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.intval)(h.getAttribute("data-block-num"));c=Math.max(c,M);var D=0;s.hasOwnProperty(b)&&(D=s[b]);var O="";o.hasOwnProperty(b)&&(O=o[b]),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.saveSearchAttemptStats)(_,0,!0,e,t,D,0,O,b,"",i,M,null,a)}}l.forEach((s=>{c+=1,(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_18__.saveSearchAttemptStats)(_,0,!1,e,t,r,0,"",s,"",i,c)}))},getSectionParams(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("filter_form"),t={};for(var r in(t=!e||_&&_!==cur.section||cur.section===sectionQuick?{[paramSection]:_||cur.section}:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.serializeForm)(e)||{})[paramQuery]=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)("search_query"),t)if(t.hasOwnProperty(r)){var s="0"==t[r]&&r!==paramQuery;t[r]&&!s||delete t[r],"-1"==t[r]&&t[`${r}_custom`]?(t[r]=t[`${r}_custom`],delete t[`${r}_custom`]):t[`${r}_custom`]&&delete t[`${r}_custom`]}return cur.section!==sectionVideo||t[paramSort]||(t[paramSort]="0"),cur.section===sectionPeople&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("photo")&&!t[paramPhoto]&&(t[paramPhoto]="0"),cur.section===sectionPeople&&t[paramInvite]&&delete t.from,cur.section!==sectionCommunities||!cur.filtersShown||t[paramQuery]||t[paramCategory]||(t[paramSkipCatalog]="1",cur.module===moduleGroupsRecommendations&&(t[paramGroupsRecommendationsModel]="1",t[paramFrom]=cur.from,t[paramBlockPosition]=cur.block_position)),t},sameParams(_){if(!cur.params)return!1;for(var e in _)if(_.hasOwnProperty(e)&&_[e]!=cur.params[e])return!1;for(var t in cur.params)if(cur.params.hasOwnProperty(t)&&_[t]!=cur.params[t])return!1;return!0},switchAudioTop(_){return cur.useRec=_,cur.audioTop=_,this.switchSection(sectionAudio)},showMedia:(_,e,t)=>(!t||!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.checkEvent)(t))&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)("label",e)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)("progress",e)),cur.loadingMedia=!0,searcher.switchSection(_,{updateStats:!0},t)),updResults(){if(cur.customSearchChange)return cur.customSearchChange(),!1;var _=searcher.getSectionParams();if(searcher.sameParams(_)||_[paramSection]===sectionVideo&&!_[paramQuery]&&!nav.objLoc[paramQuery])return!1;cur.onSearchChange&&cur.onSearchChange(_);var e=(cur.section===sectionAuto||cur.section===sectionAudio&&_[paramQuery]&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("audio_lyrics_filter")||cur.section===sectionAudio&&!_[paramQuery]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("audio_lyrics_filter"))&&!_.offset;searcher.sendSearchReq(_,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollToTop)()},onInputChange(_){clearTimeout(cur.requestTimeout),!_||"keydown"===_.type&&13!==_.keyCode?cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),1e3):searcher.updResults()},onKey(){cur.section===sectionQuick&&(clearTimeout(cur.requestTimeout),cur.requestTimeout=setTimeout((()=>{searcher.updResults()}),300))},onEnter(_,e){var t=window.iSearch;t&&t.select&&t.select.isVisible()&&t.select.active>-1||(clearTimeout(cur.requestTimeout),searcher.updResults(),searcher.highlightHotHashtag(e))},checkbox(_,e,t,r){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_21__.checkbox)(_);var s=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_21__.isChecked)(_)?1:0;t&&(s=1-s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(e,s),r||searcher.updResults()},setSection(_){_!==cur.section&&_!==sectionAuto&&_&&(cur.section=_)},applyOptions(options,changeSection){var iSearch=window.iSearch;iSearch.initSelect(),searcher.setSection(options.section),options.reply_names&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(cur.options.reply_names,options.reply_names),delete options.reply_names),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(cur,options),cur.params=searcher.getSectionParams();var header=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_header");if(options.tabs)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)("search_tabs_wrap",options.tabs),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)(header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.show)("search_tabs_wrap");else if(options.title){var headerInner=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)("_header_inner",header);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(headerInner,options.title),options.summary&&headerInner.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ce)("span",{className:"page_block_header_count",innerHTML:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.langNumeric)(options.summary,"%s",!0)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)("search_tabs_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.show)(header)}if(null!=options.controls&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)("_header_extra",header),options.controls||""),void 0!==options.auto_rows&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_auto_rows")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_auto_rows").innerHTML=options.auto_rows||""),clearTimeout(cur.setLocTO),options.loc)if(changeSection)try{nav.setLoc(options.loc)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.debugLog)(_)}else cur.setLocTO=setTimeout((()=>{if("search"===nav.objLoc[0]||nav.objLoc[0]===sectionCommunities||"brands"===nav.objLoc[0]||nav.objLoc[0].match(/^people($|\/)/)||cur.searchLoc)try{nav.setLoc(options.loc)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.debugLog)(_)}}),100);if(options.htitle&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.setDocumentTitle)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__.stripHTML)(options.htitle))),void 0!==options.q){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)("search_query",(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__.stripHTML)(options.q))||"");var resetEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_clear_params");resetEl&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.show)(resetEl)}if(cur.uiSort&&void 0!==options.sortHide&&(options.sortHide&&cur.uiSort.selectItem(0,!1),cur.uiSort.disable(options.sortHide)),cur.section===sectionAuto&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)("search_menu_auto","search_menu")),options.script)try{eval(options.script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.logEvalError)(_,options.script)}var res=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("results"),sc=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_content"),lighted=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hasClass)(sc,"highlight"),noResultsClass=(null==options?void 0:options.real_offset)||"auto"===(null==options?void 0:options.section)?"":"search_empty_result ";res.className=`search_results ${noResultsClass}search_${cur.section}_results${cur.section===sectionStatuses||cur.section===sectionAuto?" wall_module":""}${cur.section===sectionStatuses&&""!==options.summary||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.gpeByClass)("page_block",res)?"":" page_block"} mark_top_verified`,cur.section===sectionAudio&&(res.className+=" audio_w_covers"),lighted&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.addClass)(sc,"highlight");var moreResults=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_more_results");cur.has_more||moreResults&&moreResults.firstChild?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)("seach_pages"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.show)("ui_search_load_more")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)("ui_search_load_more")},selectHotHashtag(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_query"),r=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.data)(t,"opts")||{}).onEnter;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(t,e),r&&r(t,e),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_13__.statlogsValueEvent)("top_hashtag_search",0,"click"),!1},highlightHotHashtag(_){_=_?_.toLowerCase():"";var e=!1,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass)("search_hot_hashtags_item","search_hot_hashtags");return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(t,((t,r)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(r).toLowerCase()===_?(e=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.addClass)(r,"search_hot_hashtags_item_active")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.removeClass)(r,"search_hot_hashtags_item_active")})),e},toggleFilter(_,e,t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hasClass)(_,"search_filter_shut")||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.isVisible)(e)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.addClass)(_,"search_filter_open"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.removeClass)(_,"search_filter_shut"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_15__.slideDown)(e,200,(()=>{(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_12__.checkPageBlocks)(),t&&t()}))):(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_15__.slideUp)(e,200,(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.addClass)(_,"search_filter_shut"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.removeClass)(_,"search_filter_open"),t&&t()}))},appendElements(_){if(_){for(;_.firstChild;)_.parentNode.insertBefore(_.firstChild,_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.re)(_)}},close:()=>nav.go(cur.search_return_to,{},{back:!0}),toggleMinimizedFilters(_,e,t){var r=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.domNS)(_),s=t?0:200;return void 0===e&&(e=!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.isVisible)(r)),!e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.isVisible)(r)?(cur.filtersShown=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.removeClass)(_,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_15__.slideUp)(r,s)):e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.isVisible)(r)&&(cur.filtersShown=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(paramCategory,0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.addClass)(_,"ui_rmenu_item_expanded"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_15__.slideDown)(r,s)),!1},onCommunitiesToggle(){"search"==cur.module&&(uiRightMenu.switchMenu((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass1)(`search_menu_${cur.section}`,"search_menu")),searcher.updResults())},showMenuFeaturing(_){var e,t=document.querySelector(_);if(t){t.classList.add("ui_rmenu_item--featuring");var r=()=>this.hideMenuFeaturing(_);t.addEventListener("click",r),null==(e=window.cur.destroy)||e.push((()=>{t.removeEventListener("click",r)}))}},hideMenuFeaturing(_){var e=document.querySelector(_);e&&e.classList.remove("ui_rmenu_item--featuring")},onMarketSwitchSection(_,e){void 0===e&&(e=!1),searcher.removeLogClickHandlers();var t=searcher.getSectionParams("market"),r=document.querySelector("#search_query"),s=document.querySelector(".search_menu_market");return e&&r?(r.value="",delete t["c[q]"]):(t.swt=1,t.tab=1),s&&uiRightMenu&&((0,_web_ecomm_market_MarketSearchBanner_utils_hideFeaturing__WEBPACK_IMPORTED_MODULE_28__.hideFeaturing)().then((()=>{var _=document.querySelector(".MarketSearchBanner");_&&_.remove(),searcher.hideMenuFeaturing(".search_menu_market")})),uiRightMenu.switchMenu(s)),searcher.setSection("market"),searcher.sameParams(t)||searcher.sendSearchReq(t,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.gpeByClass)("ui_search","search_query"),"ui_search_fixed")&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollToTop)(),!1},subscribe(_,e,t,r,s,o,i){var a,c,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.gpeByClass)("search_row",_);if(cur.unsubscribed=cur.unsubscribed||{},!r&&o&&!cur.unsubscribed[e]){var n=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_22__.showFastBox)({title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.getLang)("global_warning"),bodyStyle:"padding: 20px; line-height: 160%;"},(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.getLang)(o),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.getLang)("search_group_leave"),(()=>{n.hide(),searcher.subscribe(_,e,t,r,s)}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.getLang)("global_cancel"));return!1}r?(a="al_feed.php",c={act:"subscr",oid:e,hash:t,from:s||"search",ref:cur.module},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.domData)(_,"trackcode")&&(c.trackcode=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.domData)(_,"trackcode"))):(a="al_fans.php",c={act:"unsub",oid:e,hash:t,from:"search",ref:cur.module},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.domData)(_,"trackcode")&&(c.trackcode=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.domData)(_,"trackcode")));ajax.post(a,c,{onDone(){i?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.toggleClass)(l,"touched",!!r):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.toggle)(`search_sub${e}`,!r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.toggle)(`search_unsub${e}`,!!r)),r||(cur.unsubscribed[e]=1)},onFail(_){if(_)return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_22__.showFastBox)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.getLang)("global_error"),_).hide,2e3),!0},showProgress(){i?(_.tt&&_.tt.destroy(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.addClass)(l,"loading")):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_21__.lockButton)(_)},hideProgress(){i?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.removeClass)(l,"loading"):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_21__.unlockButton)(_)}})},onResize(){searcher.scrollCheck()},scrollCheck(){if(!(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_10__.browser.mobile||cur.isSearchLoading||cur.disableAutoMore)){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("ui_search_load_more");if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.isVisible)(_)){var e=document.documentElement,t=window.innerHeight||e.clientHeight||document.body.clientHeight;(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_16__.scrollGetY)()+t+200>_.offsetTop&&searcher.showMore()}else{var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_more_results");r&&searcher.appendElements(r)}}},switchFilter(_,e,t){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.checkEvent)(t))return!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)(`c[${_}]`)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)(`c[${_}]`).value=e),cur.section===sectionVideo&&"quality"===_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)(paramHd)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)(paramHd).value=e<0?0:1),searcher.updResults()},showMiniAppTooltip(_){var e=_.dataset.appId,t=_.tt&&_.tt.container?_.tt.container:null;t&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.isVisible)(t)&&(t.classList.remove("tt_left"),t.classList.remove("tt_right"),t.classList.remove("GlobalAppsCardTooltipWrapper--up"));var r,s="left",o=-100,i="",a=document.documentElement.clientWidth,c=document.documentElement.clientHeight,l=_.getBoundingClientRect();l.left>a-520?(s="right",r=365):r=-l.width-10,l.top>c-400&&(o=-50,i="GlobalAppsCardTooltipWrapper--up",t&&t.classList.add(i)),(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTooltip)(_,{url:"al_apps.php",params:{act:"mini_app_card_tooltip",app_id:e},className:`GlobalAppsCardTooltipWrapper ${i}`,shift:[r,o],hasover:!0,ajaxdt:200,showdt:300,hidedt:300,center:!1,dir:s})},openMiniApp(_,e,t){t&&(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.showWiki)({w:`app${_}`,app_ref:e})}},iSearch={init(_,e){if(!this.inited){var t=this;this.inited=!0,this.input=_,this.cont=_.parentNode.parentNode;var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ce)("div",{className:"results_container",innerHTML:'<div class="result_list"></div>'});this.cont.appendChild(r),this.resultList=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.geByClass)("result_list",r)[0],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hide)(this.resultList),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_10__.browser.chrome&&(this.resultList.style.opacity=1),this.resultList.style.width=r.style.width="552px",this.onShowCallback=!!e&&e.onShow,this.initSelect(e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.addEvent)(_,"keyup click mouseup",t.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.addEvent)(document,"click",t.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.addEvent)(_,"keypress keydown",t.inputDownHandler),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("top_search")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("top_search").onclick=_=>hab.getLoc().indexOf("search")?nav.go("search",_,{search:!0}):(window.searcher&&searcher.close(),!1))}},inputUpHandler(_){var e=window.iSearch;if(e.select){if((e.select.isVisible()&&e.select.active>-1||cur.preventISRequest)&&(delete cur.preventISRequest,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.inArray)(_.keyCode,[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.UP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.PAGEUP,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.PAGEDOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.RETURN])))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.cancelEvent)(_);clearTimeout(cur.requestTimeout);var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(e.input);e.currentTerm=t;var r=cur.section;t?cur.requestTimeout=setTimeout((()=>{cur.setISearch=!0,ajax.post("/hints.php?act=a_gsearch_hints",{q:t,section:r},{onDone(_){e.currentTerm===t&&cur.setISearch&&e.showSelectList(t,_),delete cur.setISearch},cache:1})}),300):e.select.hide()}},documentClick(){var _=window.iSearch;_.select&&_.select.hide()},inputDownHandler(_){var e=window.iSearch;if(e.select){if(!e.select||e.select.active<0)return _.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.RETURN&&e.select&&(cur.preventISRequest=!0,e.select.hide()),!0;if(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.SPACE||(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.RETURN||10===_.keyCode)&&e.select&&e.select.isVisible()){var t,r=e.select.list.childNodes[e.select.active],s=r?r.getAttribute("val"):"";if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(e.lastItems,(function(){this[0]===s&&(t=this)})),!t)return;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(e.input,t[3]+(_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.SPACE?" ":"")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.elfocus)(e.input,e.input.length),_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.SPACE&&(cur.preventISRequest=!0,e.select.hide(),searcher.updResults()),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.cancelEvent)(_)}return _.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.KEY.RETURN&&10!==_.keyCode||!e.select||!e.select.isVisible()||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.triggerEvent)(document,_.type,_),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.cancelEvent)(_))}},initSelect(){var _=window._iu,e=window.Select;if(!this.select&&e&&_&&this.resultList){this.guid=_.reg(this);var t=this;this.select=new e(this.resultList,{selectFirst:!1,onItemSelect:this.onItemSelect.bind(this),onShow:()=>((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__.isFunction)(t.onShowCallback)&&t.onShowCallback(),_.sel(t.guid)),onHide:_.sel.pbind(!1),cycle:!0}),this.select.hide()}},showSelectList(_,e){this.select&&((e=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__.isArray)(e)&&e.length?e:[]).length?(this.select.clear(),this.lastItems=e,this.select.content(e),this.select.show(),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_24__.isFunction)(this.onShowCallback)&&this.onShowCallback()):this.select.hide())},onItemSelect(_){var e;if(this.select&&(this.select.hide(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)(this.lastItems,(function(){this[0]===_&&(e=this)})),e)){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ce)("div",{innerHTML:e[3]});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.val)(this.input,t.innerText||t.textContent),this.input.blur(),searcher.updResults()}},onEvent(_){_.type===(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_10__.browser.opera||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_10__.browser.mozilla?"keypress":"keydown")&&this.select.handleKeyEvent(_)},destroy(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.cleanElems)(this.resultList),clearTimeout(_?_.requestTimeout:cur.requestTimeout),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.removeEvent)(this.input,"keyup click mouseup",this.inputUpHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.removeEvent)(document,"click",this.documentClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_17__.removeEvent)(this.input,"keypress keydown",this.inputDownHandler),this.select&&(this.select.destroy(),delete this.select),this.resultList&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.re)(this.resultList.parentNode),delete this.lastItems,this.inited=!1},updateResultsList(_){_?_+="px":_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_20__.ge)("search_query_wrap"),"wide")?"512px":"451px",this.resultList.style.width=_}}},397998:(_,e,t)=>{"use strict";t.d(e,{slideShow:()=>P,slideHide:()=>M,searchActions:()=>D});t(804723);var r=t(583285),s=t(101178),o=t(897449),i=t(70162),a=t(226323),c=t(733164),l=t(146143),n=t(549357),E=t(342269),u=t(152278),d=t(631351),h=t(873589),b=t(709987),m=t(124041),P=_=>{(0,h.isVisible)(_)||(0,d.slideDown)(_,150)},M=_=>{(0,h.isVisible)(_)&&(0,d.slideUp)(_,150)},D={peopleMessage(_){(0,r.showWriteMessageBox)(window.event||{},_)},peopleAction(_,e,t){ajax.post(e,t,{onDone(e){_.parentNode.replaceChild((0,h.ce)("span",{innerHTML:e}).firstChild,_)}})},ownerAction(_,e,t){var r=_.parentNode;ajax.post(e,t,{onDone(_){r.innerHTML=_}})},groupAction(_,e,t,r,o){ajax.post("al_groups.php",{act:"member_action",action:e,gid:t,mid:r,hash:o,context:"search"},{onDone(e){_.parentNode.replaceChild((0,h.ce)("span",{innerHTML:e}).firstChild,_);var t=_tbLink.loc;t&&(0,s.globalHistoryDestroy)(t)}})},inviteToGroup(_,e,t,r,s){var o=s=>{var o,a;s?(o=(0,i.getLang)("search_cancel_invitation"),a=m.FlatButtonAppearance.SECONDARY):(o=(0,i.getLang)("search_send_invitation"),a=m.FlatButtonAppearance.PRIMARY),_.onclick=()=>{D.inviteToGroup(_,e,t,r,s?1:0)},m.FlatButton.setLabel(_,o),m.FlatButton.setAppearance(_,a)},c=()=>m.FlatButton.lock(_),l=()=>m.FlatButton.unlock(_);return s?ajax.post("/al_page.php",{act:"a_cancel_invite",mid:t,gid:e,hash:r},{onDone(){o(0)},showProgress:c,hideProgress:l}):ajax.post("/al_page.php",{act:"a_invite",mid:t,gid:e,hash:r},{onDone(e,t){e?o(1):((0,a.showMsg)((0,h.gpeByClass)("people_row",_),t,"msg"),(0,h.hide)(_))},showProgress:c,hideProgress:l}),!1},showLyrics(_,e,t){var r=(0,h.ge)(`lyrics${_}`);r?(0,h.isVisible)(r)?(0,h.hide)(r):(0,h.show)(r):(r=(0,h.ce)("div",{id:`lyrics${_}`,className:"audio_lyrics_wrap",innerHTML:'<div class="loading"></div>'}),(0,h.ge)(`audio${_}`).appendChild(r),ajax.post("/al_audio.php",{act:"get_lyrics",lid:e,aid:_,top:t},{onDone(_){r.innerHTML=`<div class="audio_lyrics ta_l">${_}</div>`}}))},toggleBanInGroup(_,e,t,r){(0,l.showBox)("/groupsedit.php",{act:"bl_edit",name:`id${e}`,gid:t},{stat:["page.css","ui_controls.js","ui_controls.css"]})},selectCategory(_,e,t){(0,h.ge)("c[category]").value=e,_&&(0,h.hasClass)(_,"_ui_rmenu_subitem")&&uiRightMenu.switchMenu(_);var r=(0,h.ge)("search_query");return(0,h.val)(r)&&((0,h.val)(r,""),r.focus(),(0,u.triggerEvent)(r,"keyup")),b.searcher.toggleMinimizedFilters((0,h.ge)("search_filters_minimized"),!1),b.searcher.updResults(),!1},searchUnchooseGeoPoint(){var _=(0,h.ge)("search_status_map"),e=(0,h.ge)("search_status_map_delete_wrap");(0,h.removeClass)(_,"search_status_map_selected"),(0,h.setStyle)(_,{backgroundImage:""}),e&&e.tt&&e.tt.hide&&e.tt.hide(),(0,h.val)("search_status_map_hidden",""),b.searcher.updResults()},chooseGeoPoint(_,e,t,r){boxQueue.hideLast();var s=Math.pow(10,10),o=200,i=120;window.devicePixelRatio>=2&&(o*=2,i*=2),_=Math.round(_*s)/s,e=Math.round(e*s)/s;var a=(0,h.ge)("search_status_map");(0,h.addClass)(a,"search_status_map_selected"),(0,h.setStyle)(a,{backgroundImage:`url(/maps?lat=${_}&lng=${e}&z=${t}&w=${o}&h=${i})`}),r||((0,h.val)("search_status_map_hidden",`${_},${e},${t}`),b.searcher.updResults())},searchChooseGeoPoint(){var _={act:"a_choose_place_box",search:1},e=(0,h.val)("search_status_map_hidden").match(/(\-?\d{1,3}(?:\.\d+)?)\,(\-?\d{1,3}(?:\.\d+)?)(?:\,(\d+))?/);e&&(_.lat=(0,c.floatval)(e[1]),_.lon=(0,c.floatval)(e[2]),_.zoom=e[3]||8),(0,l.showBox)("/al_places.php",_),cur.chooseGeoPoint=window.searchActions.chooseGeoPoint},searchUrlOnChange(_,e,t){var r=(0,h.ge)("search_status_url"),s=r.name,i=e?"c[domain]":"c[url]";return(0,o.radiobtn)(_,e,"search_status_hint_domain"),(0,h.elfocus)(r),(0,h.val)(r)&&i!==s&&(r.name=i,b.searcher.updResults()),(0,u.cancelEvent)(t)},onChangeCommunityType(_){_=(0,c.positive)(_),(0,h.val)((0,h.ge)("c[type]"),_),P("region_filters"),3===_?(P("events_filter"),(0,h.val)((0,h.ge)("all_events"),(0,o.isChecked)("future")?0:1)):(M("events_filter"),(0,h.val)((0,h.ge)("all_events"),0)),(0,n.checkPageBlocks)(),window.searchActions.updateCommunityThemes(_),b.searcher.updResults()},updateCommunityThemes(_,e){_=(0,c.positive)(_);var t,r=(0,c.positive)((0,h.val)((0,h.ge)("not_safe_search"))),s=[];r?s=cur.communityThemes[_]||[]:(0,E.each)(cur.communityThemes[_]||[],(function(){this[5]||s.push(this)})),e?(t=(0,c.positive)(cur.communityThemesDD.val()),!(0,E.inArray)(t,cur.notSafeThemesIds)&&t||cur.communityThemesDD.clear()):cur.communityThemesDD.clear(),cur.communityThemesDD.setOptions({autocomplete:!1}),cur.communityThemesDD.setData(s),cur.communityThemesDD.setOptions({autocomplete:!0}),_>1?P("cTheme"):M("cTheme")},onChangeCommunityTheme(_){(0,h.val)((0,h.ge)("c[theme]"),_),b.searcher.updResults()},onChangeNotSafe(_,e,t){var r=(0,h.val)((0,h.ge)("c[theme]"));(0,E.inArray)(r,cur.notSafeThemesIds)&&(0,h.val)((0,h.ge)("c[theme]"),""),b.searcher.checkbox(_,e,t,!0),window.searchActions.updateCommunityThemes((0,h.val)((0,h.ge)("c[type]")),!0),b.searcher.updResults()}}},797704:(_,e,t)=>{"use strict";t.d(e,{KEY:()=>r,isMainClick:()=>s,preventLinkOpening:()=>o});var r={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16};function s(_){return!("click"!==_.type&&"mousedown"!==_.type&&"mouseup"!==_.type||0!==_.button||_.ctrlKey||_.shiftKey||_.altKey||_.metaKey)}var o=function(_){return new Promise((function(e){s(_.nativeEvent)&&(_.stopPropagation(),_.preventDefault(),e())}))}},699995:(_,e,t)=>{"use strict";t.d(e,{hideFeaturing:()=>s});var r=t(189798),s=function(){return(0,r.api)("market.searchFeaturingClose",{})}},601757:(_,e,t)=>{"use strict";t.d(e,{initSearchStatusFilters:()=>h});var r=t(570655),s=t(733164),o=t(797704),i=t(798262),a=t(873589),c=t(152278),l=t(822560),n=t(70162),E=t(290846),u=t(397998),d=t(997109);function h(_){var e,t=_.selData,h=_.contentHint,b=function(_){_.keyCode!=o.KEY.ENTER&&"keydown"==_.type||window.searcher.updResults()};window.radioBtns.sort={els:(0,r.__spreadArray)([],(0,r.__read)(document.querySelectorAll("#cSort .radiobtn")),!1),val:t.sort},window.cur.onSortChanged=function(_){var e=_.querySelector("._ui_toggler");if(e){e.classList.toggle("on");var t=e.classList.contains("on")?1:0;"search"==window.cur.section&&(0,i.statlogsValueEvent)("feed_change_sort",0,t),window.cur.disableSort=!t;var r=document.getElementById("c[sort]");r&&(r.value=String(t)),window.searcher.updResults()}},["exclude","url","content"].forEach((function(_){var e=document.querySelector("#search_status_"+_);if(e){var t=function(){!function(_){window.cur.searchReq||(0,a.val)(_)!=(window.cur.params&&window.cur.params[_.name]||"")&&window.searcher.updResults()}(e)};(0,c.addEvent)(e,"blur",t),(0,c.addEvent)(e,"keydown change paste",b),(0,d.pushNavDestroy)((function(){(0,c.removeEvent)(e,"blur",t),(0,c.removeEvent)(e,"keydown change paste",b)})),(0,l.placeholderInit)(e)}})),["type","attach","likes"].forEach((function(_){var e=document.querySelector("#search_status_"+_);new window.Dropdown(e,t[_],{width:null,dark:!0,zeroPlaceholder:!0,onChange:window.searcher.updResults})}));var m=document.querySelector("#search_status_url");(0,c.addEvent)(m,"focus blur",(function(_){if(m)if("focus"==_.type){var e=('\n        <div id="search_status_hint_opts">\n          <div class="radiobtn on" onmousedown="return searchActions.searchUrlOnChange(this, 0, event);">'+(0,n.getLang)("news_searchext_link_hint")+'</div>\n          <div class="radiobtn" onmousedown="return searchActions.searchUrlOnChange(this, 1, event);">'+(0,n.getLang)("news_searchext_domain_hint")+"</div>\n        </div>\n      ").trim();(0,E.showTooltip)(m,{text:e,className:"search_status_hint_tt",shift:[324,-15,-15],slideX:-15,dir:"right",nohide:!0,onCreate:function(){(0,c.removeEvent)(m,"mouseout"),window.radioBtns.search_status_hint_domain={els:(0,r.__spreadArray)([],(0,r.__read)(document.querySelectorAll("#search_status_hint_opts .radiobtn")),!1),val:0}}})}else m.tt&&m.tt.hide&&m.tt.hide()}));var P=document.querySelector("#search_status_content");(0,c.addEvent)(P,"focus blur",(function(_){P&&("focus"==_.type?(0,E.showTooltip)(P,{text:h,className:"search_status_hint_tt",shift:[324,-15,-15],slideX:-15,dir:"right",onCreate:function(){(0,c.removeEvent)(P,"mouseout")}}):P.tt&&P.tt.hide&&P.tt.hide())}));var M=document.querySelector("#search_status_map_hidden"),D=M?null===(e=(0,a.val)(M))||void 0===e?void 0:e.match(/(\-?\d{1,3}(?:\.\d+)?)\,(\-?\d{1,3}(?:\.\d+)?)(?:\,(\d+))?/):null;if(D){var O=(0,s.floatval)(D[1]),p=(0,s.floatval)(D[2]),w=D[3]||8;u.searchActions.chooseGeoPoint(O,p,w,!0)}}}}]);try{stManager.done("dist/1bed19050db093afbfa36d8d950f15af.78af32232ce7230cfb5f.js")}catch(_){}